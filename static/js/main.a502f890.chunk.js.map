{"version":3,"sources":["assets/circles-logo.svg","components/pages/Splash/styles.ts","components/utils/Flex.tsx","store/context.ts","store/hooks.ts","store/reducer.ts","storage/storage.ts","utils/hooks/general.ts","storage/hooks.ts","api/client.ts","api/utils.ts","api/commands.ts","config/config.ts","store/actions.ts","api/hooks.ts","utils/backgroundThemes.ts","components/pages/Splash/index.tsx","components/pages/Intro/styles.ts","components/pages/Intro/trans.ts","components/pages/Intro/IntroView.tsx","assets/intro00.svg","assets/intro01.svg","assets/intro02.svg","components/pages/Intro/index.tsx","components/pages/Login/styles.ts","components/pages/Login/trans.ts","assets/verifed.svg","assets/wave.svg","config/firebase.ts","api/auth.ts","components/pages/Login/index.tsx","components/pages/Signup/styles.ts","components/pages/Signup/trans.ts","assets/celebration.svg","components/pages/Signup/index.tsx","components/pages/Welcome/styles.ts","components/pages/Welcome/trans.ts","assets/personal.svg","components/pages/Welcome/index.tsx","components/common/AccountPicker/styles.ts","utils/general.ts","components/common/AccountPicker/index.tsx","components/pages/Rooms/trans.ts","components/pages/Rooms/styles.ts","components/pages/Rooms/CreateRoom.tsx","api/messages.ts","components/pages/Rooms/index.tsx","components/pages/Home/styles.ts","components/pages/People/styles.ts","components/pages/People/ContactLabel.tsx","components/pages/People/trans.ts","components/pages/People/index.tsx","components/pages/Menu/styles.ts","components/pages/Menu/index.tsx","components/common/TopMenu/MenuPopover/trans.ts","components/common/SettingsDrawer/trans.ts","components/common/SettingsDrawer/index.tsx","components/common/SettingsDrawer/styles.ts","components/common/TopMenu/MenuPopover/index.tsx","components/common/TopMenu/MenuPopover/styles.ts","components/common/Logo/styles.ts","components/common/Logo/index.tsx","components/common/TopMenu/index.tsx","components/common/TopMenu/styles.ts","components/pages/Home/index.tsx","components/pages/Profile/styles.ts","components/pages/Profile/trans.ts","components/pages/Profile/index.tsx","components/pages/Room/styles.ts","components/pages/Room/Messages.tsx","components/common/MessageInput/styles.ts","components/common/MessageInput/index.tsx","api/fcm.ts","components/pages/Room/MessageForm.tsx","components/pages/Room/MessagesSkeleton.tsx","components/pages/Room/RoomView.tsx","components/pages/Room/index.tsx","components/pages/Highlights/styles.ts","components/pages/Highlights/trans.ts","components/common/AccountSugestions/trans.ts","components/common/AccountSugestions/styles.ts","components/common/AccountSugestions/Suggestion.tsx","components/common/AccountSugestions/index.tsx","components/common/AccountFavContacts/styles.ts","components/common/AccountFavContacts/index.tsx","components/pages/Highlights/index.tsx","components/common/BottomNav/index.tsx","Routes.tsx","config/theme.ts","utils/hooks/locale.ts","store/StoreProvider.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["useStyles","makeStyles","theme","root","backgroundColor","palette","background","paper","logo","width","height","Flex","props","reducedProps","_props","args","key","includes","reduceProps","style","Object","freeze","display","rootEl","rootComponent","React","createElement","cloneElement","onClick","className","children","INITIAL_STATE","currentAccount","undefined","preferences","backgroundTheme","StoreContext","createContext","useStore","stateFn","context","useContext","useMemo","useDispatch","useRef","action","console","log","type","payload","setStore","state","changes","reduceState","current","setLocalStorageValue","value","localStorage","setItem","useForkedState","fn","ref","signal","useSignal","setState","val","useEffect","useRestrictedPage","condition","path","history","useHistory","push","useRestrictedPageForCurrentAccount","useState","updateState","useCallback","useStorageSetter","removeItem","resetLocalStorageValue","Client","url","this","entries","map","e","JSON","stringify","join","command","Promise","resolve","reject","once","cmd","exec","makeArguments","reqUrl","headers","Headers","fetch","mode","then","response","json","parsed_response","catch","Command","status","data","isLoaded","request","arrayToStringList","arr","toString","replace","checkType","name","t","Array","isArray","types","Error","checkField","obj","field","AccountInfo","account_id","flags","rooms","friends","contact","created_at","Date","AccountChange","AccountList","included","volume","AccountLogin","token","RoomInfo","room_id","accounts","RoomCreate","label","invite","AccountGetSuggestions","config","host_url","cli","setCurrentAccount","updateCurrentAccount","a","execute","rq","setBackgroundTheme","useCommand","_args","useDispatchCommand","useAccount","updateStore","options","dispatchStore","dispatchCommand","id","contacts","accountInfoRq","useRoom","roomInfoRq","backgroundThemes","Splash","location","classes","dispatch","enqueueSnackbar","useSnackbar","accountIdToken","storage","storageFn","accountLogin","accountInfo","bgThemeId","getItem","bgTheme","find","bgT","messaging","firebase","requestPermission","getToken","tokens","newTokens","err","navigator","serviceWorker","addEventListener","message","notification","body","initialPath","alignItems","justifyContent","src","alt","introViewRoot","maxWidth","breakpoints","values","md","margin","introViewContentWrapper","marginTop","translations","preset","title","en_US","pl_PL","de_DE","firstTitle","secondTitle","thirdTitle","yes","ProgressIcons","activePart","active","ProgressIcon","useTheme","Icon","opacity","fontSize","color","primary","main","IntroView","partId","prevButtonText","nextButtonText","flexDirection","image","Typography","variant","align","paragraph","description","Button","onPrev","onNext","Intro","useLittera","translated","setActivePart","handleNext","ap","handlePrev","intro00","intro01","intro02","minHeight","up","container","padding","spacing","inputWrapper","loginImage","position","right","bottom","imgContainer","overflow","dark","wave","zIndex","left","footerWrapper","firebaseApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","database","auth","usePublicVapidKey","signInWithPopup","provider","GoogleAuthProvider","addScope","result","fetchAccountIdToken","error","errorCode","code","errorMessage","signInWithCredentials","email","password","signInWithEmailAndPassword","currentUser","getIdToken","idToken","signUpWithCredentials","createUserWithEmailAndPassword","signOut","Login","emailInput","setEmailInput","passwordInput","setPasswordInput","errorMsg","setErrorMsg","isLoading","setIsLoading","handleLogin","user","uid","account","handleInputChange","inputName","event","newValue","target","waveAsset","onSubmit","preventDefault","TextField","marginBottom","onChange","Alert","severity","AlertTitle","Fab","aria-label","Backdrop","open","CircularProgress","signImage","Signup","storageSetter","confirmPasswordInput","setConfirmPasswordInput","length","personalImage","welcomeTitle","Welcome","labelField","setLabelField","details","first_name","firstNameField","setFirstNameField","middle_name","middleNameField","setMiddleNameField","last_name","lastNameField","setLastNameField","birthdate","dateOfBirth","setDateOfBirth","sex","setSex","handleChange","handleSubmit","parse","alert","personalInformationImage","paddingBottom","helperText","defaultValue","InputLabelProps","shrink","float","ensureArray","makeInitials","fallback","toUpperCase","makeFullName","capitalizeFirstLetter","substring","toLowerCase","SingleAccount","selected","accountFullName","accountInitials","paddingTop","cursor","Avatar","avatar_url","AccountPicker","accountsRq","friend","prevValue","disabled","multiple","splice","indexOf","conversation","createRoom","select","flexWrap","topMenu","listWrapper","overflowY","roomWrapper","boxShadow","borderRadius","minWidth","roomsButton","borderRadiusBottom","roomItemWrapper","textAlign","transition","avatarPlaceholder","marginRight","lastMessageTypography","textOverflow","whiteSpace","CreateRoom","setError","loading","setLoading","setOpen","setSelected","setLabel","handleClose","newRoom","isSubmitDisabled","Dialog","fullWidth","onClose","aria-labelledby","DialogTitle","DialogContent","dividers","DialogActions","autoFocus","useMessages","messages","setMessages","makeRefPath","on","snapshot","msgs","m","RoomLabel","roomUri","room","lastMessage","keys","lastMessageValue","atob","roomMembers","filter","acc","roomName","Box","AvatarGroup","max","accountsMap","Rooms","down","flexGrow","sidebarWidth","sidebar","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","top","transform","backgroundImageBacklit","mainSection","drawer","personData","avatar","text","ContactLabel","setName","setAvatar","forEach","surname","favorite","peopleMessage","People","gutterBottom","menuIcon","Menu","isOpenMenu","setIsOpenMenu","example","manageAccount","settings","VersionSettings","toDateString","ThemeSettings","index","setTheme","ThemePanel","fontWeight","h2","paperDrawer","SettingsDrawer","cx","Drawer","anchor","keepMounted","IconButton","createStyles","h4","marginLeft","avatarBig","popoverPaper","header","MenuPopover","shownSettingsDrawer","setShownSettingsDrawer","openSettingsDrawer","shownProfileDrawer","setShownProfileDrawer","anchorEl","setAnchorEl","Boolean","storeDispatch","handleSignOut","window","reload","aria-describedby","currentTarget","Popover","anchorReference","anchorOrigin","vertical","horizontal","transformOrigin","List","ListItem","button","ListItemIcon","ListItemText","onOpen","textShadow","fontFamily","Logo","typographyProps","menuBar","TopMenu","Home","isRoomsView","component","Highlights","Room","innerWidth","innerHeight","Contact","border","Profile","flexBasis","backdropFilter","borderTopLeftRadius","shape","borderTopRightRadius","inputContainer","default","roomTitle","messagesRoot","maxHeight","messageRoot","ownedMessage","alignSelf","wordBreak","notOwnedMessage","messageWithManyLines","nextMessageOwned","borderBottomRightRadius","nextMessageNotOwned","borderBottomLeftRadius","prevMessageOwned","prevMessageNotOwned","equalToLine","paddingLeft","sendMessageArea","Message","author","isOwned","displayAvatar","isOwnedNextMessage","isOwnedPrevMessage","setHeight","rootClasses","bubbleClasses","offsetHeight","authorFullName","authorInitials","source","Messages","roomId","getAuthor","author_id","hasMessages","reverse","message_id","MessageInput","onKeyPress","shiftKey","inputRef","placeholder","sendPushNotification","registration_ids","MessageForm","input","setInput","handleTextFieldFocus","focus","btoa","MessagesSkeleton","Skeleton","animation","RoomView","params","useParams","submitMessage","timestamp","newMsgKey","child","updates","update","welcome","avatarContainer","welcomeWraper","greetings","suggestionsInfo","greeting","firstMessage","card","suggestionAvatar","gsap","registerPlugin","ScrollTrigger","Suggestion","suggestion","scrollRef","accountRq","Card","parseInt","CardContent","AccountSuggestions","suggestionsRq","suggestions","AccountContactBadge","AccountFavContacts","c","TABS","BottomNav","visible","useLocation","pathname","split","setValue","BottomNavigation","showLabels","BottomNavigationAction","icon","homeSubpages","Routes","bottomNavVisible","RegExp","test","exact","createMuiTheme","secondary","overrides","MuiCssBaseline","html","WebkitFontSmoothing","LOCALES","PRESET","no","StoreProvider","initialState","Provider","App","useLocale","language","setLanguage","ThemeProvider","CssBaseline","maxSnack","basename","isLocalhost","hostname","match","registerValidSW","swUrl","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","document","getElementById","URL","href","origin","contentType","get","ready","unregister","checkValidServiceWorker","scope"],"mappings":"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","file":"static/js/main.a502f890.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/circles-logo.420d4698.svg\";","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n    backgroundColor: theme.palette.background.paper\n    },\n\n    logo: {\n        width: \"300px\",\n        height: \"300px\"\n    }\n  }));\n\n  export default useStyles;\n","import React from \"react\";\n\ntype FlexAlignType =\n  | 'flex-start'\n  | 'flex-end'\n  | 'center'\n  | 'stretch'\n  | 'baseline'\n\ntype FlexProperties = {\n  inline?: boolean\n  flexDirection?: 'row' | 'column' | 'row-reverse' | 'column-reverse'\n  flexWrap?: 'nowrap' | 'wrap' | 'wrap-reverse'\n  justifyContent?:\n    | 'flex-start'\n    | 'flex-end'\n    | 'center'\n    | 'space-between'\n    | 'space-around'\n    | 'space-evenly'\n  alignContent?:\n    | 'flex-start'\n    | 'flex-end'\n    | 'center'\n    | 'stretch'\n    | 'space-between'\n    | 'space-around'\n  alignItems?: FlexAlignType\n}\n\ntype FlexProps = {\n  children: React.ReactNode\n  className?: string\n  onClick?: () => void\n  rootComponent?: React.Component\n  style?: object\n  width?: number | string\n  height?: number | string\n} & FlexProperties\n\nconst reduceProps = (props: FlexProps, ...args: string[]) => {\n    let _props = {...props};\n\n    for(var key in _props) {\n        // @ts-ignore\n        if(args.includes(key)) delete _props[key];\n    }\n\n    return _props;\n}\n\n/**\n * A component for easier flex-box implementation.\n * @example <Flex justifyContent=\"space-between\" alignItems=\"center\">...</Flex>\n */\nconst Flex = (props: FlexProps) => {\n  const reducedProps = reduceProps(props, \"children\", \"className\");\n\n  const style = Object.freeze({\n      display: \"flex\",\n      ...reducedProps,\n      ...props.style\n  });\n\n  const rootEl = props.rootComponent ?? React.createElement(\"div\");\n\n  return React.cloneElement(rootEl as React.ReactElement<any>, { onClick: props.onClick, style, className: props.className, children: props.children });\n}\n\nexport default Flex;","import React from \"react\";\nimport { IAccount } from \"types\";\n\nexport interface IPreferences {\n    backgroundTheme: { id: string, url: string, label: string }\n}\n\nexport interface IState {\n    currentAccount?: IAccount;\n    preferences: Partial<IPreferences> | {};\n}\n\nexport const INITIAL_STATE: IState = Object.freeze({\n    currentAccount: undefined,\n    preferences: {\n        backgroundTheme: null\n    }\n})\n\n/**\n * Our holy Store!\n */\nexport const StoreContext = React.createContext<[IState, React.Dispatch<React.SetStateAction<IState>>]>([INITIAL_STATE, () => {}]);","import { useContext, useRef, useMemo } from \"react\"\nimport { StoreContext, IState } from \"./context\";\nimport { reduceState } from \"./reducer\";\n\n/**\n * Access Store variables.\n * @param stateFn Callback providing Store state.\n * @example const myValue = useStore(state => state.myValue);\n */\nexport const useStore = <T>(stateFn: (state: IState) => T) => {\n    const context = useContext(StoreContext);\n\n    return useMemo(() => stateFn(context[0]), [context, stateFn]);\n}\n\nexport type StoreAction<T=any> = { type: string, payload?: T }\n\n/**\n * Returns dispatch method for Store.\n * @example \n * const dispatch = useDispatch();\n * ...\n * dispatch({ type: \"ACTION_NAME\", payload: \"changes\" });\n */\nexport const useDispatch = () => {\n    const context = useContext(StoreContext);\n\n    const ref = useRef(<T=any>(action: StoreAction<T>) => {\n        console.log(\"\", action.type, \"=>\", action.payload);\n        reduceState(context[1], action)\n    });\n\n    return ref.current;\n}","import { IState } from \"./context\";\nimport { StoreAction } from \"./hooks\";\n\nexport const reduceState = (setStore: React.Dispatch<React.SetStateAction<IState>>, action: StoreAction) => {\n    setStore((state: IState) => {\n        const changes: Partial<IState> = {};\n        \n        // Add actions here!\n        // ! This might seem a little complicated but some refactoring might help.\n        switch(action.type) {\n            case \"SET_CURRENT_ACCOUNT\":\n                changes.currentAccount = {...action.payload};\n                break;\n\n            case \"SET_BACKGROUND_THEME\":\n                // TODO: Make sure to initialize preferences before accessing reducer...\n                if (!changes.preferences) changes.preferences = {};\n                // @ts-ignore\n                changes.preferences.backgroundTheme = { ...action.payload } as { id: string, url: string, label: string }\n                break;\n        }\n\n        return {...state, ...changes}\n    });\n}","export interface IStorage {\n    accountIdToken?: string;\n}\n\nexport const getLocalStorageValue = (key: keyof IStorage) => {\n    const storage = localStorage as unknown as IStorage;\n\n    return storage[key];\n}\n\nexport const getLocalStorage = () => {\n    return localStorage as unknown as IStorage;\n}\n\nexport const setLocalStorageValue = (key: keyof IStorage, value: string) => {\n    localStorage.setItem(key, value);\n}\n\nexport const resetLocalStorageValue = (key: keyof IStorage) => {\n    localStorage.removeItem(key);\n}","import { useState, useRef, useEffect, useCallback } from \"react\";\nimport { useStore } from \"store/hooks\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const useForkedState = <T extends any[], R>(fn: (...args: T) => R, ...args: T) => {\n    const ref = useRef(null as unknown as [R, (value: R) => void]);\n    const signal = useSignal();\n\n    if(ref.current === null) {\n        const value: R = fn(...args);\n        const setState = (val: R) => { ref.current[0] = val; signal(); }\n\n        ref.current = [ value, setState ];\n    }\n\n    useEffect(() => { \n        const value = fn(...args);\n\n        if(ref.current[0] !== value) \n            ref.current[1](value); \n    }, [fn, args]);\n\n    return ref.current;\n}\n\n/**\n * Redirect to page if condition met\n * @param path for redirect\n * @param condition\n */\nexport const useRestrictedPage = (condition: boolean, path: string = \"/home\" ) => {\n    const history = useHistory();\n    useEffect(() => {\n        if (condition) \n            history.push(path)\n        \n    }, [condition, path, history]);\n}\n\n/**\n * Redirect to page if current account is active\n * @param path for redirect\n */\nexport const useRestrictedPageForCurrentAccount = (path: string = \"/home\") => {\n    const currentAccount = useStore(state => state.currentAccount);\n    useRestrictedPage(!!currentAccount, path)\n}\n\n\n\nexport const useSignal = () => {\n    const [, updateState] = useState();\n    // @ts-ignore\n    return useCallback(() => updateState({}), []);\n}\n","import { IStorage, setLocalStorageValue, resetLocalStorageValue } from \"./storage\";\nimport { useRef } from \"react\";\nimport { useSignal } from \"utils/hooks/general\";\n\n/**\n * Access Local Storage variables.\n * @param storageFn Callback providing Local Storage state.\n * @example const myValue = useStorage(storage => storage.myValue);\n */\nexport const useStorage = <T>(storageFn: (storage: IStorage) => T) => {\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return storageFn(localStorage as IStorage)\n}\n\n/**\n * Returns local storage value setter.\n * @example\n * const storageSetter = useStorageSetter();\n * ...\n * storageSetter(\"currentAccountId\", \"tester\");\n */\nexport const useStorageSetter = () => {\n    const signal = useSignal();\n    const ref = useRef((key: keyof IStorage, value?: string | null) => {\n        if(value === undefined || value === null) {\n            resetLocalStorageValue(key);\n        } else {\n            setLocalStorageValue(key, value);\n        }\n        signal();\n    });\n\n    return ref.current;\n}","export type TResponse = {status: number, message?: string, data: any};\n\nexport interface IClient {\n    url: string\n}\n\nexport class Client implements IClient {\n    url: string\n\n    constructor(url: string) {\n        this.url = url;\n    }\n\n    makeArguments(args: {[key: string]: string}) {\n        return Object.entries(args).map((e => `${e[0]}=${typeof e[1] === \"object\" ? JSON.stringify(e[1]) : e[1]}`)).join(\"&\");\n    }\n\n    execute(command: ICommand) {\n        return new Promise<{status: number, data: any}>((resolve, reject) => {\n            let once = false;\n            const cmd = command.exec[0];\n            const args = this.makeArguments(command.exec[1]);\n    \n            const reqUrl = `${this.url}${cmd}?${args}`;\n\n            const handleResolve = (response: any) => {\n                if(!once) {\n                    once = true;\n                    \n                    const parsed_response = response\n                    \n                    console.log(\"\", cmd, \"=>\", parsed_response);\n                    resolve(parsed_response);\n                }\n                \n            }\n\n            let headers = new Headers({\n                'Access-Control-Allow-Origin':'*',\n                'Content-Type': 'multipart/form-data'\n            });\n\n            fetch(reqUrl, { mode: \"cors\", headers })\n                .then(response => response.json())\n                .then(handleResolve)\n                .catch(reject);\n        })\n    }\n}\n\n\nexport interface ICommand {\n    exec: [string, {[key: string]: any}];\n    status: number;\n\n    parse(status: number, data: any): any\n}\n\nexport class Command implements ICommand {\n    exec: [string, {[key: string]: any}];\n    status: number;\n\n    constructor(exec: [string, {[key: string]: any}]) {\n        this.exec = exec;\n        this.status = 0;\n    }\n\n    parse(status: number, data: any) {\n        return data;\n    }\n}","export const isLoaded = (request: any) => {\n    return request !== null && request.status !== 102\n}\n\nconst arrayToStringList = (arr: string[]) => \n        arr.toString().replace(/,/g, \", \")\n\ntype TType = \"string\" | \"number\" | \"bigint\" | \"boolean\" | \"symbol\" | \"undefined\" | \"object\" | \"function\" | \"null\" | \"array\";\n\n/**\n * Throws an exception if the types are not correct.\n * @param name \n * @param value \n * @param types \n */\nexport const checkType = (name: string, value: any, ...types: TType[]) => {\n    let t: TType = typeof value;\n\n    if (t === \"object\")\n        if (value === null)\n            t = \"null\";\n        else if (Array.isArray(value))\n            t = \"array\";\n\n    if (!types.includes(t))\n        throw new Error(`Expected ${arrayToStringList(types)} for ${name}, got ${typeof value}`)\n\n    return value;\n}\n\n/**\n * Same as checkType but accepts an parent object.\n * @param obj \n * @param field \n * @param types \n */\nexport const checkField = <T, K extends keyof T>(obj: T, field: K, ...types: TType[]) => {\n    let val = obj[field];\n    checkType(field as string, val, ...types);\n    return val;\n}","import { Command } from \"./client\";\nimport { IAccount } from \"types\";\nimport { checkField, checkType } from \"./utils\";\n\nexport class AccountInfo extends Command {\n    constructor(account_id: string, flags?: boolean, rooms?: boolean, friends?: boolean) {\n        super([\"account-accountInfo\", { account_id, flags: !!flags, rooms: !!rooms, friends: !!friends }]);\n\n        checkType(\"account_id\", account_id, \"string\");\n\n        checkType(\"flags\", flags, \"boolean\", \"undefined\");\n        checkType(\"rooms\", rooms, \"boolean\", \"undefined\");\n        checkType(\"friends\", friends, \"boolean\", \"undefined\");\n    }\n\n    parse(status: number, data: IAccount): IAccount {\n        if(status !== 200) return data;\n\n        checkType(\"data\", data, \"object\");\n\n        checkField(data, \"id\", \"string\");\n        checkField(data, \"label\", \"string\");\n        checkField(data, \"created_at\", \"string\");\n        checkField(data, \"avatar_url\", \"string\", \"undefined\");\n\n        checkField(data, \"contact\", \"object\");\n        if (data.contact)\n            checkField(data.contact, \"email\", \"string\");\n\n        checkField(data, \"details\", \"object\");\n        checkField(data, \"flags\", \"object\", \"undefined\");\n        checkField(data, \"friends\", \"array\", \"undefined\");\n        checkField(data, \"rooms\", \"array\", \"undefined\");\n        \n        return { ...data, created_at: new Date(data.created_at) };\n    }\n}\n\nexport class AccountChange extends Command {\n    constructor(account_id: string, changes: { label?: string, name?: string, surname?: string }) {\n        super([\"account-accountChange\", {account_id, changes: JSON.stringify(changes)}]);\n    }\n\n    parse(status: number, data: IAccount) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountList extends Command {\n    constructor(included?: string[], volume?: number) {\n        super([\"account-accountList\", { volume, included }]);\n\n        checkType(\"volume\", volume, \"number\", \"undefined\");\n        checkType(\"included\", included, \"array\", \"undefined\");\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountCreate extends Command {\n    constructor(data: {email: string, password: string, label?: string}) {\n        super([\"account-accountCreate\", data]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountLogin extends Command {\n    constructor(token: string) {\n        super([\"account-accountLogin\", { token }]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountFind extends Command {\n    constructor(data: { email?: string, label?: string }) {\n        super([\"account-accountFind\", data]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountAddContact extends Command {\n    constructor(data: {account_id: string, contact_id: string}) {\n        super([\"account-accountAddContact\", data]);\n    }   \n    \n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n        \n        return data;\n    }\n}\n\nexport class RoomInfo extends Command {\n    constructor(room_id: string, accounts?: boolean) {\n        super([\"room-roomInfo\", { room_id, accounts }]);\n    }\n\n    parse(status: number, data: IAccount) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class RoomCreate extends Command {\n    constructor(account_id: string, label: string, invite: string[]) {\n        super([\"room-roomCreate\", { label, invite: [...invite, account_id] }]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountGetSuggestions extends Command{\n    // deepcode ignore no-any: Type declaration of 'any' loses type-safety\n    constructor(account_id: string){\n        super([\"account-accountGetSuggestions\", {account_id}]);\n    };\n\n    parse(status: number, data: any){\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n\n}\n","const config = {\n    host_url: \"https://us-central1-ping-82fee.cloudfunctions.net/\" //\"http://localhost:5001/ping-82fee/us-central1/\" //\n};\n\nexport default config;","import { IAccount } from \"types\";\nimport config from \"config/config\";\nimport { AccountInfo } from \"api/commands\";\nimport { Client } from \"api/client\";\n\nconst HOST_URL = config.host_url;\nconst cli = new Client(HOST_URL);\n\n/**\n * Set current account.\n * @param payload Account info.\n * @see api/commands/AccountInfo\n */\nexport const setCurrentAccount = (payload: IAccount | null) => {\n    return ({ type: \"SET_CURRENT_ACCOUNT\", payload });\n}\n\n/**\n * Update current account.\n * @param payload account_id\n * @see api/commands/AccountInfo\n */\nexport const updateCurrentAccount = async (account_id: string) => {\n    const rq = await cli.execute(new AccountInfo(account_id, true, true, true))\n\n    const payload: IAccount = rq.data;\n\n    return ({ type: \"SET_CURRENT_ACCOUNT\", payload });\n}\n\n/**\n * Set background theme.\n * @param theme \n */\nexport const setBackgroundTheme = (theme: { id: string, url: string, label: string }) => {\n    return ({ type: \"SET_BACKGROUND_THEME\", payload: theme });\n}","import { useRef, useEffect } from 'react';\nimport { Client } from './client';\nimport { useSignal } from '../utils/hooks/general';\nimport config from '../config/config';\nimport { IAccount, IRoom } from 'types';\nimport { AccountInfo, RoomInfo } from './commands';\nimport { useStore, useDispatch } from 'store/hooks';\nimport { setCurrentAccount } from 'store/actions';\n\nconst HOST_URL = config.host_url;\nconst cli = new Client(HOST_URL);\n\nexport const useCommand = (command: any, ...args: any[]) => {\n    const ref = useRef(null as unknown as { status: number, data?: any, message?: string });\n    const signal = useSignal();\n\n    useEffect(() => {\n        ref.current = { status: 102 };\n        \n        const fn = async () => {\n            const _args = args || [];\n            \n            const rq = await cli.execute(new command(..._args))\n            ref.current = rq;\n            signal();\n        }\n        fn();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    \n    return ref.current;\n}\n\n/**\n * \n * @param command \n * @param args \n * @example\n * const dispatchCommand = useDispatchCommand();\n * ...\n * dispatchCommand(AccountCreate, \"mike.eling97@gmail.com\", \"ThisIsMyPassBro\")\n */\nexport const useDispatchCommand = () => {\n    const ref = useRef(null as unknown as (command: any, ...args: any[]) => Promise<{ status: number, data: any }>);\n    const signal = useSignal();\n    \n    if(ref.current === null) {\n        \n        const fn = async (command: any, ...args: any[]) => {\n            const _args = args || [];\n            \n            const rq = await cli.execute(new command(..._args))\n            signal();\n            return rq;\n        }\n        ref.current = (command: any, ...args: any[]) => fn(command, ...args);\n    }\n    \n    return ref.current;\n}\n\nexport const useAccount = (account_id?: string, updateStore: boolean = false, options?: { rooms?: boolean, flags?: boolean, contacts?: boolean }) => {\n    const currentAccount = useStore(state => state.currentAccount);\n    const ref = useRef<IAccount | null | undefined>(!account_id ? currentAccount ?? undefined : undefined);\n    const dispatchStore = useDispatch();\n    const dispatchCommand = useDispatchCommand();\n    const signal = useSignal();\n\n    useEffect(() => {\n        const fn = async () => {\n            const accountInfoRq = (await dispatchCommand(AccountInfo, account_id || currentAccount?.id, options?.flags, options?.rooms, options?.contacts ));\n    \n            if(accountInfoRq.status === 200) {\n                ref.current = accountInfoRq.data as IAccount | null;\n                if(updateStore) dispatchStore(setCurrentAccount(accountInfoRq.data));\n                signal();\n            }\n        }\n    \n        if(account_id || currentAccount?.id)\n            fn();\n            \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [account_id]);\n    \n    return ref.current ?? null;\n}\n\nexport const useRoom = (room_id: string, accounts?: boolean) => {\n    const ref = useRef<IRoom | null | undefined>();\n    const dispatchCommand = useDispatchCommand();\n    const signal = useSignal();\n\n    useEffect(() => {\n        const fn = async () => {\n            const roomInfoRq = (await dispatchCommand(RoomInfo, room_id, !!accounts));\n\n            if(roomInfoRq.status === 200) {\n                ref.current = roomInfoRq.data as IRoom | null;\n                signal();\n            }\n        }\n\n        if(room_id) fn();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [room_id]);\n    \n    return ref.current ?? null;\n}","\nexport const backgroundThemes = [\n    {\n        id: \"1103088\",\n        label: \"One color\",\n        url: \"https://source.unsplash.com/collection/1103088/\"\n    },\n    {\n        id: '1971015',\n        label: \"Simplicity\",\n        url: \"https://source.unsplash.com/collection/1971015/\"\n    },\n    {\n        id: '1426076',\n        label: \"Pastel & Sparkle\",\n        url: \"https://source.unsplash.com/collection/1426076/\"\n    },\n    {\n        id: \"1111575\",\n        label: \"Space\",\n        url: \"https://source.unsplash.com/collection/1111575/\"\n    },\n    {\n        id: \"1922729\",\n        label: \"From above\",\n        url: \"https://source.unsplash.com/collection/1922729/\"\n    },\n];","import React, { useEffect } from 'react';\nimport logo from \"assets/circles-logo.svg\";\nimport useStyles from \"./styles\";\nimport Flex from 'components/utils/Flex';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch } from 'store/hooks';\nimport { useStorage } from 'storage/hooks';\nimport { AccountInfo, AccountLogin, AccountChange } from 'api/commands';\nimport { setBackgroundTheme, setCurrentAccount } from 'store/actions';\nimport { useDispatchCommand } from 'api/hooks';\nimport firebase from \"firebase/app\"\nimport { useSnackbar } from \"notistack\";\nimport { backgroundThemes } from 'utils/backgroundThemes';\n\nconst Splash = () => {\n    const history = useHistory();\n    const state = history.location.state as { initialPath?: string };\n\n    const classes = useStyles();\n\n    const dispatch = useDispatch();\n    const dispatchCommand = useDispatchCommand();\n\n    const { enqueueSnackbar } = useSnackbar();\n\n    const accountIdToken = useStorage(storage => storage.accountIdToken);\n    \n    useEffect(() => {\n        if(!accountIdToken) {\n            history.push(\"/intro\");\n            return;\n        }\n        \n        const fn = async () => {\n            const accountLogin = await dispatchCommand(AccountLogin, accountIdToken);\n\n            const account_id = accountLogin?.data?.account_id;\n            if(account_id) {\n                const accountInfo = (await dispatchCommand(AccountInfo, account_id, true, true, true));\n                if(accountInfo.status === 200) {\n                    dispatch(setCurrentAccount(accountInfo.data));\n\n                    // Initialize bgTheme.\n                    const bgThemeId = localStorage.getItem('background-theme') || '1922729';\n                    const bgTheme = (backgroundThemes.find(bgT => bgT.id.toString() === bgThemeId.toString()) ?? backgroundThemes[0]) as { id: string, url: string, label: string };\n\n                    dispatch(setBackgroundTheme(bgTheme));\n\n                    if(accountInfo.data?.flags?.includes(\"needs_init\")) {\n                        // Navigate to welcome page.\n                        history.push(\"/welcome\")\n                    } else {\n                        // TODO: Find a better place for this!\n                        const messaging = firebase?.messaging();\n                        if(messaging && accountInfo.data) {\n                          messaging?.requestPermission()\n                            .then(async function() {\n                              const token = await messaging.getToken();\n                    \n                              if((!accountInfo.data?.tokens || !accountInfo.data?.tokens?.includes(token))) {\n                                \n                                  let newTokens = accountInfo.data?.tokens ?? [];\n                                  newTokens.push(token);\n                    \n                                  await dispatchCommand(AccountChange, accountInfo.data?.id, { tokens: newTokens })\n                              }\n                    \n                              console.log(token);\n                            })\n                            .catch(function(err) {\n                              console.log(\"Unable to get permission to notify.\", err);\n                            });\n                          navigator.serviceWorker.addEventListener(\"message\", (message) => {\n                            enqueueSnackbar(message?.data?.[\"firebase-messaging-msg-data\"]?.notification?.body);\n                            console.log(message);\n                          });\n                        }\n\n                        // Navigate to initial path or fallback to home.\n                        history.push(state?.initialPath ?? \"/home\")\n                    }\n                } else {\n                    history.push(\"/intro\")\n                }\n            } else {\n                history.push(\"/intro\")\n            }\n        }\n        fn();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return <Flex alignItems=\"center\" justifyContent=\"center\" width=\"100%\" height=\"100vh\" className={classes.root}>\n            <img src={logo} alt=\"logo\" className={classes.logo} />\n        </Flex>\n}\n\nexport default Splash;","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      \n    },\n    introViewRoot:{\n        maxWidth: theme.breakpoints.values.md,\n        margin: \"0 auto\",\n    },\n    introViewContentWrapper:{\n      maxWidth: \"60%\",\n      marginTop: \"5%\",\n    },\n  }));\n\n  export default useStyles;\n","// * Translations\nconst translations = (preset: any) => ({\n    title: {\n        en_US: \"Intro\",\n        pl_PL: \"Intro\",\n        de_DE: \"Intro\"\n    },\n    firstTitle: {\n        en_US: \"Welcome to safe chat!\",\n        pl_PL: \"Pierwszy Part\",\n        de_DE: \"Erstes Part\"\n    },\n\n    secondTitle: {\n        en_US: \"Available everywhere\",\n        pl_PL: \"Drugi Part\",\n        de_DE: \"Zweiten Part\"\n    },\n\n    thirdTitle: {\n        en_US: \"Reliable and Stable\",\n        pl_PL: \"Trzeci Part\",\n        de_DE: \"Dreien Part\"\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n    yes: preset.yes\n})\n\nexport default translations;","import React from \"react\";\nimport { Button, Typography, Icon, useTheme } from \"@material-ui/core\";\nimport Flex from \"components/utils/Flex\";\nimport useStyles from \"./styles\";\n\ntype IntroViewProps = {\n    partId: number;\n    activePart: number;\n    \n    title: string;\n    description: string;\n    image: any;\n    \n    onNext: () => void;\n    onPrev: () => void;\n}\n\nconst IntroView = (props: IntroViewProps) => {\n    const classes = useStyles();\n\n    // Prevent rendering if not active.\n    if(props.activePart !== props.partId) return null;\n\n    // TODO: Add translations.\n    const prevButtonText = props.partId === 0 ? \"Skip\" : \"Back\";\n    const nextButtonText = props.partId === 2 ? \"Continue\" : \"Next\";\n\n    return <div className={classes.introViewRoot} style={{height: \"100vh\"}}>\n        <Flex flexDirection=\"column\" alignItems=\"center\" justifyContent=\"space-between\">\n            <Flex flexDirection=\"column\" height=\"90vh\" alignItems=\"center\" justifyContent=\"center\">\n                {/* Image */}\n                <Flex alignItems=\"center\" justifyContent=\"center\">\n                    <img src={props.image} alt={props.title} style={{maxWidth: \"300px\", height: \"auto\"}} />\n                </Flex>\n\n                {/* Content */}\n                <Flex className={classes.introViewContentWrapper} alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\n                    <Typography variant=\"h2\">{props.title}</Typography>\n                    <Typography align=\"center\" paragraph >{props.description}</Typography>\n                </Flex>\n            </Flex>\n\n            {/* Actions */}\n            <Flex justifyContent=\"space-evenly\" height=\"10vh\" alignItems=\"center\" width=\"60%\">\n                <Button onClick={props.onPrev}>{prevButtonText}</Button>\n                <ProgressIcons activePart={props.activePart} />\n                <Button variant=\"contained\" color=\"primary\" onClick={props.onNext}>{nextButtonText}</Button>\n            </Flex>\n        </Flex>\n        \n        \n        \n        </div>\n}\n\nconst ProgressIcons = ({activePart} : {activePart: number}) => {\n    \n    return  <Flex justifyContent=\"center\" alignItems=\"center\">\n                <ProgressIcon active={activePart >= 0} />\n                <ProgressIcon active={activePart >= 1} />\n                <ProgressIcon active={activePart >= 2} />\n            </Flex>\n}\n\nconst ProgressIcon = ({active}: {active: boolean}) => {\n    const theme = useTheme();\n\n    return <Icon style={{ opacity: active ? 1 : 0.15, fontSize: \"14px\", color: active ? theme.palette.primary.main : \"#000\" }}>lens</Icon>;\n}\n\nexport default IntroView;\n","export default __webpack_public_path__ + \"static/media/intro00.6588dfdc.svg\";","export default __webpack_public_path__ + \"static/media/intro01.1025310d.svg\";","export default __webpack_public_path__ + \"static/media/intro02.819f31a9.svg\";","import React, { useState, useCallback } from \"react\";\nimport { useLittera } from \"react-littera\";\nimport useStyles from \"./styles\"\nimport translations from \"./trans\"\nimport IntroView from \"./IntroView\";\n\nimport intro00 from \"assets/intro00.svg\";\nimport intro01 from \"assets/intro01.svg\";\nimport intro02 from \"assets/intro02.svg\";\n\nimport { useHistory } from \"react-router-dom\";\n\n/**\n * Home page component.\n */\nconst Intro = () => {\n    // history.push(\"/path\");\n    const history = useHistory();\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n\n    // Controls the active part.\n    const [activePart, setActivePart] = useState<number>(0);\n    \n\n    const handleNext = useCallback(() => {\n        // To get the correct result, I'm looking up activePart (ap) passed to setActivePart method instead of using the in scope state variable.\n        setActivePart(ap => { \n\n            // Handle end of intro by navigating to login screen.\n            if(ap === 2) {\n                history.push(\"/login\");\n                // ? Changing value here after navigating might result in a memory leak as the Intro component is then unmounted. Move outside setActivePart and use \"activePart\" variable instead of \"ap\" to prevent state change.\n                return ap;\n            }\n\n            // Increment activePart.\n            return ap+1;\n        });\n    }, [setActivePart, history]);\n\n    const handlePrev = useCallback(() => {\n        setActivePart(ap => {\n\n            if(ap === 0) {\n                history.push(\"/login\");\n                return ap;\n            }\n\n            return ap-1;\n        });\n    }, [setActivePart, history]);\n\n    return <div className={classes.root}>\n        <IntroView activePart={activePart} partId={0} onNext={handleNext} onPrev={handlePrev} image={intro00} title={translated.firstTitle} description=\"Sunt labore do deserunt consectetur fugiat. Eu dolor laborum elit non id amet Lorem aliqua velit. Elit in cillum elit magna incididunt esse.\" />\n        <IntroView activePart={activePart} partId={1} onNext={handleNext} onPrev={handlePrev} image={intro01} title={translated.secondTitle} description=\"Sunt labore do deserunt consectetur fugiat. Eu dolor laborum elit non id amet Lorem aliqua velit. Elit in cillum elit magna incididunt esse.\" />\n        <IntroView activePart={activePart} partId={2} onNext={handleNext} onPrev={handlePrev} image={intro02} title={translated.thirdTitle} description=\"Sunt labore do deserunt consectetur fugiat. Eu dolor laborum elit non id amet Lorem aliqua velit. Elit in cillum elit magna incididunt esse.\" />\n    </div>\n}\n\nexport default Intro;","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      minHeight: \"calc(100vh - (300px + 42px))\",\n      alignItems: \"center\",\n      //paddingTop: \"60px\"\n      [theme.breakpoints.up(\"sm\")]: {\n        minHeight: \"calc(100vh - (350px + 42px))\",\n        alignItems: \"flex-start\"\n      },\n    },\n    container: {\n      maxWidth: theme.breakpoints.values.md,\n      width: \"100%\",\n      padding: `0 ${theme.spacing(4)}px`,\n    },\n    inputWrapper: {\n\n    },\n    loginImage : {\n      width: \"auto\",\n      height: \"240px\",\n      position: \"absolute\",\n      right: \"2%\",\n      bottom: \"0px\",\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"310px\",\n        bottom: \"5px\"\n      },\n    },\n    imgContainer : {\n      height: \"300px\",\n      position: \"relative\",\n      overflow: \"hidden\",\n      background: `linear-gradient(to top left, ${theme.palette.primary.dark}, ${theme.palette.primary.main})`,\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"350px\"\n      },\n    },\n    wave: {\n      position: \"absolute\",\n      zIndex: 5,\n      bottom: \"-10%\",\n      left: \"-1%\",\n      width: \"102%\",\n      height: \"auto\"\n    },\n    footerWrapper: {\n      maxWidth: theme.breakpoints.values.md,\n      margin: \"0 auto\",\n      padding: `0 ${theme.spacing(4)}px`,\n    }\n    \n  }));\n\n  export default useStyles;\n","// * Translations\nconst translations = (preset: any) => ({\n    title: {\n        en_US: \"Sign in\",\n        pl_PL: \"Bd w kontakcie!\",\n        de_DE: \"Stayen ins Touchejen\"\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n    yes: preset.yes\n})\n\nexport default translations;","export default __webpack_public_path__ + \"static/media/verifed.465bf5bf.svg\";","export default __webpack_public_path__ + \"static/media/wave.f70c3bfc.svg\";","import * as firebase from 'firebase/app';\n \nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/messaging';\n\nconst firebaseApp = firebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_APIKEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASEURL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\n  appId: process.env.REACT_APP_FIREBASE_APPID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENTID,\n});\n\nconst database = firebaseApp.database();\nconst auth = firebaseApp.auth();\nconst messaging = firebaseApp.messaging();\n\nmessaging.usePublicVapidKey(\"BFpEHR0UHDMxqVkWLbe884ukhegFUVl-SPUGpDaG2PG9BaQMr5BmNeq3BAyzMfqMD-kiJV-dwQKEDcubgNMRozw\");\n\nexport { messaging, database, auth, firebaseApp as app };","import * as firebase from \"firebase/app\";\nimport { messaging } from \"config/firebase\";\nimport { setLocalStorageValue } from \"storage/storage\";\n\nexport const signInWithPopup = async () => {\n    return new Promise((resolve, reject) => {\n        var provider = new firebase.auth.GoogleAuthProvider();\n        provider.addScope('https://www.googleapis.com/auth/contacts.readonly');\n        \n       firebase.auth().signInWithPopup(provider).then(function(result) {\n            fetchAccountIdToken();\n            resolve(result);\n          }).catch(function(error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\" Authorization =>\", errorCode, errorMessage);\n            reject(error);\n            // ...\n          });\n          \n    });\n}\n\nexport const signInWithCredentials = async (email: string, password: string) => {\n    return new Promise((resolve, reject) => {\n       firebase.auth().signInWithEmailAndPassword(email, password)\n            .then((result) => {\n                fetchAccountIdToken();\n                resolve(result);\n            })\n            .catch((error) => {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                console.log(\" Authorization =>\", errorCode, errorMessage);\n                reject(error);\n                // ...\n            });\n    });\n}\n\nexport const fetchAccountIdToken = () => {\n    const currentUser = firebase.auth()?.currentUser ?? null;\n\n    if(currentUser)\n        currentUser.getIdToken(/* forceRefresh */ true).then(function(idToken) {\n            console.log(idToken);\n            setLocalStorageValue(\"accountIdToken\", idToken);\n        }).catch(function(error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\" Authorization =>\", errorCode, errorMessage);\n        });\n}\n\nexport const signUpWithCredentials = async (email: string, password: string) => {\n    return new Promise((resolve, reject) => {\n       firebase.auth().createUserWithEmailAndPassword(email, password)\n            .then((result) => {\n                resolve(result);\n            })\n            .catch((error) => {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                console.log(\" Authorization =>\", errorCode, errorMessage);\n                reject(error);\n                // ...\n            });\n    });\n}\n\nexport const signOut = async () => {\n    return new Promise((resolve, reject) => {\n       firebase.auth().signOut()\n            .then((result) => {\n                resolve(result);\n            })\n            .catch((error) => {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                console.log(\" Authorization =>\", errorCode, errorMessage);\n                reject(error);\n                // ...\n            });\n    });\n}\n\nexport const getCurrentUserIdToken = async () => {\n    return new Promise<string>((resolve, reject) => {\n        firebase.auth()?.currentUser?.getIdToken(true).then(function(idToken) {\n            resolve(idToken);\n          }).catch(function(error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\" User Id Token =>\", errorCode, errorMessage);\n            reject(error);\n          });\n    });\n}\n\n// TODO: Implement!\nexport const getDeviceToken = async () => {\n    return new Promise<string>((resolve, reject) => {\n        // Get Instance ID token. Initially this makes a network call, once retrieved\n        // subsequent calls to getToken will return from cache.\n        messaging.getToken().then((currentToken) => {\n            if (currentToken) {\n                resolve(currentToken)\n            } else {\n                console.log(\" Device Token =>\", \"No Instance ID token available. Request permission to generate one.\");\n                reject(new Error(\"No Instance ID token available. Request permission to generate one.\"));\n            }\n        }).catch((error) => {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\" Device Token =>\", errorCode, errorMessage);\n            reject(error);\n        });\n  \n    });\n}\n\n// export function getAccessToken() {\n//     return new Promise(function(resolve, reject) {\n//       const key = require('../placeholders/service-account.json');\n//       const jwtClient = new google.auth.JWT(\n//         key.client_email,\n//         null,\n//         key.private_key,\n//         SCOPES,\n//         null\n//       );\n//       jwtClient.authorize(function(err, tokens) {\n//         if (err) {\n//           reject(err);\n//           return;\n//         }\n//         resolve(tokens.access_token);\n//       });\n//     });\n//   }","import React, { useState } from 'react';\nimport { useLittera } from \"react-littera\";\nimport useStyles from \"./styles\"\nimport translations from \"./trans\"\nimport { Button, TextField, Typography, Fab, Icon, CircularProgress, Backdrop } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport Flex from \"components/utils/Flex\";\nimport loginImage from \"assets/verifed.svg\";\nimport waveAsset from \"assets/wave.svg\";\nimport { signInWithCredentials, signInWithPopup } from \"api/auth\";\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport { useDispatchCommand } from \"api/hooks\";\nimport { AccountInfo } from \"api/commands\";\nimport { useDispatch } from \"store/hooks\";\nimport { setCurrentAccount } from \"store/actions\";\nimport { useRestrictedPageForCurrentAccount } from 'utils/hooks/general';\n\n// TODO: Translations...?\n\n/**\n * Login page component.\n */\nconst Login = () => {\n    const history = useHistory();\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n    const dispatchCommand = useDispatchCommand();\n    const dispatchStore = useDispatch();\n\n    const [emailInput, setEmailInput] = useState(\"\");\n    const [passwordInput, setPasswordInput] = useState(\"\");\n    const [errorMsg, setErrorMsg] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false)\n\n    useRestrictedPageForCurrentAccount();\n\n    const handleLogin = async (result: any) => {\n        const account = await dispatchCommand(AccountInfo, result?.user?.uid || \"\", true);\n\n        if (account.status === 200) {\n            //const accountIdToken = await getCurrentUserIdToken();\n\n            // ! Remember account id token.\n            //storageSetter(\"accountIdToken\", accountIdToken ?? \"\");\n            dispatchStore(setCurrentAccount(account.data));\n\n            if (account.data?.flags?.includes(\"needs_init\"))\n            {\n                history.push(\"/welcome\");\n            } else {\n                // TODO: Save device_token.\n                // const device_token = await getDeviceToken();\n                history.push(\"/home\");\n\n            }\n        } else if(account.status === 404) {\n            // TODO: Account not found! What shall be done then?\n            setErrorMsg(\"Account not found!\");\n        }\n        if(account.status !== 0) setIsLoading(false);\n    }\n\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        setErrorMsg(\"\");\n        setIsLoading(true)\n\n        if (!isLoading) {\n            const email = emailInput;\n            const password = passwordInput;\n            signInWithCredentials(email, password).then(handleLogin).catch(err => {\n                setErrorMsg(err.message);\n                setIsLoading(false);\n            });\n        }\n    }\n\n    const handlePopupLogin = () => {\n        setErrorMsg(\"\");\n        setIsLoading(true);\n        signInWithPopup()\n            .then(handleLogin)\n            .catch((error) => {\n                setErrorMsg(error.message);\n                setIsLoading(false);\n            });\n\n    }\n\n    const handleInputChange = (inputName: string) => (event: React.FormEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        // @ts-ignore\n        const newValue = event?.target?.value ?? \"\";\n\n        if (!isLoading) {\n            if (inputName === \"email\") setEmailInput(newValue);\n            if (inputName === \"password\") setPasswordInput(newValue);\n        }\n    }\n    \n    const handleBack = () => {\n        history.push(\"/signup\");\n    }\n\n    return <div style={{ width: \"100%\" }}>\n\n        <div className={classes.imgContainer}>\n            <img className={classes.loginImage} src={loginImage} alt=\"loginImage\" />\n            <img className={classes.wave} src={waveAsset} alt=\"\" />\n        </div>\n\n\n        <Flex justifyContent=\"center\" width=\"100%\" className={classes.root}>\n            <div className={classes.container}>\n                <Typography variant=\"h3\" paragraph>\n                    {translated.title}\n                </Typography>\n                <form onSubmit={handleSubmit}>\n                    <Flex className={classes.inputWrapper} flexDirection=\"column\">\n                        <TextField style={{ marginBottom: \"15px\" }} id=\"email-input\" value={emailInput} onChange={handleInputChange(\"email\")} type=\"email\" label=\"E-Mail\" variant=\"outlined\" />\n                        <TextField style={{ marginBottom: \"15px\" }} id=\"password-input\" value={passwordInput} onChange={handleInputChange(\"password\")} type=\"password\" label=\"Password\" variant=\"outlined\" />\n                    </Flex>\n\n                    {errorMsg && <Alert style={{ margin: \"10px 0\" }} severity=\"error\">\n                        <AlertTitle>Upps...</AlertTitle>\n                        {errorMsg}\n                    </Alert>}\n\n                    <Flex justifyContent=\"space-between\">\n                        <Button onClick={handleBack} color=\"primary\" type=\"button\">Sign Up</Button>\n                        <Fab color=\"primary\" aria-label=\"add\" type=\"submit\">\n                            <Icon style={{ color: \"white\" }}>keyboard_arrow_right</Icon>\n                        </Fab>\n                    </Flex>\n\n                </form>\n                <Button onClick={handlePopupLogin} type=\"button\">Login with Google!</Button>\n            </div>\n        </Flex>\n        <Flex className={classes.footerWrapper} alignItems=\"center\" justifyContent=\"flex-end\" height=\"42px\">\n            <Typography align=\"right\">Forgot password?</Typography>\n        </Flex>\n\n        {!isLoading ? null :\n            <Backdrop open={true} style={{zIndex:5}}>\n                <CircularProgress color=\"primary\" />\n            </Backdrop>}\n\n    </div>\n}\n\n\n\nexport default Login;","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      minHeight: \"calc(100vh - (300px + 42px))\",\n      alignItems: \"center\",\n      //paddingTop: \"60px\"\n      [theme.breakpoints.up(\"sm\")]: {\n        minHeight: \"calc(100vh - (350px + 42px))\",\n        alignItems: \"flex-start\"\n      },\n    },\n    container: {\n      maxWidth: theme.breakpoints.values.md,\n      width: \"100%\",\n      padding: `0 ${theme.spacing(4)}px`,\n    },\n    inputWrapper: {\n\n    },\n    signImage : {\n      width: \"auto\",\n      height: \"240px\",\n      position: \"absolute\",\n      right: \"2%\",\n      bottom: \"0px\",\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"310px\",\n        bottom: \"5px\"\n      },\n    },\n    imgContainer : {\n      height: \"300px\",\n      position: \"relative\",\n      overflow: \"hidden\",\n      background: `linear-gradient(to top left, ${theme.palette.primary.dark}, ${theme.palette.primary.main})`,\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"350px\"\n      },\n    },\n    wave: {\n      position: \"absolute\",\n      zIndex: 5,\n      bottom: \"-10%\",\n      left: \"-1%\",\n      width: \"102%\",\n      height: \"auto\"\n    },\n    footerWrapper: {\n      maxWidth: theme.breakpoints.values.md,\n      margin: \"0 auto\",\n      padding: `0 ${theme.spacing(4)}px`,\n    }\n    \n  }));\n\n  export default useStyles;\n","// * Translations\nconst translations = (preset: any) => ({\n    title: {\n        en_US: \"Sign up\",\n        pl_PL: \"Bd w kontakcie!\",\n        de_DE: \"Stayen ins Touchejen\"\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n    yes: preset.yes\n})\n\nexport default translations;","export default __webpack_public_path__ + \"static/media/celebration.9e01a526.svg\";","import React, { useState } from \"react\";\nimport { useLittera } from \"react-littera\";\nimport useStyles from \"./styles\"\nimport translations from \"./trans\"\nimport { Button, TextField, Typography, Fab, Icon, Backdrop, CircularProgress } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport Flex from \"components/utils/Flex\";\nimport signImage from \"assets/celebration.svg\";\nimport waveAsset from \"assets/wave.svg\";\nimport { signUpWithCredentials } from \"api/auth\";\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport { useStorageSetter } from \"storage/hooks\";\nimport { useRestrictedPageForCurrentAccount } from \"utils/hooks/general\";\n\n// TODO: Translations...?\n\n/**\n * Login page component.\n */\nconst Signup = () => {\n    const history = useHistory();\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n\n    const storageSetter = useStorageSetter();\n\n    const [emailInput, setEmailInput] = useState(\"\");\n    const [passwordInput, setPasswordInput] = useState(\"\");\n    const [confirmPasswordInput, setConfirmPasswordInput] = useState(\"\");\n    const [errorMsg, setErrorMsg] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false)\n    useRestrictedPageForCurrentAccount();\n\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        setErrorMsg(\"\");\n        setIsLoading(true)\n\n        if (!isLoading) {\n            const email = emailInput;\n            const password = passwordInput;\n            const confirmPassword = confirmPasswordInput;\n\n            if (confirmPassword !== password) {\n                setErrorMsg(\"Passwords are not identical.\");\n                setIsLoading(false);\n                return;\n            }\n\n            if (password.length < 13) {\n                setErrorMsg(\"Password is too short.\");\n                setIsLoading(false);\n                return;\n            }\n\n            signUpWithCredentials(email, password).then(async (result: any) => {\n                console.log(\"Result =>\", result);\n\n                /*const acc = await dispatchCommand(AccountCreate, { email: emailInput, password: passwordInput });\n                console.log(\"Account Data =>\", acc);\n                if(acc.status === 200) {\n                    storageSetter(\"currentAccountId\", acc.data.account_id);\n                    \n                    console.log(\"All success! Fuck yea!\");\n                    history.push(\"/welcome\");\n                } else if(acc.status === 404) {\n                    // TODO: Account not found!\n                    setErrorMsg(\"Account not found!\");\n                }*/\n                result?.user?.uid && storageSetter(\"accountIdToken\", result.user.uid)\n\n                history.push(\"/welcome\");\n\n            }).catch(err => {\n                setErrorMsg(err.message);\n                setIsLoading(false);\n            });\n        }\n    }\n\n    const handleInputChange = (inputName: string) => (event: React.FormEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        // @ts-ignore\n        const newValue = event?.target?.value ?? \"\";\n        if (!isLoading) {\n            if (inputName === \"email\") setEmailInput(newValue);\n            if (inputName === \"password\") setPasswordInput(newValue);\n            if (inputName === \"password-confirm\") setConfirmPasswordInput(newValue);\n        }\n\n    }\n\n    const handleBack = () => {\n        history.push(\"/login\");\n    }\n\n    return <div style={{ width: \"100%\" }}>\n\n        <div className={classes.imgContainer}>\n            <img className={classes.signImage} src={signImage} alt=\"signImage\" />\n            <img className={classes.wave} src={waveAsset} alt=\"\" />\n        </div>\n\n\n        <Flex justifyContent=\"center\" width=\"100%\" className={classes.root}>\n            <div className={classes.container}>\n                <Typography variant=\"h3\" paragraph>\n                    {translated.title}\n                </Typography>\n                <form onSubmit={handleSubmit}>\n                    <Flex className={classes.inputWrapper} flexDirection=\"column\">\n                        <TextField style={{ marginBottom: \"15px\" }} id=\"email-input\" value={emailInput} onChange={handleInputChange(\"email\")} type=\"email\" label=\"E-mail\" variant=\"outlined\" />\n                        <TextField style={{ marginBottom: \"15px\" }} id=\"password-input\" value={passwordInput} onChange={handleInputChange(\"password\")} type=\"password\" label=\"Password\" variant=\"outlined\" />\n                        <TextField style={{ marginBottom: \"15px\" }} id=\"confirm-password-input\" value={confirmPasswordInput} onChange={handleInputChange(\"password-confirm\")} type=\"password\" label=\"Confirm password\" variant=\"outlined\" />\n                    </Flex>\n\n                    {errorMsg && <Alert style={{ margin: \"10px 0\" }} severity=\"error\">\n                        <AlertTitle>Upps...</AlertTitle>\n                        {errorMsg}\n                    </Alert>}\n\n                    <Flex justifyContent=\"space-between\">\n                        <Button onClick={handleBack} color=\"primary\" type=\"button\">Login</Button>\n                        <Fab color=\"primary\" aria-label=\"add\" type=\"submit\">\n                            <Icon style={{ color: \"white\" }}>keyboard_arrow_right</Icon>\n                        </Fab>\n                    </Flex>\n\n                </form>\n            </div>\n        </Flex>\n        <Flex className={classes.footerWrapper} alignItems=\"center\" justifyContent=\"flex-end\" height=\"42px\">\n            <Typography align=\"right\"></Typography>\n        </Flex>\n        {!isLoading ? null :\n            <Backdrop open={true} style={{ zIndex: 5 }}>\n                <CircularProgress color=\"primary\" />\n            </Backdrop>}\n\n    </div>\n}\n\nexport default Signup;","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      position: \"relative\",\n      maxWidth: theme.breakpoints.values.md,\n      margin: \"0 auto\",\n      padding: `0 ${theme.spacing(4)}`      \n\n    },\n    inputWrapper: {\n\n    },\n    wave: {\n      position: \"absolute\",\n      zIndex: 5,\n      bottom: \"-10%\",\n      left: \"-1%\",\n      width: \"102%\",\n      height: \"auto\"\n    },\n\n    personalImage : {\n      width: \"auto\",\n      height: \"240px\",\n      position: \"absolute\",\n      right: \"2%\",\n      bottom: \"0px\",\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"310px\",\n        bottom: \"5px\"\n      },\n    },\n\n    imgContainer: {\n      height: \"300px\",\n      position: \"relative\",\n      overflow: \"hidden\",\n      background: `linear-gradient(to top left, ${theme.palette.primary.dark}, ${theme.palette.primary.main})`,\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"350px\"\n      },\n    },\n    welcomeTitle: {\n      color: theme.palette.primary.main\n    }\n\n  }));\n\n  export default useStyles;\n","// * Translations\nconst translations = (preset: any) => ({\n    title: {\n        en_US: \"Welcome,\",\n        pl_PL: \"Witamy\",\n        de_DE: \"Willkommen\"\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n    yes: preset.yes\n})\n\nexport default translations;","export default __webpack_public_path__ + \"static/media/personal.ebfa5829.svg\";","import React, { useState } from \"react\";\nimport { useLittera } from \"react-littera\";\nimport useStyles from \"./styles\"\nimport translations from \"./trans\"\nimport { Typography } from \"@material-ui/core\";\nimport { useStore, useDispatch } from \"store/hooks\";\nimport { TextField } from '@material-ui/core';\nimport Flex from \"components/utils/Flex\";\nimport Button from '@material-ui/core/Button';\nimport waveAsset from \"assets/wave.svg\";\nimport personalInformationImage from \"assets/personal.svg\";\nimport { useDispatchCommand } from \"api/hooks\";\nimport { AccountChange, AccountInfo } from \"api/commands\";\nimport { setCurrentAccount } from \"store/actions\";\nimport { useHistory } from \"react-router-dom\";\n\ntype EditableField = \"label\" | \"first_name\" | \"middle_name\" | \"last_name\" | \"birthday\" | \"sex\";\n\n/**\n * Welcome page component.\n */\nconst Welcome = () => {\n    const history = useHistory();\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n\n    const dispatchStore = useDispatch();\n    const dispatchCommand = useDispatchCommand();\n    const currentAccount = useStore(state => state.currentAccount);\n\n    const [labelField, setLabelField] = useState(currentAccount?.label ?? \"\");\n    const [firstNameField, setFirstNameField] = useState(currentAccount?.details?.first_name ?? \"\");\n    const [middleNameField, setMiddleNameField] = useState(currentAccount?.details?.middle_name ?? \"\");\n    const [lastNameField, setLastNameField] = useState(currentAccount?.details?.last_name ?? \"\");\n    const [dateOfBirth, setDateOfBirth] = useState(currentAccount?.details?.birthdate ?? new Date());\n    const [sex, setSex] = useState(currentAccount?.details?.sex ?? \"O\");\n\n\n    const handleChange = (event: any) => {\n        const field = (event?.target?.id ?? \"\") as EditableField;\n        const value = event?.target?.value ?? \"\";\n\n        switch (field) {\n            case \"label\":\n                setLabelField(value)\n                break;\n            case \"first_name\":\n                setFirstNameField(value)\n                break;\n            case \"middle_name\":\n                setMiddleNameField(value)\n                break;\n            case \"last_name\":\n                setLastNameField(value)\n                break;\n            case \"birthday\":\n                setDateOfBirth(value)\n                break;\n            case \"sex\":\n                setSex(value)\n                break;\n            // ...\n        }\n    }\n\n    const handleSubmit = async () => {\n\n        if (labelField && firstNameField && middleNameField && lastNameField && dateOfBirth && sex) {\n            const changeRq = await dispatchCommand(AccountChange, currentAccount?.id || \"\", JSON.parse(JSON.stringify({ label: labelField, details: {  first_name: firstNameField, middle_name: middleNameField, last_name: lastNameField, birthdate: dateOfBirth.toString(), sex: sex } })));\n\n            if (changeRq.status === 204) {\n                const account = await dispatchCommand(AccountInfo, currentAccount?.id || \"\", true);\n\n                if (account.status === 200) {\n                    dispatchStore(setCurrentAccount(account.data));\n                }\n\n                history.push(\"/home\");\n            }\n        } else {\n            // TODO: Error message and Alert component!\n            alert(\"Implement error handling!\");\n        }\n    }\n\n    return <div>\n        <div className={classes.imgContainer}>\n            <img className={classes.personalImage} src={personalInformationImage} alt=\"PersonalInformation\" />\n            <img className={classes.wave} src={waveAsset} alt=\"wave\" />\n        </div>\n        <div className={classes.root}>\n\n            <Typography className={classes.welcomeTitle} variant=\"h2\">{translated.title} {currentAccount?.label}</Typography>\n\n            <Typography style={{ opacity: \"0.7\", marginBottom: \"35px\" }} paragraph>Here you need to provide us with some data about you. Name, Surname etc.</Typography>\n\n            <Typography style={{ paddingBottom: \"16px\" }} variant=\"h4\">Personal information</Typography>\n            <Flex flexDirection=\"column\" className={classes.inputWrapper}>\n                <TextField style={{ marginBottom: \"15px\" }} id=\"label\" label=\"Label\" variant=\"outlined\" value={labelField} onChange={handleChange} />\n                <TextField style={{ marginBottom: \"15px\" }} id=\"first_name\" label=\"First Name\" variant=\"outlined\" value={firstNameField} onChange={handleChange} />\n                <TextField style={{ marginBottom: \"15px\" }} id=\"middle_name\" label=\"Middle Name\" helperText=\"Optional\" variant=\"outlined\" value={middleNameField} onChange={handleChange} />\n                <TextField style={{ marginBottom: \"15px\" }} id=\"last_name\" label=\"Last Name\" variant=\"outlined\" value={lastNameField} onChange={handleChange} />\n                <TextField id=\"birthday\" label=\"Birthday\" type=\"date\" defaultValue=\"1990-01-01\" InputLabelProps={{ shrink: true, }} value={dateOfBirth} onChange={handleChange}/>\n            </Flex>\n\n            <Button style={{ color: \"white\", float: \"right\", marginBottom: \"15px\" }} variant=\"contained\" color=\"primary\" onClick={handleSubmit}>Save</Button>\n\n        </div>\n\n    </div>\n}\n\nexport default Welcome;","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n\n    },\n}));\n\nexport default useStyles;","export function validURL(str: string) {\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n      '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n    return !!pattern.test(str);\n}\n\nexport function ensureArray(arr: any) {\n  if (Array.isArray(arr)) return arr;\n\n  return [];\n}\n\nexport function makeInitials(first_name: string | undefined, last_name: string | undefined, fallback: string) {\n  if (first_name && last_name)\n    return (`${first_name[0]}${last_name[0]}`).toUpperCase();\n\n  return fallback[0].toUpperCase();\n}\n\nexport function makeFullName(first_name: string | undefined, last_name: string | undefined, fallback: string) {\n  if (first_name && last_name)\n    return (`${capitalizeFirstLetter(first_name)} ${capitalizeFirstLetter(last_name)}`);\n\n  return fallback;\n}\n\nexport const capitalizeFirstLetter = (value: string) => `${value[0].toUpperCase()}${value.substring(1, value.length).toLowerCase()}`","import React, { useEffect } from \"react\";\nimport useStyles from \"./styles\";\nimport { useCommand } from \"api/hooks\";\nimport { AccountList } from \"api/commands\";\nimport { useForkedState } from \"utils/hooks/general\";\nimport { isLoaded } from \"api/utils\";\nimport { IAccount } from \"types\";\nimport { CircularProgress, Avatar, Typography, Icon } from \"@material-ui/core\";\nimport { useStore } from \"store/hooks\";\nimport Flex from \"components/utils/Flex\";\nimport { makeFullName, makeInitials } from \"utils/general\";\n\ntype AccountPickerProps = {\n    onChange: React.Dispatch<React.SetStateAction<string[]>> | React.Dispatch<React.SetStateAction<string>>;\n    value: string | string[]\n    multiple?: boolean;\n    style?: any;\n    disabled?: boolean;\n}\n\n/**\n * \n * describe this function...\n */\nconst AccountPicker = (props: AccountPickerProps) => {\n    const classes = useStyles();\n\n    const currentAccount = useStore(state => state.currentAccount);\n\n    const accountsRq = useCommand(AccountList, currentAccount?.friends?.map(friend => friend.account_id));\n    const [accounts] = useForkedState(rq => isLoaded(rq) ? rq.data : null, accountsRq)\n\n    useEffect(() => {\n        // @ts-ignore\n        props.onChange((prevValue: any) => ([]));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleChange = (account_id: string) => {\n        if(props.disabled) return;\n\n        // TODO: Ugly code, refactor that!!\n        // @ts-ignore\n        props.onChange((value: any) => {\n            if(props.multiple && Array.isArray(value)) {\n                let arr = [...value];\n\n                if(arr.includes(account_id)) arr.splice(value.indexOf(account_id), 1);\n                else arr.push(account_id);\n    \n                return [...arr];\n            } else {\n                return value === account_id ? \"\" : account_id;\n            }\n        });\n    }\n\n    if(!accounts) return <Flex width=\"100%\" height=\"60px\" alignItems=\"center\" justifyContent=\"center\"><CircularProgress /></Flex>\n\n    return <div className={classes.root} style={props.style}>\n        {\n            accounts.map((account: IAccount) =>\n                <SingleAccount key={account.id} account={account} onClick={(account_id) => handleChange(account_id)} selected={props.value.includes(account.id)} /> )\n        }\n    </div>\n}\n\n/**\n * \n * Describe this function...\n */\nconst SingleAccount = ({ account, onClick, selected }: { account: IAccount, onClick: (account_id: string) => void, selected: boolean }) => {\n\n    const handleClick = () => {\n        onClick(account.id);\n    }\n\n    const accountFullName = makeFullName(account.details?.first_name, account.details?.last_name, account.label)\n    const accountInitials = makeInitials(account.details?.first_name, account.details?.last_name, account.label)\n\n    return <Flex style={{paddingTop: \"12px\", cursor: \"pointer\"}} onClick={handleClick} justifyContent=\"flex-start\" alignItems=\"center\">\n            <Avatar \n            style={{ width: \"54px\", height: \"54px\", backgroundColor: selected ? \"green\" : undefined }}\n            alt={accountFullName}  \n                src={selected ? undefined : account.avatar_url }>\n            {selected ? <Icon>check</Icon> : accountInitials}\n                </Avatar>\n\n            <div style={{margin: \"0 0 0 20px\"}}>\n            <Typography style={{ margin: \"0\" }} variant=\"h6\">{accountFullName}</Typography>\n            <Typography style={{ margin: \"0\", opacity: \".6\" }}>{account.contact?.email}</Typography>\n            </div>\n        </Flex>\n}\n\nexport default AccountPicker;","// * Translations\nconst translations = (preset: any) => ({\n    conversation: {\n        en_US: \"New conversation\",\n        pl_PL: \"Nowa rozmowa\",\n        de_DE: \"Hallo!\",\n    },\n    createRoom: {\n        en_US: \"Create room\",\n        pl_PL: \"Stwrz pokj!\",\n        de_DE: \"Hallo!\",\n    },\n    invite: {\n        en_US: \"Invite Friends\",\n        pl_PL: \"Zapro znajomych\",\n        de_DE: \"Hallo!\",\n    },\n    select: {\n        en_US: \"Select a Friend\",\n        pl_PL: \"Wybierz znajomych\",\n        de_DE: \"Hallo!\",\n    },\n    selected: {\n        en_US: \"Selected\",\n        pl_PL: \"Wybrano\",\n        de_DE: \"Hallo!\",\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n    yes: preset.yes\n})\n\nexport default translations;","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n    },\n    topMenu: {\n        display: \"flex\",\n    },\n    listWrapper: {\n        position: \"relative\",\n        overflowY: \"scroll\",\n        width: \"100%\",\n        height: \"calc(100% - 100px)\",\n    },\n    roomWrapper: {\n        position: \"relative\",\n        margin: \"auto 10px auto 0\",\n        width: \"385px\",\n        backgroundColor: \"#fff\",\n        boxShadow: \"7px 11px 15px rgba(0, 0, 0, .25)\",\n        borderRadius: \"20px\",\n        height: \"80vh\",\n        overflow: \"hidden\",\n        minWidth: \"296px\",\n\n    },\n    roomsButton: {\n        display: \"block\",\n        width: \"100%\",\n        height: \"100px\",\n        backgroundColor: \"#fff\",\n        borderRadiusBottom: \"1px solid #eee\",\n        borderRadius: \"0px\",\n    },\n    roomItemWrapper: {\n        overflow: \"hidden\",\n        width: \"100%\",\n        padding: \"30px 24px\",\n        textAlign: \"left\",\n        backgroundColor: \"#fff\",\n        cursor: \"pointer\",\n        transition: \"backgroundColor 255ms ease\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        \"&:hover\": {\n            backgroundColor: \"#f5f5f5\",\n        }\n    },\n    avatarPlaceholder: {\n        height: \"42px\",\n        width: \"42px\",\n        borderRadius: \"42px\",\n        backgroundColor: \"#9C6\",\n        marginRight: \"20px\"\n    },\n    lastMessageTypography: { fontSize: \"14px\", opacity: 0.45, textOverflow: \"ellipsis\", overflow: \"hidden\", whiteSpace: \"nowrap\" }\n  }));\n\n  export default useStyles;\n","import React from 'react'\nimport { Button, Dialog, DialogTitle, DialogContent, DialogActions, TextField, Typography } from '@material-ui/core';\nimport AccountPicker from 'components/common/AccountPicker';\nimport { useHistory } from 'react-router-dom';\nimport { useStore, useDispatch } from 'store/hooks';\nimport { useDispatchCommand } from 'api/hooks';\nimport { RoomCreate } from 'api/commands';\nimport Flex from 'components/utils/Flex';\nimport { Alert } from '@material-ui/lab';\nimport { updateCurrentAccount } from 'store/actions';\nimport { useLittera } from \"react-littera\";\nimport translations from \"./trans\";\nimport useStyles from \"./styles\";\n\nconst CreateRoom = () => {\n    const [error, setError] = React.useState(\"\");\n    const [loading, setLoading] = React.useState(false);\n    const [open, setOpen] = React.useState(false);\n    const [selected, setSelected] = React.useState<string[]>([]);\n    const [label, setLabel] = React.useState(\"\");\n    const classes = useStyles();\n  \n    const history = useHistory();\n    const currentAccount = useStore(state => state.currentAccount);\n    const dispatchCommand = useDispatchCommand();\n    const dispatchStore = useDispatch();\n    const [translated] = useLittera(translations);\n\n    const handleClickOpen = () => {\n      setOpen(true);\n    };\n    const handleClose = () => {\n      setOpen(false);\n    };\n\n    const handleSubmit = async () => {\n      setLoading(true);\n      const newRoom = await dispatchCommand(RoomCreate, currentAccount?.id ?? \"\", label, selected);\n\n      if (newRoom.status === 200) {\n        // Refetch current account to display updated rooms list.\n        dispatchStore(await updateCurrentAccount(currentAccount?.id ?? \"\"));\n\n        const room_id = newRoom!.data!.room_id;\n        history.push(`/home/room/${room_id}`)\n      } else if(newRoom.status === 404) {\n        // @ts-ignore\n        setError(newRoom?.message ?? \"Unexpected error occurred\")\n      }\n\n      setLoading(false);\n    }\n\n    const handleLabelChange = (event: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      // @ts-ignore\n      const value = event?.target?.value ?? \"\";\n\n      setLabel(value);\n    }\n\n    const isSubmitDisabled = label.length === 0 || selected.length === 0 || loading;\n\n    return <div>\n        <Button variant=\"contained\" onClick={handleClickOpen} className={classes.roomsButton}>{translated.conversation}</Button>\n        \n        <Dialog fullWidth onClose={handleClose} aria-labelledby=\"customized-dialog-title\" open={open}>\n          <DialogTitle id=\"customized-dialog-title\">\n            {translated.createRoom}\n          </DialogTitle>\n          \n          <DialogContent dividers>\n            {error && <Alert severity=\"error\">{error}</Alert>}\n\n            <TextField disabled={loading} fullWidth id=\"outlined-basic\" label=\"Room name\" value={label} onChange={handleLabelChange} variant=\"outlined\" />\n\n            <Typography style={{marginTop: \"35px\"}} variant=\"h5\" >{translated.invite}</Typography>\n            \n            <AccountPicker disabled={loading} style={{margin: \"20px 0\"}} multiple value={selected} onChange={setSelected} />\n          </DialogContent>\n          \n          <DialogActions>\n            <Flex width=\"100%\" justifyContent=\"space-between\" alignItems=\"center\">\n              \n              {selected.length > 0 ? <Typography>Selected {selected.length} {selected.length > 1 ? \"friends\" : \"friend\"}</Typography>\n              : <Typography>Select a friend</Typography>}\n\n              <div>\n                <Button autoFocus onClick={handleClose} color=\"primary\">\n                  Close\n                </Button>\n                <Button disabled={isSubmitDisabled} autoFocus onClick={handleSubmit} color=\"primary\">\n                  Create\n                </Button>\n              </div>\n            </Flex>\n          </DialogActions>\n        </Dialog>\n    </div>\n\n\n}\n\n\n\nexport default CreateRoom;\n","import * as firebase from \"firebase/app\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport { IMessage } from \"types\";\n//import { useAudio } from \"utils/hooks/sound\";\n\nconst makeRefPath = (room_id: string) => {\n    return `rooms/${room_id}/messages`;\n}\n\nexport const useMessages = (room_id: string) => {\n    //const [, toggle] = useAudio(\"https://cdn-02.anonfiles.com/B4z8W9Bbo8/14878adc-1592945278/notification_sound.mp3\");\n    const [messages, setMessages] = useState<any>(null);\n\n    useEffect(() => {\n        const messagesRef = firebase.database().ref(makeRefPath(room_id));\n\n        messagesRef.on('value', (snapshot) => {\n            const msgs = snapshot.val() ?? [];\n\n            setMessages((m: any) => {\n                //if(m !== null && typeof toggle === \"function\") toggle();\n                return msgs;\n            });\n        })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [room_id]);\n\n    return messages as {[key: string]: IMessage};\n}\n\ntype SubmitFunction = ((value: string) => void);\n\nexport const useMessageSubmit = (room_id: string, account_id: string) => {\n\n    return useCallback((value: string) => {\n        const message = {\n            author: account_id,\n            value,\n            timestamp: new Date().toString()\n        }\n\n        //firebase.database().ref(makeRefPath(room_id)).set(message);\n        var newMsgKey = firebase.database().ref().child('rooms').child(room_id).child(\"messages\").push().key;\n\n        var updates: any = {};\n        updates[`/rooms/${room_id}/messages/${newMsgKey}`] = message;\n\n        return firebase.database().ref().update(updates);\n\n    }, [account_id, room_id]) as SubmitFunction;\n}","import React from 'react';\nimport { Avatar, Typography, Box } from \"@material-ui/core\";\nimport { AvatarGroup } from \"@material-ui/lab\";\nimport { useHistory } from \"react-router-dom\";\nimport { useStore } from \"store/hooks\";\nimport { IAccount, IRoom } from \"types\";\nimport CreateRoom from \"./CreateRoom\";\nimport useStyles from \"./styles\";\nimport { useAccount, useRoom } from 'api/hooks';\nimport { ensureArray, makeFullName, makeInitials } from 'utils/general';\nimport { useMessages } from 'api/messages';\n\nconst Rooms = () => {\n    const classes = useStyles();\n\n    const currentAccount = useStore(state => state.currentAccount);\n\n    return (\n        <Box className={classes.roomWrapper}>\n            <CreateRoom />\n            <Box className={classes.listWrapper}>\n                {\n                    currentAccount?.rooms && currentAccount.rooms.map(room => <RoomLabel key={room.id} {...room} />)\n                }\n            </Box>\n        </Box>\n    )\n}\n\nconst RoomLabel = (props: IRoom) => {\n    const history = useHistory();\n    const classes = useStyles();\n\n    const roomUri = `/home/room/${props.id}`;\n    const handleNavigation = () => history.push(roomUri);\n\n    const account = useAccount();\n    const room = useRoom(props.id, true);\n    const messages = useMessages(props.id);\n\n    if (!room || !room.accounts) return null;\n\n    const lastMessage = Object.values(messages)[Object.keys(messages).length - 1];\n\n    let lastMessageValue: string | null = lastMessage?.value ?? null;\n    try {\n        if (lastMessageValue)\n            lastMessageValue = atob(lastMessage.value);\n    } catch (err) {\n        lastMessageValue = null;\n        console.log(err);\n    }\n\n    const roomMembers = ensureArray(room?.accounts).filter(acc => acc.id !== account?.id);\n    const roomName = roomMembers.length > 1 ? props.label : makeFullName(roomMembers[0].details?.first_name, roomMembers[0].details?.last_name, roomMembers[0].label);\n\n    return <Box onClick={handleNavigation} className={classes.roomItemWrapper}>\n        <Box style={{ marginRight: \"10px\", maxWidth: \"220px\" }}>\n            <Typography variant=\"h6\" style={{ fontSize: \"20px\" }}>{roomName}</Typography>\n            {lastMessageValue && <Typography className={classes.lastMessageTypography}>{lastMessageValue}</Typography>}\n        </Box>\n        <AvatarGroup style={{}} max={3} spacing={16}>\n            {room.accounts?.filter(acc => acc.id !== account?.id).map(accountsMap)}\n        </AvatarGroup>\n    </Box>\n}\n\nconst accountsMap = (account: IAccount) => {\n    const accountFullName = makeFullName(account.details?.first_name, account.details?.last_name, account.label);\n    const accountInitials = makeInitials(account.details?.first_name, account.details?.last_name, account.label);\n\n    return <Avatar alt={accountFullName} src={account.avatar_url}>\n        {accountInitials}\n    </Avatar>\n}\n\nexport default Rooms;","import { makeStyles } from \"@material-ui/core\";\n\nconst sidebarWidth = 114;\nconst sidebarMargin = 20;\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        position: \"relative\",\n        display: \"flex\",\n        height: \"100vh\",\n        width: \"100vw\",\n        maxWidth: \"100%\",\n        overflow: \"hidden\",\n        [theme.breakpoints.down(\"sm\")]: {\n            height: \"auto\"\n        }\n    },\n    container: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        flexGrow: 2,\n        width: `calc(100% - ${sidebarWidth + sidebarMargin}px)`,\n        height: \"100%\"\n    },\n    sidebar: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        width: sidebarWidth,\n        marginRight: sidebarMargin,\n        height: \"100vh\",\n        padding: \"15px 0\",\n        background: \"linear-gradient(to right, rgba(0, 0, 0, 0.35), transparent)\"\n    },\n    backgroundImage: {\n        backgroundPosition: \"center\",\n        backgroundRepeat: \"no-repeat\",\n        backgroundSize: \"cover\",\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        height: \"100vh\",\n        width: \"auto\",\n        minWidth: \"100%\",\n        zIndex: -2\n    },\n    backgroundImageBacklit: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        zIndex: -1,\n        width: \"100vw\",\n        height: \"100vh\",\n        backgroundColor: \"rgba(0, 0, 0, .2)\"\n    },\n    mainSection: {\n        display: \"flex\",\n        width: \"100%\",\n        justifyContent: \"space-between\",\n        alignItems: \"flex-start\",\n        height: \"calc(100vh - 72px)\", // depends on appbar height.\n        [theme.breakpoints.down(\"sm\")]: {\n            flexDirection: \"column-reverse\",\n            justifyContent: \"flex-start\",\n            alignItems: \"center\"\n        }\n    },\n\n    drawer: {\n        width: \"60%\"\n    }\n}));\n\nexport default useStyles;\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    title: {\n        padding: \"5vh 0\",\n        width: \"100%\",\n        textAlign: \"center\",\n    },\n    root: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n    },\n    personData: {\n        display: \"flex\",\n        width: \"50%\",\n        margin: \"15px auto\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    contacts: {\n        width: \"100%\",\n        \n    },\n    avatar: {\n        margin: \"0 20px\",\n    },\n    text: {\n        width: \"100%\",\n        textAlign: \"center\",\n    },\n  }));\n\n  export default useStyles;\n","import { Avatar, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { TContact } from \"types\";\nimport { useCommand } from 'api/hooks';\nimport { useForkedState } from 'utils/hooks/general';\nimport { isLoaded } from 'api/utils';\nimport { AccountList } from 'api/commands';\nimport { useStore } from 'store/hooks';\nimport useStyles from \"./styles\";\n\nconst ContactLabel = (props: TContact) => {\n    const [name, setName] = useState('')\n    const [avatar, setAvatar] = useState('')\n    const classes = useStyles();\n\n    const currentAccount = useStore(state => state.currentAccount);\n\n    const accountsRq = useCommand(AccountList, currentAccount?.friends?.map(friend => friend.account_id));\n    const [accounts] = useForkedState(rq => isLoaded(rq) ? rq.data : null, accountsRq)\n\n    useEffect(() => {\n        accounts?.forEach((account : any) => {\n            if(account.id === props.account_id) {\n                return (\n                    setName(`${account.name} ${account.surname}`),\n                    setAvatar(account.avatar_url)\n                )\n            }\n        })\n    })\n\n    console.log(currentAccount, accounts,  props.account_id);\n\n    return (\n        <section className={classes.personData}>\n            <Avatar className={classes.avatar} alt=\"user\" src={avatar}/>\n            <Typography color={props.favorite ? \"primary\" : \"initial\"}>\n                {name}\n            </Typography>\n        </section>    \n    );\n};\n\nexport default ContactLabel;","// * Translations\nconst translations = (preset: any) => ({\n    peopleMessage: {\n        en_US: \"You don't have any frients on the list.\",\n        pl_PL: \"Nie masz nikogo na licie znajomych.\",\n        // de_DE: \"Hallo!\",\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n})\n\nexport default translations;","import React from 'react';\nimport { Typography } from \"@material-ui/core\";\nimport { useStore } from \"store/hooks\";\nimport ContactLabel from './ContactLabel';\nimport useStyles from \"./styles\";\nimport { useLittera } from \"react-littera\";\nimport translations from \"./trans\";\n\n\nconst People = () => {\n    const classes = useStyles();\n    const [translated] = useLittera(translations);\n\n    const currentAccount = useStore(state => state.currentAccount);\n\n    return <div className={classes.root}>\n        <Typography variant=\"h2\" gutterBottom className={classes.title}>People</Typography>\n        <section className={classes.contacts}>\n            {\n                currentAccount ? \n                currentAccount?.friends && currentAccount.friends.map(friend => <ContactLabel key={friend.account_id} {...friend} />) \n                : <Typography variant=\"h3\" className={classes.text}>{translated.peopleMessage}</Typography>\n            }\n        </section>\n    </div>\n}\n\nexport default People;","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n      menuIcon: {\n    fontSize: \"40px\",\n    cursor: \"pointer\",\n    color: \"white\",\n    \"& svg\": {\n      boxShadow: \"1px 3px 3px rgba(0, 0, 0, .25)\"\n    }\n\n      }\n  }));\n\n  export default useStyles;\n","import React, { useState } from 'react';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MenuOpenIcon from '@material-ui/icons/MenuOpen';\nimport useStyles from \"./styles\";\n\nconst Menu = () => {\n    const classes = useStyles();\n    const [isOpenMenu, setIsOpenMenu] = useState(false);\n\n    const toggleMenu = () => {\n        setIsOpenMenu(!isOpenMenu);\n    };\n\n    return (\n        <>\n        <section onClick={toggleMenu}>\n            {isOpenMenu ? <MenuOpenIcon className={classes.menuIcon}/> : <MenuIcon className={classes.menuIcon}/>}  \n        </section>\n        </>  \n    );\n};\n\nexport default Menu;","// Here we define translations for the component.\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n    example: {\n        en_US: \"Example\",\n        de_DE: \"Beispiel\",\n        pl_PL: \"Przykad\"\n    },\n    signOut: {\n        en_US: \"Sign out\",\n        de_DE: \"Ausloggen\",\n        pl_PL: \"Wyloguj si\"\n\n    },\n    manageAccount: {\n        en_US: \"Manage account\",\n        de_DE: \"Konto verwalten\",\n        pl_PL: \"Zarzdzaj kontem\"\n\n    },\n    settings: {\n        de_DE: \"Einstellungen\",\n        en_US: \"Settings\",\n        pl_PL: \"Ustawienia\"\n    }\n}","// Here we define translations for the component.\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n    title: {\n        de_DE: \"Einstellungen\",\n        en_US: \"Settings\",\n        pl_PL: \"Ustawienia\"\n    }\n}","// Deps scoped imports.\nimport React from \"react\";\nimport { Drawer, IconButton, makeStyles, Typography } from \"@material-ui/core\";\nimport CloseIcon from \"@material-ui/icons/Close\"\nimport { useLittera } from \"react-littera\";\nimport cx from \"classnames\";\n\n// Project scoped imports.\nimport { useDispatch, useStore } from \"store/hooks\";\nimport { setBackgroundTheme } from \"store/actions\";\nimport Flex from \"components/utils/Flex\";\nimport { backgroundThemes } from \"utils/backgroundThemes\";\n\n// Component scoped imports.\nimport styles from \"./styles\";\nimport translations from \"./trans\";\n\n/**\n * Settings drawer component.\n * @version 1.0.0\n * @author Mike Eling <mike.eling97@gmail.com>\n */\nconst SettingsDrawer = (props: SettingsDrawerProps) => {\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n\n    return <div className={cx(classes.root, props.className)} style={props.style}>\n        <Drawer open={props.open} anchor=\"right\" onClose={props.onClose} className={classes.drawer} keepMounted>\n            <div className={classes.paperDrawer}>\n                <Flex alignItems=\"center\" justifyContent=\"space-between\" style={{ marginBottom: \"10px\" }}>\n                    <Typography variant=\"h4\">{translated.title}</Typography>\n                    <IconButton onClick={props.onClose}><CloseIcon /></IconButton>\n                </Flex>\n\n                <ThemeSettings />\n                <VersionSettings />\n            </div>\n        </Drawer>\n    </div>\n}\n\nconst VersionSettings = () => {\n\n    return <div style={{ margin: \"20px 0\" }}>\n        <Typography variant=\"h5\" gutterBottom>Version</Typography>\n        <Typography>{process.env.REACT_APP_VERSION ?? \"0.0.0-dev.0\"}</Typography>\n        <Typography>{process.env.REACT_APP_BUILD_TIME ?? new Date().toDateString()}</Typography>\n    </div>\n}\n\nconst ThemeSettings = () => {\n    // @ts-ignore\n    const bgTheme = useStore(state => state.preferences?.backgroundTheme);\n    const dispatch = useDispatch();\n\n    const setTheme = (index: number) => {\n        dispatch(setBackgroundTheme(backgroundThemes[index]))\n        localStorage.setItem('background-theme', backgroundThemes[index].id)\n    }\n\n    return <div style={{ margin: \"20px 0\" }}>\n        <Typography variant=\"h5\" gutterBottom>Theme</Typography>\n\n        <Flex flexWrap=\"wrap\">\n            {backgroundThemes.map((theme, index) => <ThemePanel key={theme.id} setTheme={() => setTheme(index)} active={(bgTheme?.id?.toString() || '1922729') === theme.id} {...theme} />)}\n        </Flex>\n    </div>\n}\n\nconst ThemePanel = (props: { id: string, label: string, url: string, setTheme: () => void, active: boolean }) => {\n\n    return <div style={{ margin: \"0 5px\", cursor: 'pointer' }} onClick={props.setTheme}>\n        <div style={{ width: \"200px\", height: \"125px\", overflow: \"hidden\", borderRadius: \"8px\" }}>\n            <img src={`${props.url}200x125`} alt=\"theme thumbnail\" />\n        </div>\n        <p style={{ marginTop: \"5px\", fontWeight: props.active ? \"bold\" : \"normal\" }}>{props.label}</p>\n    </div>\n}\n\n// Creates a hook for generating classnames.\n// @ts-ignore\nconst useStyles = makeStyles(styles);\n\n// Props the component accepts.\ntype SettingsDrawerProps = {\n    className?: string;\n    style?: React.CSSProperties\n    open: boolean;\n    onOpen: () => void;\n    onClose: () => void;\n}\n\n// Time to export! \nexport default SettingsDrawer;","// Here we define styles for the component.\n\nimport { Theme } from \"@material-ui/core\";\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default ((theme: Theme) => ({\n    root: {\n        // Container styles...\n    },\n    h2: {\n        // Head text styles...\n        color: \"#000\"\n    },\n    drawer: {\n        //width: \"40vw\"\n    },\n    paperDrawer: {\n        position: \"relative\", padding: \"10px 20px\",\n        width: \"40vw\"\n    }\n}));","// Deps scoped imports.\nimport React, { useState } from \"react\";\nimport { Avatar, Box, Drawer, Icon, List, ListItem, ListItemIcon, ListItemText, makeStyles, Popover, Typography } from \"@material-ui/core\";\nimport cx from \"classnames\";\nimport { useDispatch, useStore } from \"store/hooks\";\nimport { useLittera } from \"react-littera\";\n\n// Project scoped imports.\nimport { makeFullName } from \"utils/general\";\nimport { Profile } from \"components/pages\";\nimport { setCurrentAccount } from \"store/actions\";\n\n// Component scoped imports.\nimport translations from \"./trans\"\nimport styles from \"./styles\";\nimport { signOut } from \"api/auth\";\nimport { useStorageSetter } from \"storage/hooks\";\nimport SettingsDrawer from \"components/common/SettingsDrawer\";\n\n/**\n * Menu Popover\n * @description The popover showed when clicking on own profile picture.\n * @version 1.0.0\n * @author Mike Eling <mike.eling97@gmail.com>\n */\nconst MenuPopover = (props: MenuPopoverProps) => {\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n\n    const [shownSettingsDrawer, setShownSettingsDrawer] = useState(false);\n    const openSettingsDrawer = () => setShownSettingsDrawer(true);\n    const closeSettingsDrawer = () => setShownSettingsDrawer(false);\n\n    const [shownProfileDrawer, setShownProfileDrawer] = useState(false);\n    const openProfileDrawer = () => setShownProfileDrawer(true);\n    const closeProfileDrawer = () => setShownProfileDrawer(false);\n\n    const currentAccount = useStore(state => state.currentAccount);\n\n    const [anchorEl, setAnchorEl] = React.useState<HTMLElement | null>(null);\n\n    const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const open = Boolean(anchorEl);\n    const id = open ? 'profile-popover' : undefined;\n\n    const accountFullName = makeFullName(currentAccount?.details?.first_name, currentAccount?.details?.last_name, currentAccount?.label ?? \"Unknown\");\n\n    const storageSetter = useStorageSetter();\n    const storeDispatch = useDispatch();\n\n    const handleSignOut = async () => {\n        await signOut();\n        storageSetter(\"accountIdToken\");\n        storeDispatch(setCurrentAccount(null));\n        window.location.reload(true);\n    };\n\n    return <>\n        <Avatar aria-describedby={id} className={classes.avatar} alt=\"user\" src={currentAccount?.avatar_url} onClick={handleClick} />\n\n        <Popover\n            id={id}\n            open={open}\n            anchorEl={anchorEl}\n            onClose={handleClose}\n            classes={{\n                root: cx(classes.root, props.className),\n                paper: classes.popoverPaper\n            }}\n            style={props.style}\n            anchorReference=\"anchorEl\"\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n        >\n            <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-start\" alignItems=\"center\">\n                <Box className={classes.header} display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-start\" alignItems=\"center\">\n                    <Avatar className={classes.avatarBig} alt={accountFullName} src={currentAccount?.avatar_url} />\n                    <Typography variant=\"h5\">{accountFullName}</Typography>\n                    <Typography style={{ opacity: 0.6 }}>{currentAccount?.contact?.email}</Typography>\n                </Box>\n\n                <List aria-label=\"profile settings signout\" style={{ width: \"88%\" }}>\n                    <ListItem button onClick={() => { openProfileDrawer(); handleClose(); }}>\n                        <ListItemIcon>\n                            <Icon>person</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={translated.manageAccount} />\n                    </ListItem>\n\n                    <ListItem button onClick={() => { openSettingsDrawer(); handleClose(); }}>\n                        <ListItemIcon>\n                            <Icon>settings</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={translated.settings} />\n                    </ListItem>\n\n                    <ListItem button onClick={() => { handleSignOut(); handleClose(); }}>\n                        <ListItemIcon>\n                            <Icon>lock</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={translated.signOut} />\n                    </ListItem>\n                </List>\n            </Box>\n        </Popover>\n\n        <Drawer anchor=\"right\" open={shownProfileDrawer} onClose={closeProfileDrawer}>\n            <Box style={{ width: \"55vw\", height: \"100vh\", backgroundColor: \"#FFF\" }}>\n                <Profile />\n            </Box>\n        </Drawer>\n\n        <SettingsDrawer open={shownSettingsDrawer} onClose={closeSettingsDrawer} onOpen={openSettingsDrawer} />\n    </>\n}\n\n// Creates a hook for generating classnames.\nconst useStyles = makeStyles(styles);\n\n// Props the component accepts.\ntype MenuPopoverProps = {\n    className?: string;\n    style?: React.CSSProperties;\n}\n\n// Time to export! \nexport default MenuPopover;","// Here we define styles for the component.\n\nimport { createStyles, Theme } from \"@material-ui/core\";\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default ((theme: Theme) => createStyles({\n    root: {\n        // Container styles...\n        marginTop: \"10px\"\n    },\n    h4: {\n        // Head text styles...\n        color: theme.palette.primary.main\n    },\n    avatar: {\n        cursor: \"pointer\",\n        marginLeft: \"15px\",\n        position: \"relative\"\n    },\n    avatarBig: {\n        cursor: \"pointer\",\n        width: \"82px\",\n        height: \"82px\",\n        position: \"relative\",\n        marginBottom: theme.spacing(4)\n    },\n    popoverPaper: {\n        width: \"288px\",\n        borderRadius: \"10px\"\n    },\n    header: {\n        padding: `${theme.spacing(5)}px ${theme.spacing(4)}px`,\n    },\n\n}));","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        textAlign: \"left\",\n        margin: \"0 0\",\n        textShadow: \"1px 3px 4px rgba(0, 0, 0, .3)\",\n        fontFamily: \"'Montserrat', sans-serif\",\n        fontWeight: 600\n    },\n}));\n\nexport default useStyles;\n","import { Typography, TypographyProps } from \"@material-ui/core\";\nimport useStyles from \"./styles\";\nimport React from \"react\";\n\ntype LogoProps = {\n    typographyProps?: TypographyProps,\n    style?: Object\n    onClick?: () => void;\n}\n\nconst Logo = (props: LogoProps) => {\n    const classes = useStyles();\n\n    const style = {\n        ...props.style,\n        // Set cursor to pointer if the Logo is clickable.\n        cursor: props.onClick ? \"pointer\" : \"initial\"\n    }\n\n    return <Typography onClick={props.onClick} variant=\"h2\" className={classes.root} style={style} {...props.typographyProps}>Circles</Typography>\n}\n\nexport default Logo;","// Deps scoped imports.\nimport React from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\n\n// Project scoped imports.\nimport MenuPopover from \"./MenuPopover\";\nimport Logo from \"../Logo\";\nimport Flex from \"components/utils/Flex\";\n\n// Component scoped imports.\nimport styles from \"./styles\";\n\n/**\n * Example component\n * @description This is an example component including translations and theming.\n * @version 1.0.0\n * @author Mike Eling <mike.eling97@gmail.com>\n */\nconst TopMenu = (props: TopMenuProps) => {\n    const classes = useStyles();\n    const history = useHistory();\n\n    const handleNavigation = (path: string) => () =>\n        history.push(path)\n\n    return <section className={classes.root} style={props.style}>\n        <Logo style={{ fontSize: \"56px\", margin: \"16px 0\" }} onClick={handleNavigation('/home/highlights')} />\n        <Flex justifyContent=\"flex-end\" alignItems=\"center\" className={classes.menuBar}>\n            <MenuPopover />\n        </Flex>\n    </section>\n}\n\n// Creates a hook for generating classnames.\nconst useStyles = makeStyles(styles);\n\n// Props the component accepts.\ntype TopMenuProps = {\n    className?: string;\n    style?: React.CSSProperties\n}\n\n// Time to export! \nexport default TopMenu;","// Here we define styles for the component.\n\nimport { createStyles, Theme } from \"@material-ui/core\";\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default ((theme: Theme) => createStyles({\n    root: {\n        position: \"relative\",\n        display: \"flex\",\n        height: \"72px\",\n        width: \"100%\",\n        margin: \"0 auto\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        color: \"white\",\n    },\n    menuBar: {\n        marginRight: \"3vw\"\n    },\n\n}));","import React, { useState, useEffect } from 'react';\nimport Rooms from '../Rooms'\nimport useStyles from \"./styles\";\nimport People from '../People';\nimport { Route, useHistory } from 'react-router-dom';\nimport { useStore } from 'store/hooks';\nimport { backgroundThemes } from 'utils/backgroundThemes';\nimport Menu from '../Menu';\nimport { Highlights, Room } from '..';\nimport TopMenu from 'components/common/TopMenu';\n\nfunction Home() {\n  const classes = useStyles();\n  const history = useHistory();\n\n\n  // @ts-ignore\n  const bgTheme = useStore(state => state?.preferences?.backgroundTheme || backgroundThemes[0])\n\n  const [isRoomsView] = useState(true);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    history.push(\"/home/highlights\");\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <>\n      <section className={classes.root}>\n        <div className={classes.sidebar}>\n          <Menu />\n        </div>\n        <div className={classes.container}>\n          <TopMenu />\n          <main className={classes.mainSection}>\n            {/* new conversation and Layouts for home screen */}\n            {isRoomsView ? <Rooms /> : <People />}\n            <Route path=\"/home/highlights\" component={Highlights} />\n            <Route path=\"/home/room/:id\" component={Room} /> \n          </main>\n        </div>\n      </section>\n      <div className={classes.backgroundImageBacklit} ></div>\n      <div className={classes.backgroundImage} style={{ backgroundImage: `url(${bgTheme?.url}${window.innerWidth}x${window.innerHeight})` }} ></div>\n    </>\n  );\n}\n\nexport default Home;\n","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // position: \"fixed\",\n    // top: \"0\",\n    // right: \"0\",\n    height: \"100vh\",\n    width: \"45vw\",\n    backgroundColor: \"white\",\n    zIndex: 4,\n    // transform: \"translateX(100%)\",\n  },\n}));\n\n  export default useStyles;\n","// * Translations\nconst translations = (preset: any) => ({\n    title: {\n        en_US: \"Profile\",\n        pl_PL: \"Profil\",\n        de_DE: \"Profil\",\n    },\n    signOut: {\n        en_US: \"Sign Out\",\n        pl_PL: \"Wyloguj si\",\n        de_DE: \"Ausloggen\",\n    },\n})\n\nexport default translations;","import React from \"react\";\nimport { useLittera } from \"react-littera\";\nimport useStyles from \"./styles\"\nimport translations from \"./trans\"\nimport { CircularProgress, Typography, Button } from \"@material-ui/core\";\nimport { useAccount } from \"api/hooks\";\nimport { signOut } from \"api/auth\";\nimport { setCurrentAccount } from \"store/actions\";\nimport { useDispatch } from \"store/hooks\";\nimport { useStorageSetter } from \"storage/hooks\";\n\n/**\n * Profile page component.\n */\nconst Profile = () => {\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n    const storageSetter = useStorageSetter();\n    const storeDispatch = useDispatch();\n\n    const currentAccount = useAccount(undefined, true);\n\n    if(!currentAccount) return <CircularProgress />\n\n    const handleSignOut = async () => {\n        await signOut();\n        storageSetter(\"accountIdToken\");\n        storeDispatch(setCurrentAccount(null));\n        window.location.reload(true);\n    };\n\n    return (\n      <div className={classes.root}>\n          {translated.title}\n          <img  alt=\"profile\" src={currentAccount.avatar_url} style={{width: \"220px\", height: \"auto\"}} />\n          <Typography paragraph>{currentAccount.label}</Typography>\n          <Typography paragraph>{currentAccount.details.first_name}</Typography>\n          <Typography paragraph>{currentAccount.details.last_name}</Typography>\n        <Typography paragraph>{currentAccount.contact?.email}</Typography>\n          <section>\n          {currentAccount && (\n            <Button variant='contained' onClick={handleSignOut}>\n              {translated.signOut}\n            </Button>\n          )}\n        </section>\n          {\n            currentAccount?.friends && currentAccount.friends.map(friend => <Contact key={friend.account_id} {...friend} />)\n          }\n      </div>\n    )\n}\n\nconst Contact = (props: { account_id: string, favorite?: boolean }) => {\n    const account = useAccount(props.account_id, false, { flags: true, rooms: true, contacts: true });\n\n    if(!account) return <div>...</div>\n\n    return <div style={{border: \"1px solid #121212\"}}>\n        <img  alt=\"profile\" src={account.avatar_url} style={{width: \"220px\", height: \"auto\"}} />\n        <Typography gutterBottom variant=\"h4\">{account.label}</Typography>\n        <Typography >{account.details.first_name} {account.details.last_name}</Typography>\n        <Typography>Is favorite? {props.favorite ? \"true\" : \"false\"}</Typography>\n    </div>\n}\n\nexport default Profile;","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: \"relative\",\n    flexBasis: \"70%\",\n    width: \"70%\",\n    minWidth: \"70%\",\n    maxWidth: \"max-content\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"calc(100vh - 72px)\",\n    justifyContent: \"space-between\",\n    backdropFilter: \"blur(10px)\",\n    borderTopLeftRadius: theme.shape.borderRadius,\n    borderTopRightRadius: theme.shape.borderRadius,\n    \n    [theme.breakpoints.down(\"sm\")]: {\n      flexBasis: \"100%\",\n      minWidth: \"100%\",\n      width: \"100%\",\n      \n    },\n    [theme.breakpoints.down(\"md\")]: {\n      flexBasis: \"50%\",\n      minWidth: \"50%\",\n      width: \"50%\",\n    }\n  },\n  inputContainer: {\n    backgroundColor: theme.palette.background.default,\n    borderRadius: theme.shape.borderRadius,\n    position: \"relative\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\"\n  },\n  roomTitle: {\n    marginLeft: \"12px\",\n    marginTop: \"12px\"\n  },\n  messagesRoot: {\n    minWidth: \"70vw\",\n    width: \"100%\",\n    position: \"relative\",\n    maxHeight: \"calc(100vh - 36px)\",\n    height: \"90%\",\n    flexGrow: 1,\n    overflow: \"auto\",\n    display: \"flex\",\n    [theme.breakpoints.down(\"sm\")]: {\n      minWidth: \"70vw\" // TODO: Change to more static value.\n\n    }\n  },\n\n  messageRoot: {\n    borderRadius: \"15px\",\n  },\n  ownedMessage: {\n    margin: \"3px \",\n    alignSelf: \"flex-end\",\n    color: \"#000\",\n    backgroundColor: \"#eee\",\n    borderRadius: \"15px\",\n    '& > *': {\n      margin: 0,\n      maxWidth: \"240px\",\n      whiteSpace: \"normal\",\n      wordBreak: \"break-word\",\n    },\n    '& > * > *':{\n      maxWidth: \"240px\",\n    },\n  },\n  notOwnedMessage: {\n    alignSelf: \"flex-start\",\n    margin: \"15px 0\",\n    color: \"#FFF\",\n    background: theme.palette.primary.main,\n    '& > *': {\n      margin: 0,\n      maxWidth: \"240px\",\n      whiteSpace: \"normal\",\n      wordBreak: \"break-word\",\n    },\n    '& > * > *':{\n      maxWidth: \"240px\",\n    },\n  },\n  messageWithManyLines:{\n    margin: \"8px 0\",\n  },\n  message: {\n    maxWidth: \"450px\",\n    position: \"relative\",\n    padding: \"16px 18px\",\n    borderRadius: \"25px\",\n    textAlign: \"left\",\n  },\n  nextMessageOwned:{\n    borderBottomRightRadius: \"4px\",\n  },\n  nextMessageNotOwned:{\n    borderBottomLeftRadius: \"4px\",\n    marginBottom: \"3px\",\n  },\n  prevMessageOwned: {\n    borderTopRightRadius: \"4px\",\n  },\n  prevMessageNotOwned: {\n    borderTopLeftRadius: \"4px\",\n    marginTop: \"3px\",\n  },\n  equalToLine: {\n    paddingLeft: \"34px\",\n  },\n  sendMessageArea:{\n    position: \"fixed\",\n  },\n  avatar: { borderRadius: \"28px\", width: \"28px\", height: \"28px\", backgroundColor: \"white\", color: \"#242424\", right: \"-19px\", bottom: \"0px\", position: \"relative\", padding: \"3px\", zIndex: 5 }\n}));\n\nexport default useStyles;","import React, { useCallback, useState, useEffect, useRef } from \"react\";\nimport { Typography, Avatar } from \"@material-ui/core\";\nimport { useMessages } from \"api/messages\";\nimport { IAccount, IMessage } from \"types\";\nimport { useStore } from \"store/hooks\";\nimport useStyles from \"./styles\";\nimport Flex from \"components/utils/Flex\";\nimport cx from \"classnames\";\nimport ReactMarkdown from \"react-markdown\";\nimport { makeFullName, makeInitials } from \"utils/general\";\n\nconst Messages = ({ roomId, accounts }: { roomId: string, accounts: IAccount[] }) => {\n    const messages = useMessages(roomId) || {};\n\n    const getAuthor = useCallback((author_id) => accounts.find(account => account.id === author_id) ?? null, [accounts]);\n    const currentAccount = useStore(state => state.currentAccount ?? null);\n\n    const hasMessages = Object.keys(messages).length !== 0;\n\n    return <Flex flexDirection=\"column-reverse\" style={{ marginBottom: \"15px\", overflowY: \"scroll\", height: \"calc(90vh - 122px)\" }}>\n        {messages && !hasMessages ?\n            <Typography variant=\"h2\">Say Hi!</Typography>\n            :\n            Object.keys(messages).reverse().map((message_id: string, index: number) => {\n\n                const message = messages[message_id];\n\n                return <Message\n                    key={message_id}\n                    message={message}\n                    author={getAuthor(message.author)}\n                    displayAvatar={message.author !== messages[Object.keys(messages).reverse()[index - 1]]?.author}\n                    isOwnedNextMessage = {message.author === messages[Object.keys(messages).reverse()[index - 1]]?.author}\n                    isOwnedPrevMessage = {message.author === messages[Object.keys(messages).reverse()[index + 1]]?.author}\n                    isOwned={currentAccount?.id === message.author} />\n            })\n        }\n    </Flex>\n}\n\nconst Message = ({ message, author, isOwned, displayAvatar, isOwnedNextMessage, isOwnedPrevMessage }: { message: IMessage, author: IAccount | null, isOwned: boolean, displayAvatar: boolean, isOwnedNextMessage: boolean, isOwnedPrevMessage: boolean }) => {\n    const classes = useStyles();\n    const [height, setHeight] = useState(0);\n    const ref = useRef(null);\n\n    let value = message.value;\n    try {\n        value = atob(message.value);\n    } catch (err) {\n        console.log(err);\n    }\n\n    const rootClasses = cx(classes.message, { [classes.ownedMessage]: isOwned, [classes.notOwnedMessage]: !isOwned, [classes.messageWithManyLines]: height>150, [classes.nextMessageNotOwned]: isOwnedNextMessage && !isOwned, [classes.prevMessageNotOwned]: isOwnedPrevMessage && !isOwned, [classes.nextMessageOwned]: isOwnedNextMessage && isOwned, [classes.prevMessageOwned]: isOwnedPrevMessage && isOwned});\n    const bubbleClasses = cx({[classes.ownedMessage]: isOwned ,[classes.messageRoot]: !isOwned ,[classes.equalToLine]: !displayAvatar && !isOwned})\n\n    useEffect(() => {\n        setHeight((ref as any).current.offsetHeight);\n    }, [])\n\n    const authorFullName = makeFullName(author?.details?.first_name, author?.details?.last_name, author?.label ?? \"Unknown\")\n    const authorInitials = makeInitials(author?.details?.first_name, author?.details?.last_name, author?.label ?? \"Unknown\")\n\n    return <Flex alignItems=\"flex-end\" className={bubbleClasses} style={{ alignSelf: isOwned ? \"flex-end\" : \"flex-start\"}}>\n        {displayAvatar && !isOwned && author && <Avatar alt={authorFullName} className={classes.avatar} src={author.avatar_url}>{authorInitials}</Avatar>}\n        <div className={rootClasses} ref={ref}>\n            <ReactMarkdown source={value} />\n        </div>\n    </Flex>\n}\n\nexport default Messages;","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        \n    },\n}));\n\nexport default useStyles;","import { TextField } from \"@material-ui/core\";\nimport React from \"react\";\nimport useStyles from \"./styles\";\n\n// TODO: ref type.\nconst MessageInput = (props: { inputRef?: any, value: string, onChange: (event: React.FormEvent<HTMLTextAreaElement | HTMLInputElement>) => void, onSubmit?: () => void }) => {\n    const classes = useStyles();\n\n    const handleKeyPress = (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if(event.key === \"Enter\" && !event.shiftKey) {\n            event.preventDefault();\n            props.onSubmit && props.onSubmit();\n        }\n    }\n\n    return <TextField onKeyPress={handleKeyPress} ref={props.inputRef} fullWidth value={props.value} onChange={props.onChange} placeholder=\"Write your message...\" className={classes.root} variant=\"outlined\" />\n}\n\nexport default MessageInput;","export const sendPushNotification = async (registration_ids: string[], title: string, body: string) => {\n  console.log(registration_ids, title, body)\n  //   const FIREBASE_API_KEY = process.env.REACT_APP_FIREBASE_APIKEY ?? \"\";\n  //   const message = {\n  //       token: registration_ids[0], \n  //       notification: {\n  //           title,\n  //           body,\n  //           \"vibrate\": 1,\n  //           \"sound\": 1,\n  //           \"show_in_foreground\": true,\n  //           \"priority\": \"high\",\n  //           \"content_available\": true,\n  //       },\n  //       data: {\n  //           title,\n  //           body,\n  //           score: 50,\n  //           wicket: 1\n  //       }\n  // }\n  \n  //   let headers = new Headers({\n  //     \"Content-Type\": \"application/json\",\n  //     \"Authorization\": \"Bearer \" + FIREBASE_API_KEY\n  //   });\n\n  //   let response = await fetch(\"https://fcm.googleapis.com/v1/projects/ping-82fee/messages:send\", { method: \"POST\", headers, body: JSON.stringify(message) })\n  //   response = await response.json();\n  //   console.log(response);\n  }","import React, { useState, useRef } from 'react';\nimport { IconButton, Icon } from '@material-ui/core';\nimport MessageInput from 'components/common/MessageInput';\nimport { sendPushNotification } from \"api/fcm\";\nimport useStyles from './styles';\n\nconst MessageForm = (props: { onSubmit: (value: string) => void }) => {\n    const [input, setInput] = useState(\"\");\n    const classes = useStyles();\n    const ref = useRef<HTMLInputElement | undefined>();\n\n    const handleTextFieldFocus = () => {\n        if(ref.current)\n            ref.current?.focus();\n    }\n\n    const handleSubmit = async (event?: React.FormEvent<HTMLFormElement>) => {\n        if(event) event.preventDefault();\n\n        if(input.length > 0) {\n            try {\n                props.onSubmit(btoa(input));\n                setInput(\"\");\n                handleTextFieldFocus();\n\n                await sendPushNotification([\"dcSXVLtXIAUTyhxv_vpAOC:APA91bE-13ugAh4qEcf8PT3n1r84pbIGZ2Hm5xv4S054SO_wRs3mGM0xCw-0nphyB7wYVthrL6lGZR8qy6qx1--wzUIuqACVNGfow29Lf1EdA-Bh6bb1-VPgiGtx-EF_Z1KPxRu6nZE4\"], \"New message\", input);\n            } catch(err) {\n                console.log(err);\n                alert(\"Message contains invalid characters.\")\n            }\n        }\n    }\n    \n    const handleChange = (event: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        // @ts-ignore\n        setInput(event.target?.value ?? \"\");\n    }\n\n    return <form id=\"message-form\" className={classes.inputContainer} onSubmit={handleSubmit}>\n        <MessageInput inputRef={ref} value={input} onChange={handleChange} onSubmit={handleSubmit} />\n        <IconButton onClick={() => handleSubmit()}>\n            <Icon color=\"primary\">send</Icon>\n        </IconButton>\n    </form>\n}\n\nexport default MessageForm;","import React from 'react';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\n\nconst MessagesSkeleton = () => {\n    return (\n        <div style={{ width: \"fit-content\", marginLeft: \"10px\" }}>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={150} height={40} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={240} height={120} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={240} height={80} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={120} height={40} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={100} height={40} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={240} height={160} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={210} height={40} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={210} height={40} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={210} height={50} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={210} height={50} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n            <Skeleton animation=\"wave\" variant=\"rect\" width={210} height={50} style={{margin: \"20px 34px 10px 0px\", borderRadius: \"10px\"}}/>\n        </div>\n    );\n};\n\nexport default MessagesSkeleton;","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useStore } from \"store/hooks\";\nimport { Typography } from \"@material-ui/core\";\nimport Messages from \"./Messages\";\nimport MessageForm from \"./MessageForm\";\nimport { useRoom } from \"api/hooks\";\nimport { useMessageSubmit } from \"api/messages\";\nimport MessagesSkeleton from \"./MessagesSkeleton\";\nimport useStyles from './styles';\nimport { ensureArray, makeFullName } from \"utils/general\";\n\n// TODO: Show skeleton when switching rooms.\nconst RoomView = () => {\n    const params = useParams<{id: string}>();\n    const classes = useStyles();\n\n    const currentAccount = useStore(state => state.currentAccount);\n    const room = useRoom(params.id);\n    const submitMessage = useMessageSubmit(params.id, currentAccount?.id ?? \"\");\n\n    const roomMembers = ensureArray(room?.accounts).filter(acc => acc.id !== currentAccount?.id);\n    const roomName = roomMembers.length > 1 ? room?.label : makeFullName(roomMembers[0]?.details?.first_name, roomMembers[0]?.details?.last_name, roomMembers[0]?.label);\n\n    return <div className={classes.root}>\n        {(!room || !room.id) ?\n            <MessagesSkeleton />\n            :\n            <>\n                <Typography variant=\"h4\" className={classes.roomTitle}>{roomName}</Typography>\n            \n                <div>\n                    <Messages accounts={room?.accounts ?? []} roomId={room.id} />\n                    <MessageForm onSubmit={submitMessage} />\n                </div>\n            </>}\n    </div>\n}\n\nexport default RoomView;\n","import React from \"react\";\nimport RoomView from \"./RoomView\";\n\n/**\n * Room page component.\n */\nconst Room = () => {\n\n    return (\n        <RoomView />\n    )\n}\n\nexport default Room;\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n    marginRight: \"10%\"\n    },\n    welcome: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    avatarContainer: {\n      position: \"relative\",\n    },\n  welcomeWraper: {\n      position: \"relative\",\n      display: \"flex\",\n    },\n    greetings: {\n      width: \"100%\",\n      color: \"white\",\n      margin: 0,\n      textShadow: \"1px 3px 3px rgba(0, 0, 0, .25)\",\n      fontFamily: \"'Roboto Condensed', sans-serif\",\n      fontWeight: 400\n\n    },\n    suggestionsInfo: {\n      width: \"100%\",\n      margin: 0,\n      color: \"white\",\n      fontSize: \"26px\",\n      textShadow: \"1px 3px 3px rgba(0, 0, 0, .25)\"\n    },\n  }));\n\n  export default useStyles;\n","// * Translations\nconst translations = (preset: any) => ({\n    greeting: {\n        en_US: \"Hi\",\n        pl_PL: \"Witaj\",\n        de_DE: \"Hallo\",\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n})\n\nexport default translations;","// * Translations\nconst translations = (preset: any) => ({\n    firstMessage: {\n        en_US: \"Write to this member 1st time\",\n        pl_PL: \"Napisz do tej osoby poraz pierwszy\",\n        de_DE: \"Hallo!\",\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n})\n\nexport default translations;","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        marginTop: \"20px\",\n        overflowY: \"auto\",\n    },\n    card: {\n        borderRadius: \"8px\",\n        margin: \"10px auto\", width: \"100%\"\n    },\n    suggestionAvatar: {\n        marginRight: theme.spacing(4),\n        width: \"48px\",\n        height: \"48px\"\n    }\n}));\n\nexport default useStyles;","import React, { useEffect, useRef } from 'react';\nimport { AccountInfo } from 'api/commands';\nimport { useForkedState } from \"utils/hooks/general\";\nimport { isLoaded } from \"api/utils\";\nimport { useCommand } from 'api/hooks';\nimport { Card, CardContent, Typography, Box, Avatar } from '@material-ui/core';\nimport translations from \"./trans\";\nimport { useLittera } from \"react-littera\";\nimport { IAccount, TSuggestion } from \"types\";\nimport useStyles from \"./styles\";\nimport gsap from 'gsap';\nimport ScrollTrigger from 'gsap/ScrollTrigger';\nimport { makeFullName, makeInitials } from 'utils/general';\n\ngsap.registerPlugin(ScrollTrigger);\n\nconst Suggestion = ({suggestion, index}: {suggestion: TSuggestion, index: string}) => {\n    const classes = useStyles();\n\n    const [translated] = useLittera(translations);\n    const { payload, type } = suggestion;\n    const scrollRef = useRef(null);\n\n    const accountRq = useCommand(AccountInfo, payload?.account_id);\n    const [account] = useForkedState<any, IAccount>(rq => isLoaded(rq) ? rq.data : null, accountRq);\n  \n    useEffect(() => {\n        \n    }, [suggestion])\n\n    if (!account || account.flags?.includes(\"needs_init\")) return null; // TODO: Add a loader...\n\n    const accountFullName = makeFullName(account.details?.first_name, account.details?.last_name, account.label);\n    const accountInitials = makeInitials(account.details?.first_name, account.details?.last_name, account.label);\n\n    return (\n        <Card className={classes.card} id={index} ref={scrollRef} style={{zIndex: parseInt(index)}}>\n                <CardContent>\n                <Box display=\"flex\" alignItems=\"center\" justifyContent=\"flex-start\">\n                    <Avatar className={classes.suggestionAvatar} src={account.avatar_url} alt={accountFullName} >{accountInitials}</Avatar>\n                    <Box>\n                        <Typography variant=\"h5\">\n                            {accountFullName}\n                        </Typography>\n\n                        <Typography>\n                            {type === \"never-messaged\" ? translated.firstMessage : type}\n                        </Typography>\n                    </Box>\n                </Box>\n                </CardContent>\n            </Card>\n    );\n};\n\nexport default Suggestion;","import { AccountGetSuggestions } from 'api/commands';\nimport { useCommand } from 'api/hooks';\nimport React, {useRef} from 'react';\nimport { useStore } from 'store/hooks';\nimport { useForkedState } from \"utils/hooks/general\";\nimport { isLoaded } from \"api/utils\";\nimport Suggestion from './Suggestion';\nimport useStyles from \"./styles\";\nimport gsap from 'gsap';\nimport ScrollTrigger from 'gsap/ScrollTrigger';\n\ngsap.registerPlugin(ScrollTrigger);\n\nconst AccountSuggestions = () => {\n    const classes = useStyles();\n    const currentAccount = useStore(state => state.currentAccount ?? null);\n    const scrollRef = useRef(null);\n\n    const suggestionsRq = useCommand(AccountGetSuggestions, currentAccount?.id)\n    const [suggestions] = useForkedState(rq => isLoaded(rq) ? rq.data : null, suggestionsRq);\n\n    return (\n           <section className={classes.root} ref={scrollRef}>\n           {suggestions?.length !== 0 ? suggestions?.map((suggestion:any) => {\n               return (                  \n                        <Suggestion \n                        suggestion={suggestion}  \n                        index={suggestions.indexOf(suggestion)} \n                        key={suggestions.indexOf(suggestion)}   \n                        />\n               )\n           }): null}\n           </section>\n    );\n};\n\nexport default AccountSuggestions;","import { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        justifyContent: \"flex-start\",\n        alignItems: \"center\",\n        margin: \"10px 0\",\n    },\n    image: {\n        width: \"50px\",\n        height: \"50px\",\n        borderRadius: \"50px\",\n        marginRight: \"10px\",\n        boxShadow: \"0px 3px 9px rgba(0, 0, 0, .25)\"\n    }\n}));\n\nexport default useStyles;","import { Avatar } from \"@material-ui/core\";\nimport { AccountInfo } from \"api/commands\";\nimport { useCommand } from \"api/hooks\";\nimport { isLoaded } from \"api/utils\";\nimport React from \"react\";\nimport { useStore } from \"store/hooks\";\nimport { ensureArray, makeFullName, makeInitials } from \"utils/general\";\nimport { useForkedState } from \"utils/hooks/general\";\nimport useStyles from \"./styles\";\n\ntype AccountFavContactsProps = {\n\n}\n\nconst AccountFavContacts = (props: AccountFavContactsProps) => {\n    const classes = useStyles();\n\n    const currentAccount = useStore(state => state.currentAccount ?? null);\n\n\n    return <div className={classes.root}>\n        {\n            ensureArray(currentAccount?.friends)\n                .filter(c => !!c.favorite)\n                .map(c => <AccountContactBadge {...c} />)\n        }\n    </div>\n}\n\ntype AccountContactBadgeProps = {\n    account_id: string;\n    favorite: boolean;\n    last_contacted?: string;\n}\n\nconst AccountContactBadge = (props: AccountContactBadgeProps) => {\n    const classes = useStyles();\n    const accountRq = useCommand(AccountInfo, props.account_id);\n    const [account] = useForkedState(rq => isLoaded(rq) ? rq.data : null, accountRq);\n\n    if (!account || account.flags?.includes(\"needs_init\")) return null; // TODO: Add loader...\n\n    const accountFullName = makeFullName(account.details?.first_name, account.details?.last_name, account.label);\n    const accountInitials = makeInitials(account.details?.first_name, account.details?.last_name, account.label);\n\n    return <Avatar className={classes.image} src={account.avatar_url} alt={accountFullName}>{accountInitials}</Avatar>\n}\n\nexport default AccountFavContacts","import React from \"react\";\nimport { useLittera } from \"react-littera\";\nimport useStyles from \"./styles\";\nimport translations from \"./trans\";\nimport { Typography } from \"@material-ui/core\";\nimport { useStore } from \"store/hooks\";\nimport AccountSuggestions from \"components/common/AccountSugestions\";\nimport AccountFavContacts from \"components/common/AccountFavContacts\";\n\n/**\n * Home page component.\n */\nconst Highlights = () => {\n  const [translated] = useLittera(translations);\n  const classes = useStyles();\n\n  const currentAccount = useStore(state => state.currentAccount);\n\n  return (\n    <div className={classes.root}>\n      <section className={classes.welcomeWraper}>\n        <section className={classes.welcome}>\n          <Typography className={classes.greetings} variant='h2'>{translated.greeting}, {currentAccount?.details?.first_name}!</Typography>\n          <Typography className={classes.suggestionsInfo} variant='h5'>Here are some suggestions for you</Typography>\n        </section>\n      </section>\n      <AccountFavContacts />\n      <AccountSuggestions />\n    </div>\n  );\n};\n\nexport default Highlights;\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ForumIcon from '@material-ui/icons/Forum';\nimport GroupIcon from '@material-ui/icons/Group';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nconst useStyles = makeStyles({\n    root: {\n        bottom: \"0\",\n        position: \"fixed\",\n        width: \"100%\",\n        boxShadow: \"0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)\"\n    },\n  });\n\n  const TABS = [\"highlights\", \"rooms\", \"people\"];\n  \n/**\n *\n * @deprecated or might be used for mobile in the future.\n */\n  const BottomNav = ({visible}:{visible: boolean}) => {\n    const history = useHistory();\n    const location = useLocation();\n    const classes = useStyles();\n    const [value, setValue] = React.useState(TABS.indexOf(location.pathname.split(\"/\")[2]) || 0);\n    if (visible) return null; // Temporarily disable BottomNav.\n    if (!visible) return null;\n\n    return <div>\n\n    <BottomNavigation\n      value={value}\n      onChange={(event, newValue) => {\n        setValue(newValue);\n      }}\n      showLabels\n      className={classes.root}\n    >\n      <BottomNavigationAction onClick={() => history.push(\"/home/highlights\")} label=\"Highlights\" icon={<HomeIcon />} />\n      <BottomNavigationAction onClick={() => history.push(\"/home/rooms\")} label=\"Rooms\" icon={<ForumIcon />} />\n      <BottomNavigationAction onClick={() => history.push(\"/home/people\")} label=\"People\" icon={<GroupIcon />} />\n    </BottomNavigation>\n\n    </div>\n}\n\n\nexport default BottomNav;\n","import React, { useEffect } from 'react';\nimport { Switch, Route, useLocation, useHistory } from \"react-router-dom\";\nimport { Home, Splash, Intro, Login, Signup, Welcome } from 'components/pages';\nimport { Button } from '@material-ui/core';\nimport BottomNav from 'components/common/BottomNav';\n\nconst homeSubpages = [ \"highlights\", \"rooms\", \"people\" ];\n\nfunction Routes() {\n  const history = useHistory();\n  const location = useLocation();\n\n  // Show BottomNav only when on home screen.\n  const bottomNavVisible = new RegExp(homeSubpages.join(\"|\")).test(location.pathname);\n  \n\n  useEffect(() => {\n    if(location.pathname !== \"/\") {\n      history.push({pathname: \"/\", state:{ initialPath: location.pathname }});\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  \n  return (\n        <>\n          <Switch>\n              <Route exact path=\"/\"       component={Splash} />\n              <Route exact path=\"/intro\"  component={Intro} />\n              <Route exact path=\"/signup\"  component={Signup} />\n              <Route exact path=\"/welcome\"  component={Welcome} />\n              <Route exact path=\"/login\"  component={Login} />\n              <Route  path=\"/home\"   component={Home} />\n\n              {/* TODO: Move to a file... */}\n              <Route exact component={() => <div>Error page <br/> <Button variant=\"contained\" onClick={() => history.push(\"/\")}>Reload</Button></div>} />\n          </Switch>\n          <BottomNav visible={bottomNavVisible} />\n        </>\n  );\n}\n\nexport default Routes;\n","import { createMuiTheme } from \"@material-ui/core\";\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: \"#449ee2\"\n        },\n        secondary: {\n            main: \"#99d8ff\"\n        },\n        background: {\n            default: \"#FAFAFA\"\n        }\n    },\n    spacing: 4,\n    overrides: {\n        MuiCssBaseline: {\n            '@global': {\n                html: {\n                    WebkitFontSmoothing: 'auto',\n                },\n            },\n        },\n    },\n});\n\nexport default theme;","import {useState} from \"react\";\n\nconst LOCALES = Object.freeze([ \"en_US\", \"pl_PL\", \"de_DE\" ]);\n\nconst PRESET = Object.freeze({\n    yes: {\n        en_US: \"Yes\",\n        pl_PL: \"Tak\",\n        de_DE: \"Ja\"\n    },\n    no: {\n        en_US: \"No\",\n        pl_PL: \"Nie\",\n        de_DE: \"Nein\"\n    }\n});\n\nexport const useLocale = () => {\n    const [locale, setLocale] = useState(LOCALES[0]);\n\n    return [locale, setLocale, PRESET];\n}","import React, { useState } from \"react\";\nimport { StoreContext, IState, INITIAL_STATE } from \"./context\";\n\n\ntype StoreProviderProps = {\n    children: JSX.Element;\n    initialState?: IState\n}\n\n/**\n * React component providing Store context.\n */\nconst StoreProvider = ({ children, initialState }: StoreProviderProps) => {\n    const [value, setValue] = useState<IState>(initialState ?? INITIAL_STATE);\n\n    return <StoreContext.Provider value={[value, setValue]}>\n        {children}\n    </StoreContext.Provider>\n}\n\nexport default StoreProvider;","import React from 'react';\nimport { CssBaseline, ThemeProvider } from \"@material-ui/core\";\nimport LitteraProvider from \"react-littera\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport Routes from './Routes';\nimport theme from \"./config/theme\";\nimport { useLocale } from './utils/hooks/locale';\nimport StoreProvider from 'store/StoreProvider';\nimport { SnackbarProvider } from 'notistack';\n\n\nfunction App() {\n  const [language, setLanguage, preset] = useLocale();\n\n  return (\n    <StoreProvider>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <LitteraProvider language={language} setLanguage={setLanguage} preset={preset}>\n          <SnackbarProvider maxSnack={3}>\n            <Router basename={process.env.REACT_APP_BASENAME ?? \"/\"}>\n              <Routes />\n            </Router>\n          </SnackbarProvider>\n        </LitteraProvider>\n      </ThemeProvider>\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"./config/firebase\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n\n\nif (\"serviceWorker\" in navigator) {\n  navigator.serviceWorker\n    .register(\"./firebase-messaging-sw.js\")\n    .then(function(registration) {\n      console.log(\"Registration successful, scope is:\", registration.scope);\n    })\n    .catch(function(err) {\n      console.log(\"Service worker registration failed, error:\", err);\n    });\n}"],"sourceRoot":""}