(this["webpackJsonpcircles-web"]=this["webpackJsonpcircles-web"]||[]).push([[0],{249:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),r=n.n(i),o=n(16),c=n.n(o),s=n(7),l=n(309),u=n(310),d=n(19),p=n.n(d),j=n(29),b=n(21),h=n(9),v=n.n(h),f=n(15),x=n.p+"static/media/circles-logo.420d4698.svg",m=n(284),g=Object(m.a)((function(e){return{root:{backgroundColor:e.palette.background.paper},logo:{width:"300px",height:"300px"}}})),O=n(18),w=function(e){var t,n=function(e){for(var t=Object(O.a)({},e),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r in t)a.includes(r)&&delete t[r];return t}(e,"children","className"),a=Object.freeze(Object(O.a)(Object(O.a)({display:"flex"},n),e.style)),i=null!==(t=e.rootComponent)&&void 0!==t?t:r.a.createElement("div");return r.a.cloneElement(i,{onClick:e.onClick,style:a,className:e.className,children:e.children})},y=Object.freeze({currentAccount:void 0,preferences:{backgroundTheme:null}}),k=r.a.createContext([y,function(){}]),_=function(e){var t=Object(i.useContext)(k);return Object(i.useMemo)((function(){return e(t[0])}),[t,e])},C=function(){var e=Object(i.useContext)(k);return Object(i.useRef)((function(t){console.log("\ud83d\udcc1",t.type,"=>",t.payload),function(e,t){e((function(e){var n={};switch(t.type){case"SET_CURRENT_ACCOUNT":n.currentAccount=Object(O.a)({},t.payload);break;case"SET_BACKGROUND_THEME":n.preferences||(n.preferences={}),n.preferences.backgroundTheme=Object(O.a)({},t.payload)}return Object(O.a)(Object(O.a)({},e),n)}))}(e[1],t)})).current},S=function(e,t){localStorage.setItem(e,t)},N=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=Object(i.useRef)(null),o=R();if(null===r.current){var c=e.apply(void 0,n),s=function(e){r.current[0]=e,o()};r.current=[c,s]}return Object(i.useEffect)((function(){var t=e.apply(void 0,n);r.current[0]!==t&&r.current[1](t)}),[e,n]),r.current},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/home",n=Object(b.f)();Object(i.useEffect)((function(){e&&n.push(t)}),[e,t,n])},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=_((function(e){return e.currentAccount}));I(!!t,e)},R=function(){var e=Object(i.useState)(),t=Object(s.a)(e,2)[1];return Object(i.useCallback)((function(){return t({})}),[])},E=function(){var e=R();return Object(i.useRef)((function(t,n){void 0===n||null===n?function(e){localStorage.removeItem(e)}(t):S(t,n),e()})).current},W=n(59),A=n(34),L=n(35),T=n(38),U=n(39),D=function(){function e(t){Object(A.a)(this,e),this.url=void 0,this.url=t}return Object(L.a)(e,[{key:"makeArguments",value:function(e){return Object.entries(e).map((function(e){return"".concat(e[0],"=").concat("object"===typeof e[1]?JSON.stringify(e[1]):e[1])})).join("&")}},{key:"execute",value:function(e){var t=this;return new Promise((function(n,a){var i=!1,r=e.exec[0],o=t.makeArguments(e.exec[1]),c="".concat(t.url).concat(r,"?").concat(o),s=new Headers({"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"});fetch(c,{mode:"cors",headers:s}).then((function(e){return e.json()})).then((function(e){if(!i){i=!0;var t=e;console.log("\ud83d\udcf6",r,"=>",t),n(t)}})).catch(a)}))}}]),e}(),B=function(){function e(t){Object(A.a)(this,e),this.exec=void 0,this.status=void 0,this.exec=t,this.status=0}return Object(L.a)(e,[{key:"parse",value:function(e,t){return t}}]),e}(),z=function(e){return null!==e&&102!==e.status},M=function(e){return e.toString().replace(/,/g,", ")},F=function(e,t){var n=typeof t;"object"===n&&(null===t?n="null":Array.isArray(t)&&(n="array"));for(var a=arguments.length,i=new Array(a>2?a-2:0),r=2;r<a;r++)i[r-2]=arguments[r];if(!i.includes(n))throw new Error("Expected ".concat(M(i)," for ").concat(e,", got ").concat(typeof t));return t},H=function(e,t){for(var n=e[t],a=arguments.length,i=new Array(a>2?a-2:0),r=2;r<a;r++)i[r-2]=arguments[r];return F.apply(void 0,[t,n].concat(i)),n},G=function(e){Object(T.a)(n,e);var t=Object(U.a)(n);function n(e,a,i,r){var o;return Object(A.a)(this,n),o=t.call(this,["account-accountInfo",{account_id:e,flags:!!a,rooms:!!i,friends:!!r}]),F("account_id",e,"string"),F("flags",a,"boolean","undefined"),F("rooms",i,"boolean","undefined"),F("friends",r,"boolean","undefined"),o}return Object(L.a)(n,[{key:"parse",value:function(e,t){return 200!==e?t:(F("data",t,"object"),H(t,"id","string"),H(t,"label","string"),H(t,"created_at","string"),H(t,"avatar_url","string","undefined"),H(t,"contact","object"),t.contact&&H(t.contact,"email","string"),H(t,"details","object"),H(t,"flags","object","undefined"),H(t,"friends","array","undefined"),H(t,"rooms","array","undefined"),Object(O.a)(Object(O.a)({},t),{},{created_at:new Date(t.created_at)}))}}]),n}(B),q=function(e){Object(T.a)(n,e);var t=Object(U.a)(n);function n(e,a){return Object(A.a)(this,n),t.call(this,["account-accountChange",{account_id:e,changes:JSON.stringify(a)}])}return Object(L.a)(n,[{key:"parse",value:function(e,t){return t}}]),n}(B),V=function(e){Object(T.a)(n,e);var t=Object(U.a)(n);function n(e,a){var i;return Object(A.a)(this,n),i=t.call(this,["account-accountList",{volume:a,included:e}]),F("volume",a,"number","undefined"),F("included",e,"array","undefined"),i}return Object(L.a)(n,[{key:"parse",value:function(e,t){return t}}]),n}(B),J=function(e){Object(T.a)(n,e);var t=Object(U.a)(n);function n(e){return Object(A.a)(this,n),t.call(this,["account-accountLogin",{token:e}])}return Object(L.a)(n,[{key:"parse",value:function(e,t){return t}}]),n}(B),K=function(e){Object(T.a)(n,e);var t=Object(U.a)(n);function n(e,a){return Object(A.a)(this,n),t.call(this,["room-roomInfo",{room_id:e,accounts:a}])}return Object(L.a)(n,[{key:"parse",value:function(e,t){return t}}]),n}(B),Y=function(e){Object(T.a)(n,e);var t=Object(U.a)(n);function n(e,a,i){return Object(A.a)(this,n),t.call(this,["room-roomCreate",{label:a,invite:[].concat(Object(W.a)(i),[e])}])}return Object(L.a)(n,[{key:"parse",value:function(e,t){return t}}]),n}(B),Z=function(e){Object(T.a)(n,e);var t=Object(U.a)(n);function n(e){return Object(A.a)(this,n),t.call(this,["account-accountGetSuggestions",{account_id:e}])}return Object(L.a)(n,[{key:"parse",value:function(e,t){return t}}]),n}(B),Q={host_url:"https://us-central1-ping-82fee.cloudfunctions.net/"},X=new D(Q.host_url),$=function(e){return{type:"SET_CURRENT_ACCOUNT",payload:e}},ee=function(){var e=Object(f.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.execute(new G(t,!0,!0,!0));case 2:return n=e.sent,a=n.data,e.abrupt("return",{type:"SET_CURRENT_ACCOUNT",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){return{type:"SET_BACKGROUND_THEME",payload:e}},ne=n(113),ae=new D(Q.host_url),ie=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=Object(i.useRef)(null),o=R();return Object(i.useEffect)((function(){r.current={status:102},function(){var t=Object(f.a)(v.a.mark((function t(){var a,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n||[],t.next=3,ae.execute(Object(ne.a)(e,Object(W.a)(a)));case 3:i=t.sent,r.current=i,o();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]),r.current},re=function(){var e=Object(i.useRef)(null),t=R();if(null===e.current){var n=function(){var e=Object(f.a)(v.a.mark((function e(n){var a,i,r,o,c,s=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=s.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=s[r];return o=i||[],e.next=4,ae.execute(Object(ne.a)(n,o));case 4:return c=e.sent,t(),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.current=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return n.apply(void 0,[e].concat(a))}}return e.current},oe=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,r=_((function(e){return e.currentAccount})),o=Object(i.useRef)(e?void 0:null!==r&&void 0!==r?r:void 0),c=C(),s=re(),l=R();return Object(i.useEffect)((function(){var t=function(){var t=Object(f.a)(v.a.mark((function t(){var i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(G,e||(null===r||void 0===r?void 0:r.id),null===a||void 0===a?void 0:a.flags,null===a||void 0===a?void 0:a.rooms,null===a||void 0===a?void 0:a.contacts);case 2:200===(i=t.sent).status&&(o.current=i.data,n&&c($(i.data)),l());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(e||(null===r||void 0===r?void 0:r.id))&&t()}),[e]),null!==(t=o.current)&&void 0!==t?t:null},ce=function(e,t){var n,a=Object(i.useRef)(),r=re(),o=R();return Object(i.useEffect)((function(){e&&function(){var n=Object(f.a)(v.a.mark((function n(){var i;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(K,e,!!t);case 2:200===(i=n.sent).status&&(a.current=i.data,o());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e]),null!==(n=a.current)&&void 0!==n?n:null},se=n(27),le=n.n(se),ue=n(97),de=[{id:"1103088",label:"One color",url:"https://source.unsplash.com/collection/1103088/"},{id:"1971015",label:"Simplicity",url:"https://source.unsplash.com/collection/1971015/"},{id:"1426076",label:"Pastel & Sparkle",url:"https://source.unsplash.com/collection/1426076/"},{id:"1111575",label:"Space",url:"https://source.unsplash.com/collection/1111575/"},{id:"1922729",label:"From above",url:"https://source.unsplash.com/collection/1922729/"}],pe=function(){var e=Object(b.f)(),t=e.location.state,n=g(),r=C(),o=re(),c=Object(ue.b)().enqueueSnackbar,s=function(e){return e.accountIdToken}(localStorage);return Object(i.useEffect)((function(){s?function(){var n=Object(f.a)(v.a.mark((function n(){var a,i,l,u,d,p,j,b,h,x,m;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(J,s);case 2:if(i=n.sent,!(l=null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.account_id)){n.next=11;break}return n.next=7,o(G,l,!0,!0,!0);case 7:200===(u=n.sent).status?(r($(u.data)),b=localStorage.getItem("background-theme")||"1922729",h=null!==(d=de.find((function(e){return e.id.toString()===b.toString()})))&&void 0!==d?d:de[0],r(te(h)),(null===(p=u.data)||void 0===p||null===(j=p.flags)||void 0===j?void 0:j.includes("needs_init"))?e.push("/welcome"):((m=null===le.a||void 0===le.a?void 0:le.a.messaging())&&u.data&&(null===m||void 0===m||m.requestPermission().then(Object(f.a)(v.a.mark((function e(){var t,n,a,i,r,c,s,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getToken();case 2:if(i=e.sent,(null===(t=u.data)||void 0===t?void 0:t.tokens)&&(null===(n=u.data)||void 0===n||null===(a=n.tokens)||void 0===a?void 0:a.includes(i))){e.next=8;break}return(l=null!==(r=null===(c=u.data)||void 0===c?void 0:c.tokens)&&void 0!==r?r:[]).push(i),e.next=8,o(q,null===(s=u.data)||void 0===s?void 0:s.id,{tokens:l});case 8:console.log(i);case 9:case"end":return e.stop()}}),e)})))).catch((function(e){console.log("Unable to get permission to notify.",e)})),navigator.serviceWorker.addEventListener("message",(function(e){var t,n,a;c(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t["firebase-messaging-msg-data"])||void 0===n||null===(a=n.notification)||void 0===a?void 0:a.body),console.log(e)}))),e.push(null!==(x=null===t||void 0===t?void 0:t.initialPath)&&void 0!==x?x:"/home"))):e.push("/intro"),n.next=12;break;case 11:e.push("/intro");case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()():e.push("/intro")}),[]),Object(a.jsx)(w,{alignItems:"center",justifyContent:"center",width:"100%",height:"100vh",className:n.root,children:Object(a.jsx)("img",{src:x,alt:"logo",className:n.logo})})},je=Object(m.a)((function(e){return{root:{},introViewRoot:{maxWidth:e.breakpoints.values.md,margin:"0 auto"},introViewContentWrapper:{maxWidth:"60%",marginTop:"5%"}}})),be=function(e){return{title:{en_US:"Intro",pl_PL:"Intro",de_DE:"Intro"},firstTitle:{en_US:"Welcome to safe chat!",pl_PL:"Pierwszy Part",de_DE:"Erstes Part"},secondTitle:{en_US:"Available everywhere",pl_PL:"Drugi Part",de_DE:"Zweiten Part"},thirdTitle:{en_US:"Reliable and Stable",pl_PL:"Trzeci Part",de_DE:"Dreien Part"},yes:e.yes}},he=n(69),ve=n(287),fe=n(33),xe=n(288),me=function(e){var t=e.activePart;return Object(a.jsxs)(w,{justifyContent:"center",alignItems:"center",children:[Object(a.jsx)(ge,{active:t>=0}),Object(a.jsx)(ge,{active:t>=1}),Object(a.jsx)(ge,{active:t>=2})]})},ge=function(e){var t=e.active,n=Object(fe.a)();return Object(a.jsx)(xe.a,{style:{opacity:t?1:.15,fontSize:"14px",color:t?n.palette.primary.main:"#000"},children:"lens"})},Oe=function(e){var t=je();if(e.activePart!==e.partId)return null;var n=0===e.partId?"Skip":"Back",i=2===e.partId?"Continue":"Next";return Object(a.jsx)("div",{className:t.introViewRoot,style:{height:"100vh"},children:Object(a.jsxs)(w,{flexDirection:"column",alignItems:"center",justifyContent:"space-between",children:[Object(a.jsxs)(w,{flexDirection:"column",height:"90vh",alignItems:"center",justifyContent:"center",children:[Object(a.jsx)(w,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:e.image,alt:e.title,style:{maxWidth:"300px",height:"auto"}})}),Object(a.jsxs)(w,{className:t.introViewContentWrapper,alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(a.jsx)(he.a,{variant:"h2",children:e.title}),Object(a.jsx)(he.a,{align:"center",paragraph:!0,children:e.description})]})]}),Object(a.jsxs)(w,{justifyContent:"space-evenly",height:"10vh",alignItems:"center",width:"60%",children:[Object(a.jsx)(ve.a,{onClick:e.onPrev,children:n}),Object(a.jsx)(me,{activePart:e.activePart}),Object(a.jsx)(ve.a,{variant:"contained",color:"primary",onClick:e.onNext,children:i})]})]})})},we=n.p+"static/media/intro00.6588dfdc.svg",ye=n.p+"static/media/intro01.1025310d.svg",ke=n.p+"static/media/intro02.819f31a9.svg",_e=function(){var e=Object(b.f)(),t=Object(d.useLittera)(be),n=Object(s.a)(t,1)[0],r=je(),o=Object(i.useState)(0),c=Object(s.a)(o,2),l=c[0],u=c[1],p=Object(i.useCallback)((function(){u((function(t){return 2===t?(e.push("/login"),t):t+1}))}),[u,e]),j=Object(i.useCallback)((function(){u((function(t){return 0===t?(e.push("/login"),t):t-1}))}),[u,e]);return Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)(Oe,{activePart:l,partId:0,onNext:p,onPrev:j,image:we,title:n.firstTitle,description:"Sunt labore do deserunt consectetur fugiat. Eu dolor laborum elit non id amet Lorem aliqua velit. Elit in cillum elit magna incididunt esse."}),Object(a.jsx)(Oe,{activePart:l,partId:1,onNext:p,onPrev:j,image:ye,title:n.secondTitle,description:"Sunt labore do deserunt consectetur fugiat. Eu dolor laborum elit non id amet Lorem aliqua velit. Elit in cillum elit magna incididunt esse."}),Object(a.jsx)(Oe,{activePart:l,partId:2,onNext:p,onPrev:j,image:ke,title:n.thirdTitle,description:"Sunt labore do deserunt consectetur fugiat. Eu dolor laborum elit non id amet Lorem aliqua velit. Elit in cillum elit magna incididunt esse."})]})},Ce=n(17),Se=Object(m.a)((function(e){return{root:Object(Ce.a)({minHeight:"calc(100vh - (300px + 42px))",alignItems:"center"},e.breakpoints.up("sm"),{minHeight:"calc(100vh - (350px + 42px))",alignItems:"flex-start"}),container:{maxWidth:e.breakpoints.values.md,width:"100%",padding:"0 ".concat(e.spacing(4),"px")},inputWrapper:{},loginImage:Object(Ce.a)({width:"auto",height:"240px",position:"absolute",right:"2%",bottom:"0px"},e.breakpoints.up("sm"),{height:"310px",bottom:"5px"}),imgContainer:Object(Ce.a)({height:"300px",position:"relative",overflow:"hidden",background:"linear-gradient(to top left, ".concat(e.palette.primary.dark,", ").concat(e.palette.primary.main,")")},e.breakpoints.up("sm"),{height:"350px"}),wave:{position:"absolute",zIndex:5,bottom:"-10%",left:"-1%",width:"102%",height:"auto"},footerWrapper:{maxWidth:e.breakpoints.values.md,margin:"0 auto",padding:"0 ".concat(e.spacing(4),"px")}}})),Ne=function(e){return{title:{en_US:"Sign in",pl_PL:"B\u0105d\u017a w kontakcie!",de_DE:"Stayen ins Touchejen"},yes:e.yes}},Ie=n(311),Pe=n(293),Re=n(147),Ee=n(294),We=n.p+"static/media/verifed.465bf5bf.svg",Ae=n.p+"static/media/wave.f70c3bfc.svg",Le=(n(170),n(172),n(250),se.initializeApp({apiKey:"AIzaSyA_AUH-zsM6ecOoWFeEKdYRQ-w64nWz3zA",authDomain:"ping-82fee.firebaseapp.com",databaseURL:"https://ping-82fee.firebaseio.com",projectId:"ping-82fee",storageBucket:"ping-82fee.appspot.com",messagingSenderId:"262343699619",appId:"1:262343699619:web:9b197e44a89eb579376316",measurementId:"G-Q9S8PDHJDP"})),Te=(Le.database(),Le.auth(),Le.messaging());Te.usePublicVapidKey("BFpEHR0UHDMxqVkWLbe884ukhegFUVl-SPUGpDaG2PG9BaQMr5BmNeq3BAyzMfqMD-kiJV-dwQKEDcubgNMRozw");var Ue=function(){var e=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=new se.auth.GoogleAuthProvider;n.addScope("https://www.googleapis.com/auth/contacts.readonly"),se.auth().signInWithPopup(n).then((function(t){Be(),e(t)})).catch((function(e){var n=e.code,a=e.message;console.log("\ud83d\udd12 Authorization =>",n,a),t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(f.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){se.auth().signInWithEmailAndPassword(t,n).then((function(t){Be(),e(t)})).catch((function(e){var t=e.code,n=e.message;console.log("\ud83d\udd12 Authorization =>",t,n),a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e,t,n=null!==(e=null===(t=se.auth())||void 0===t?void 0:t.currentUser)&&void 0!==e?e:null;n&&n.getIdToken(!0).then((function(e){console.log(e),S("accountIdToken",e)})).catch((function(e){var t=e.code,n=e.message;console.log("\ud83d\udd12 Authorization =>",t,n)}))},ze=function(){var e=Object(f.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){se.auth().createUserWithEmailAndPassword(t,n).then((function(t){e(t)})).catch((function(e){var t=e.code,n=e.message;console.log("\ud83d\udd12 Authorization =>",t,n),a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(){var e=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){se.auth().signOut().then((function(t){e(t)})).catch((function(e){var n=e.code,a=e.message;console.log("\ud83d\udd12 Authorization =>",n,a),t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=n(313),He=n(292),Ge=function(){var e=Object(b.f)(),t=Object(d.useLittera)(Ne),n=Object(s.a)(t,1)[0],r=Se(),o=re(),c=C(),l=Object(i.useState)(""),u=Object(s.a)(l,2),p=u[0],j=u[1],h=Object(i.useState)(""),x=Object(s.a)(h,2),m=x[0],g=x[1],O=Object(i.useState)(""),y=Object(s.a)(O,2),k=y[0],_=y[1],S=Object(i.useState)(!1),N=Object(s.a)(S,2),I=N[0],R=N[1];P();var E=function(){var t=Object(f.a)(v.a.mark((function t(n){var a,i,r,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(G,(null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.uid)||"",!0);case 2:200===(i=t.sent).status?(c($(i.data)),(null===(r=i.data)||void 0===r||null===(s=r.flags)||void 0===s?void 0:s.includes("needs_init"))?e.push("/welcome"):e.push("/home")):404===i.status&&_("Account not found!"),0!==i.status&&R(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=function(e){return function(t){var n,a,i=null!==(n=null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.value)&&void 0!==n?n:"";I||("email"===e&&j(i),"password"===e&&g(i))}};return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsxs)("div",{className:r.imgContainer,children:[Object(a.jsx)("img",{className:r.loginImage,src:We,alt:"loginImage"}),Object(a.jsx)("img",{className:r.wave,src:Ae,alt:""})]}),Object(a.jsx)(w,{justifyContent:"center",width:"100%",className:r.root,children:Object(a.jsxs)("div",{className:r.container,children:[Object(a.jsx)(he.a,{variant:"h3",paragraph:!0,children:n.title}),Object(a.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),_(""),R(!0),I)||De(p,m).then(E).catch((function(e){_(e.message),R(!1)}))},children:[Object(a.jsxs)(w,{className:r.inputWrapper,flexDirection:"column",children:[Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"email-input",value:p,onChange:W("email"),type:"email",label:"E-Mail",variant:"outlined"}),Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"password-input",value:m,onChange:W("password"),type:"password",label:"Password",variant:"outlined"})]}),k&&Object(a.jsxs)(Fe.a,{style:{margin:"10px 0"},severity:"error",children:[Object(a.jsx)(He.a,{children:"Upps..."}),k]}),Object(a.jsxs)(w,{justifyContent:"space-between",children:[Object(a.jsx)(ve.a,{onClick:function(){e.push("/signup")},color:"primary",type:"button",children:"Sign Up"}),Object(a.jsx)(Pe.a,{color:"primary","aria-label":"add",type:"submit",children:Object(a.jsx)(xe.a,{style:{color:"white"},children:"keyboard_arrow_right"})})]})]}),Object(a.jsx)(ve.a,{onClick:function(){_(""),R(!0),Ue().then(E).catch((function(e){_(e.message),R(!1)}))},type:"button",children:"Login with Google!"})]})}),Object(a.jsx)(w,{className:r.footerWrapper,alignItems:"center",justifyContent:"flex-end",height:"42px",children:Object(a.jsx)(he.a,{align:"right",children:"Forgot password?"})}),I?Object(a.jsx)(Re.a,{open:!0,style:{zIndex:5},children:Object(a.jsx)(Ee.a,{color:"primary"})}):null]})},qe=Object(m.a)((function(e){return{root:Object(Ce.a)({minHeight:"calc(100vh - (300px + 42px))",alignItems:"center"},e.breakpoints.up("sm"),{minHeight:"calc(100vh - (350px + 42px))",alignItems:"flex-start"}),container:{maxWidth:e.breakpoints.values.md,width:"100%",padding:"0 ".concat(e.spacing(4),"px")},inputWrapper:{},signImage:Object(Ce.a)({width:"auto",height:"240px",position:"absolute",right:"2%",bottom:"0px"},e.breakpoints.up("sm"),{height:"310px",bottom:"5px"}),imgContainer:Object(Ce.a)({height:"300px",position:"relative",overflow:"hidden",background:"linear-gradient(to top left, ".concat(e.palette.primary.dark,", ").concat(e.palette.primary.main,")")},e.breakpoints.up("sm"),{height:"350px"}),wave:{position:"absolute",zIndex:5,bottom:"-10%",left:"-1%",width:"102%",height:"auto"},footerWrapper:{maxWidth:e.breakpoints.values.md,margin:"0 auto",padding:"0 ".concat(e.spacing(4),"px")}}})),Ve=function(e){return{title:{en_US:"Sign up",pl_PL:"B\u0105d\u017a w kontakcie!",de_DE:"Stayen ins Touchejen"},yes:e.yes}},Je=n.p+"static/media/celebration.9e01a526.svg",Ke=function(){var e=Object(b.f)(),t=Object(d.useLittera)(Ve),n=Object(s.a)(t,1)[0],r=qe(),o=E(),c=Object(i.useState)(""),l=Object(s.a)(c,2),u=l[0],p=l[1],j=Object(i.useState)(""),h=Object(s.a)(j,2),x=h[0],m=h[1],g=Object(i.useState)(""),O=Object(s.a)(g,2),y=O[0],k=O[1],_=Object(i.useState)(""),C=Object(s.a)(_,2),S=C[0],N=C[1],I=Object(i.useState)(!1),R=Object(s.a)(I,2),W=R[0],A=R[1];P();var L=function(e){return function(t){var n,a,i=null!==(n=null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.value)&&void 0!==n?n:"";W||("email"===e&&p(i),"password"===e&&m(i),"password-confirm"===e&&k(i))}};return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsxs)("div",{className:r.imgContainer,children:[Object(a.jsx)("img",{className:r.signImage,src:Je,alt:"signImage"}),Object(a.jsx)("img",{className:r.wave,src:Ae,alt:""})]}),Object(a.jsx)(w,{justifyContent:"center",width:"100%",className:r.root,children:Object(a.jsxs)("div",{className:r.container,children:[Object(a.jsx)(he.a,{variant:"h3",paragraph:!0,children:n.title}),Object(a.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),N(""),A(!0),!W){var n=u,a=x;if(y!==a)return N("Passwords are not identical."),void A(!1);if(a.length<13)return N("Password is too short."),void A(!1);ze(n,a).then(function(){var t=Object(f.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Result =>",n),(null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.uid)&&o("accountIdToken",n.user.uid),e.push("/welcome");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){N(e.message),A(!1)}))}},children:[Object(a.jsxs)(w,{className:r.inputWrapper,flexDirection:"column",children:[Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"email-input",value:u,onChange:L("email"),type:"email",label:"E-mail",variant:"outlined"}),Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"password-input",value:x,onChange:L("password"),type:"password",label:"Password",variant:"outlined"}),Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"confirm-password-input",value:y,onChange:L("password-confirm"),type:"password",label:"Confirm password",variant:"outlined"})]}),S&&Object(a.jsxs)(Fe.a,{style:{margin:"10px 0"},severity:"error",children:[Object(a.jsx)(He.a,{children:"Upps..."}),S]}),Object(a.jsxs)(w,{justifyContent:"space-between",children:[Object(a.jsx)(ve.a,{onClick:function(){e.push("/login")},color:"primary",type:"button",children:"Login"}),Object(a.jsx)(Pe.a,{color:"primary","aria-label":"add",type:"submit",children:Object(a.jsx)(xe.a,{style:{color:"white"},children:"keyboard_arrow_right"})})]})]})]})}),Object(a.jsx)(w,{className:r.footerWrapper,alignItems:"center",justifyContent:"flex-end",height:"42px",children:Object(a.jsx)(he.a,{align:"right"})}),W?Object(a.jsx)(Re.a,{open:!0,style:{zIndex:5},children:Object(a.jsx)(Ee.a,{color:"primary"})}):null]})},Ye=Object(m.a)((function(e){return{root:{position:"relative",maxWidth:e.breakpoints.values.md,margin:"0 auto",padding:"0 ".concat(e.spacing(4))},inputWrapper:{},wave:{position:"absolute",zIndex:5,bottom:"-10%",left:"-1%",width:"102%",height:"auto"},personalImage:Object(Ce.a)({width:"auto",height:"240px",position:"absolute",right:"2%",bottom:"0px"},e.breakpoints.up("sm"),{height:"310px",bottom:"5px"}),imgContainer:Object(Ce.a)({height:"300px",position:"relative",overflow:"hidden",background:"linear-gradient(to top left, ".concat(e.palette.primary.dark,", ").concat(e.palette.primary.main,")")},e.breakpoints.up("sm"),{height:"350px"}),welcomeTitle:{color:e.palette.primary.main}}})),Ze=function(e){return{title:{en_US:"Welcome,",pl_PL:"Witamy",de_DE:"Willkommen"},yes:e.yes}},Qe=n.p+"static/media/personal.ebfa5829.svg",Xe=function(){var e,t,n,r,o,c,l,u,p,j,h,x=Object(b.f)(),m=Object(d.useLittera)(Ze),g=Object(s.a)(m,1)[0],O=Ye(),y=C(),k=re(),S=_((function(e){return e.currentAccount})),N=Object(i.useState)(null!==(e=null===S||void 0===S?void 0:S.label)&&void 0!==e?e:""),I=Object(s.a)(N,2),P=I[0],R=I[1],E=Object(i.useState)(null!==(t=null===S||void 0===S||null===(n=S.details)||void 0===n?void 0:n.first_name)&&void 0!==t?t:""),W=Object(s.a)(E,2),A=W[0],L=W[1],T=Object(i.useState)(null!==(r=null===S||void 0===S||null===(o=S.details)||void 0===o?void 0:o.middle_name)&&void 0!==r?r:""),U=Object(s.a)(T,2),D=U[0],B=U[1],z=Object(i.useState)(null!==(c=null===S||void 0===S||null===(l=S.details)||void 0===l?void 0:l.last_name)&&void 0!==c?c:""),M=Object(s.a)(z,2),F=M[0],H=M[1],V=Object(i.useState)(null!==(u=null===S||void 0===S||null===(p=S.details)||void 0===p?void 0:p.birthdate)&&void 0!==u?u:new Date),J=Object(s.a)(V,2),K=J[0],Y=J[1],Z=Object(i.useState)(null!==(j=null===S||void 0===S||null===(h=S.details)||void 0===h?void 0:h.sex)&&void 0!==j?j:"O"),Q=Object(s.a)(Z,2),X=Q[0],ee=Q[1],te=function(e){var t,n,a,i,r=null!==(t=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.id)&&void 0!==t?t:"",o=null!==(a=null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)&&void 0!==a?a:"";switch(r){case"label":R(o);break;case"first_name":L(o);break;case"middle_name":B(o);break;case"last_name":H(o);break;case"birthday":Y(o);break;case"sex":ee(o)}},ne=function(){var e=Object(f.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(P&&A&&D&&F&&K&&X)){e.next=12;break}return e.next=3,k(q,(null===S||void 0===S?void 0:S.id)||"",JSON.parse(JSON.stringify({label:P,details:{first_name:A,middle_name:D,last_name:F,birthdate:K.toString(),sex:X}})));case 3:if(204!==e.sent.status){e.next=10;break}return e.next=7,k(G,(null===S||void 0===S?void 0:S.id)||"",!0);case 7:200===(t=e.sent).status&&y($(t.data)),x.push("/home");case 10:e.next=13;break;case 12:alert("Implement error handling!");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:O.imgContainer,children:[Object(a.jsx)("img",{className:O.personalImage,src:Qe,alt:"PersonalInformation"}),Object(a.jsx)("img",{className:O.wave,src:Ae,alt:"wave"})]}),Object(a.jsxs)("div",{className:O.root,children:[Object(a.jsxs)(he.a,{className:O.welcomeTitle,variant:"h2",children:[g.title," ",null===S||void 0===S?void 0:S.label]}),Object(a.jsx)(he.a,{style:{opacity:"0.7",marginBottom:"35px"},paragraph:!0,children:"Here you need to provide us with some data about you. Name, Surname etc."}),Object(a.jsx)(he.a,{style:{paddingBottom:"16px"},variant:"h4",children:"Personal information"}),Object(a.jsxs)(w,{flexDirection:"column",className:O.inputWrapper,children:[Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"label",label:"Label",variant:"outlined",value:P,onChange:te}),Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"first_name",label:"First Name",variant:"outlined",value:A,onChange:te}),Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"middle_name",label:"Middle Name",helperText:"Optional",variant:"outlined",value:D,onChange:te}),Object(a.jsx)(Ie.a,{style:{marginBottom:"15px"},id:"last_name",label:"Last Name",variant:"outlined",value:F,onChange:te}),Object(a.jsx)(Ie.a,{id:"birthday",label:"Birthday",type:"date",defaultValue:"1990-01-01",InputLabelProps:{shrink:!0},value:K,onChange:te})]}),Object(a.jsx)(ve.a,{style:{color:"white",float:"right",marginBottom:"15px"},variant:"contained",color:"primary",onClick:ne,children:"Save"})]})]})},$e=n(312),et=n(255),tt=n(299),nt=n(295),at=n(296),it=n(297),rt=n(298),ot=Object(m.a)((function(e){return{root:{}}}));function ct(e){return Array.isArray(e)?e:[]}function st(e,t,n){return e&&t?"".concat(e[0]).concat(t[0]).toUpperCase():n[0].toUpperCase()}function lt(e,t,n){return e&&t?"".concat(ut(e)," ").concat(ut(t)):n}var ut=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1,e.length).toLowerCase())},dt=function(e){var t,n,i,r,o,c=e.account,s=e.onClick,l=e.selected,u=lt(null===(t=c.details)||void 0===t?void 0:t.first_name,null===(n=c.details)||void 0===n?void 0:n.last_name,c.label),d=st(null===(i=c.details)||void 0===i?void 0:i.first_name,null===(r=c.details)||void 0===r?void 0:r.last_name,c.label);return Object(a.jsxs)(w,{style:{paddingTop:"12px",cursor:"pointer"},onClick:function(){s(c.id)},justifyContent:"flex-start",alignItems:"center",children:[Object(a.jsx)(et.a,{style:{width:"54px",height:"54px",backgroundColor:l?"green":void 0},alt:u,src:l?void 0:c.avatar_url,children:l?Object(a.jsx)(xe.a,{children:"check"}):d}),Object(a.jsxs)("div",{style:{margin:"0 0 0 20px"},children:[Object(a.jsx)(he.a,{style:{margin:"0"},variant:"h6",children:u}),Object(a.jsx)(he.a,{style:{margin:"0",opacity:".6"},children:null===(o=c.contact)||void 0===o?void 0:o.email})]})]})},pt=function(e){var t,n=ot(),r=_((function(e){return e.currentAccount})),o=ie(V,null===r||void 0===r||null===(t=r.friends)||void 0===t?void 0:t.map((function(e){return e.account_id}))),c=N((function(e){return z(e)?e.data:null}),o),l=Object(s.a)(c,1)[0];Object(i.useEffect)((function(){e.onChange((function(e){return[]}))}),[]);return l?Object(a.jsx)("div",{className:n.root,style:e.style,children:l.map((function(t){return Object(a.jsx)(dt,{account:t,onClick:function(t){return function(t){e.disabled||e.onChange((function(n){if(e.multiple&&Array.isArray(n)){var a=Object(W.a)(n);return a.includes(t)?a.splice(n.indexOf(t),1):a.push(t),Object(W.a)(a)}return n===t?"":t}))}(t)},selected:e.value.includes(t.id)},t.id)}))}):Object(a.jsx)(w,{width:"100%",height:"60px",alignItems:"center",justifyContent:"center",children:Object(a.jsx)(Ee.a,{})})},jt=function(e){return{conversation:{en_US:"New conversation",pl_PL:"Nowa rozmowa",de_DE:"Hallo!"},createRoom:{en_US:"Create room",pl_PL:"Stw\xf3rz pok\xf3j!",de_DE:"Hallo!"},invite:{en_US:"Invite Friends",pl_PL:"Zapro\u015b znajomych",de_DE:"Hallo!"},select:{en_US:"Select a Friend",pl_PL:"Wybierz znajomych",de_DE:"Hallo!"},selected:{en_US:"Selected",pl_PL:"Wybrano",de_DE:"Hallo!"},yes:e.yes}},bt=Object(m.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},topMenu:{display:"flex"},listWrapper:{position:"relative",overflowY:"scroll",width:"100%",height:"calc(100% - 100px)"},roomWrapper:{position:"relative",margin:"auto 10px auto 0",width:"385px",backgroundColor:"#fff",boxShadow:"7px 11px 15px rgba(0, 0, 0, .25)",borderRadius:"20px",height:"80vh",overflow:"hidden",minWidth:"296px"},roomsButton:{display:"block",width:"100%",height:"100px",backgroundColor:"#fff",borderRadiusBottom:"1px solid #eee",borderRadius:"0px"},roomItemWrapper:{overflow:"hidden",width:"100%",padding:"30px 24px",textAlign:"left",backgroundColor:"#fff",cursor:"pointer",transition:"backgroundColor 255ms ease",display:"flex",justifyContent:"space-between",alignItems:"center","&:hover":{backgroundColor:"#f5f5f5"}},avatarPlaceholder:{height:"42px",width:"42px",borderRadius:"42px",backgroundColor:"#9C6",marginRight:"20px"},lastMessageTypography:{fontSize:"14px",opacity:.45,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}})),ht=function(){var e=r.a.useState(""),t=Object(s.a)(e,2),n=t[0],i=t[1],o=r.a.useState(!1),c=Object(s.a)(o,2),l=c[0],u=c[1],p=r.a.useState(!1),j=Object(s.a)(p,2),h=j[0],x=j[1],m=r.a.useState([]),g=Object(s.a)(m,2),O=g[0],y=g[1],k=r.a.useState(""),S=Object(s.a)(k,2),N=S[0],I=S[1],P=bt(),R=Object(b.f)(),E=_((function(e){return e.currentAccount})),W=re(),A=C(),L=Object(d.useLittera)(jt),T=Object(s.a)(L,1)[0],U=function(){x(!1)},D=function(){var e=Object(f.a)(v.a.mark((function e(){var t,n,a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,W(Y,null!==(t=null===E||void 0===E?void 0:E.id)&&void 0!==t?t:"",N,O);case 3:if(200!==(n=e.sent).status){e.next=14;break}return e.t0=A,e.next=8,ee(null!==(a=null===E||void 0===E?void 0:E.id)&&void 0!==a?a:"");case 8:e.t1=e.sent,(0,e.t0)(e.t1),r=n.data.room_id,R.push("/home/room/".concat(r)),e.next=15;break;case 14:404===n.status&&i(null!==(o=null===n||void 0===n?void 0:n.message)&&void 0!==o?o:"Unexpected error occurred");case 15:u(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=0===N.length||0===O.length||l;return Object(a.jsxs)("div",{children:[Object(a.jsx)(ve.a,{variant:"contained",onClick:function(){x(!0)},className:P.roomsButton,children:T.conversation}),Object(a.jsxs)(nt.a,{fullWidth:!0,onClose:U,"aria-labelledby":"customized-dialog-title",open:h,children:[Object(a.jsx)(at.a,{id:"customized-dialog-title",children:T.createRoom}),Object(a.jsxs)(it.a,{dividers:!0,children:[n&&Object(a.jsx)(Fe.a,{severity:"error",children:n}),Object(a.jsx)(Ie.a,{disabled:l,fullWidth:!0,id:"outlined-basic",label:"Room name",value:N,onChange:function(e){var t,n,a=null!==(t=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:"";I(a)},variant:"outlined"}),Object(a.jsx)(he.a,{style:{marginTop:"35px"},variant:"h5",children:T.invite}),Object(a.jsx)(pt,{disabled:l,style:{margin:"20px 0"},multiple:!0,value:O,onChange:y})]}),Object(a.jsx)(rt.a,{children:Object(a.jsxs)(w,{width:"100%",justifyContent:"space-between",alignItems:"center",children:[O.length>0?Object(a.jsxs)(he.a,{children:["Selected ",O.length," ",O.length>1?"friends":"friend"]}):Object(a.jsx)(he.a,{children:"Select a friend"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(ve.a,{autoFocus:!0,onClick:U,color:"primary",children:"Close"}),Object(a.jsx)(ve.a,{disabled:B,autoFocus:!0,onClick:D,color:"primary",children:"Create"})]})]})})]})]})},vt=function(e){var t=Object(i.useState)(null),n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(i.useEffect)((function(){se.database().ref(function(e){return"rooms/".concat(e,"/messages")}(e)).on("value",(function(e){var t,n=null!==(t=e.val())&&void 0!==t?t:[];r((function(e){return n}))}))}),[e]),a},ft=function(e){var t,n,i,r,o,c,s,l,u=Object(b.f)(),d=bt(),p="/home/room/".concat(e.id),j=oe(),h=ce(e.id,!0),v=vt(e.id);if(!h||!h.accounts)return null;var f=Object.values(v)[Object.keys(v).length-1],x=null!==(t=null===f||void 0===f?void 0:f.value)&&void 0!==t?t:null;try{x&&(x=atob(f.value))}catch(O){x=null,console.log(O)}var m=ct(null===h||void 0===h?void 0:h.accounts).filter((function(e){return e.id!==(null===j||void 0===j?void 0:j.id)})),g=m.length>1?e.label:lt(null===m||void 0===m||null===(n=m[0])||void 0===n||null===(i=n.details)||void 0===i?void 0:i.first_name,null===m||void 0===m||null===(r=m[0])||void 0===r||null===(o=r.details)||void 0===o?void 0:o.last_name,null!==(c=null===m||void 0===m||null===(s=m[0])||void 0===s?void 0:s.label)&&void 0!==c?c:"Unknown");return Object(a.jsxs)($e.a,{onClick:function(){return u.push(p)},className:d.roomItemWrapper,children:[Object(a.jsxs)($e.a,{style:{marginRight:"10px",maxWidth:"220px"},children:[Object(a.jsx)(he.a,{variant:"h6",style:{fontSize:"20px"},children:g}),x&&Object(a.jsx)(he.a,{className:d.lastMessageTypography,children:x})]}),Object(a.jsx)(tt.a,{style:{},max:3,spacing:16,children:null===(l=h.accounts)||void 0===l?void 0:l.filter((function(e){return e.id!==(null===j||void 0===j?void 0:j.id)})).map(xt)})]})},xt=function(e){var t,n,i,r,o,c,s=lt(null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.first_name,null===e||void 0===e||null===(n=e.details)||void 0===n?void 0:n.last_name,null!==(i=null===e||void 0===e?void 0:e.label)&&void 0!==i?i:"Unknown"),l=st(null===e||void 0===e||null===(r=e.details)||void 0===r?void 0:r.first_name,null===e||void 0===e||null===(o=e.details)||void 0===o?void 0:o.last_name,null!==(c=null===e||void 0===e?void 0:e.label)&&void 0!==c?c:"Unknown");return Object(a.jsx)(et.a,{alt:s,src:e.avatar_url,children:l})},mt=function(){var e=bt(),t=_((function(e){return e.currentAccount}));return Object(a.jsxs)($e.a,{className:e.roomWrapper,children:[Object(a.jsx)(ht,{}),Object(a.jsx)($e.a,{className:e.listWrapper,children:(null===t||void 0===t?void 0:t.rooms)&&t.rooms.map((function(e){return Object(a.jsx)(ft,Object(O.a)({},e),e.id)}))})]})},gt=Object(m.a)((function(e){return{root:Object(Ce.a)({position:"relative",display:"flex",height:"100vh",width:"100vw",maxWidth:"100%",overflow:"hidden"},e.breakpoints.down("sm"),{height:"auto"}),container:{display:"flex",flexWrap:"wrap",flexGrow:2,width:"calc(100% - ".concat(134,"px)"),height:"100%"},sidebar:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",width:114,marginRight:20,height:"100vh",padding:"15px 0",background:"linear-gradient(to right, rgba(0, 0, 0, 0.35), transparent)"},backgroundImage:{backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"100vh",width:"auto",minWidth:"100%",zIndex:-2},backgroundImageBacklit:{position:"absolute",top:0,left:0,zIndex:-1,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, .2)"},mainSection:Object(Ce.a)({display:"flex",width:"100%",justifyContent:"space-between",alignItems:"flex-start",height:"calc(100vh - 72px)"},e.breakpoints.down("sm"),{flexDirection:"column-reverse",justifyContent:"flex-start",alignItems:"center"}),drawer:{width:"60%"}}})),Ot=Object(m.a)((function(e){return{title:{padding:"5vh 0",width:"100%",textAlign:"center"},root:{display:"flex",flexWrap:"wrap"},personData:{display:"flex",width:"50%",margin:"15px auto",justifyContent:"center",alignItems:"center"},contacts:{width:"100%"},avatar:{margin:"0 20px"},text:{width:"100%",textAlign:"center"}}})),wt=function(e){var t,n=Object(i.useState)(""),r=Object(s.a)(n,2),o=r[0],c=r[1],l=Object(i.useState)(""),u=Object(s.a)(l,2),d=u[0],p=u[1],j=Ot(),b=_((function(e){return e.currentAccount})),h=ie(V,null===b||void 0===b||null===(t=b.friends)||void 0===t?void 0:t.map((function(e){return e.account_id}))),v=N((function(e){return z(e)?e.data:null}),h),f=Object(s.a)(v,1)[0];return Object(i.useEffect)((function(){null===f||void 0===f||f.forEach((function(t){if(t.id===e.account_id)return c("".concat(t.name," ").concat(t.surname)),p(t.avatar_url)}))})),console.log(b,f,e.account_id),Object(a.jsxs)("section",{className:j.personData,children:[Object(a.jsx)(et.a,{className:j.avatar,alt:"user",src:d}),Object(a.jsx)(he.a,{color:e.favorite?"primary":"initial",children:o})]})},yt=function(e){return{peopleMessage:{en_US:"You don't have any frients on the list.",pl_PL:"Nie masz nikogo na li\u015bcie znajomych."}}},kt=function(){var e=Ot(),t=Object(d.useLittera)(yt),n=Object(s.a)(t,1)[0],i=_((function(e){return e.currentAccount}));return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(he.a,{variant:"h2",gutterBottom:!0,className:e.title,children:"People"}),Object(a.jsx)("section",{className:e.contacts,children:i?(null===i||void 0===i?void 0:i.friends)&&i.friends.map((function(e){return Object(a.jsx)(wt,Object(O.a)({},e),e.account_id)})):Object(a.jsx)(he.a,{variant:"h3",className:e.text,children:n.peopleMessage})})]})},_t=n(138),Ct=n.n(_t),St=n(137),Nt=n.n(St),It=Object(m.a)((function(e){return{menuIcon:{fontSize:"40px",cursor:"pointer",color:"white","& svg":{boxShadow:"1px 3px 3px rgba(0, 0, 0, .25)"}}}})),Pt=function(){var e=It(),t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("section",{onClick:function(){o(!r)},children:r?Object(a.jsx)(Nt.a,{className:e.menuIcon}):Object(a.jsx)(Ct.a,{className:e.menuIcon})})})},Rt=n(289),Et=n(290),Wt=n(301),At=n(302),Lt=n(303),Tt=n(300),Ut=n(58),Dt=n.n(Ut),Bt={example:{en_US:"Example",de_DE:"Beispiel",pl_PL:"Przyk\u0142ad"},signOut:{en_US:"Sign out",de_DE:"Ausloggen",pl_PL:"Wyloguj si\u0119"},manageAccount:{en_US:"Manage account",de_DE:"Konto verwalten",pl_PL:"Zarz\u0105dzaj kontem"},settings:{de_DE:"Einstellungen",en_US:"Settings",pl_PL:"Ustawienia"}},zt=n(314),Mt=n(291),Ft=n(139),Ht=n.n(Ft),Gt={title:{de_DE:"Einstellungen",en_US:"Settings",pl_PL:"Ustawienia"}},qt=function(){var e,t;return Object(a.jsxs)("div",{style:{margin:"20px 0"},children:[Object(a.jsx)(he.a,{variant:"h5",gutterBottom:!0,children:"Version"}),Object(a.jsx)(he.a,{children:null!==(e="1.0.0-alpha.1")?e:"0.0.0-dev.0"}),Object(a.jsx)(he.a,{children:null!==(t="Thu Jan 28 22:45:27 UTC 2021")?t:(new Date).toDateString()})]})},Vt=function(){var e=_((function(e){var t;return null===(t=e.preferences)||void 0===t?void 0:t.backgroundTheme})),t=C();return Object(a.jsxs)("div",{style:{margin:"20px 0"},children:[Object(a.jsx)(he.a,{variant:"h5",gutterBottom:!0,children:"Theme"}),Object(a.jsx)(w,{flexWrap:"wrap",children:de.map((function(n,i){var r;return Object(a.jsx)(Jt,Object(O.a)({setTheme:function(){return function(e){t(te(de[e])),localStorage.setItem("background-theme",de[e].id)}(i)},active:((null===e||void 0===e||null===(r=e.id)||void 0===r?void 0:r.toString())||"1922729")===n.id},n),n.id)}))})]})},Jt=function(e){return Object(a.jsxs)("div",{style:{margin:"0 5px",cursor:"pointer"},onClick:e.setTheme,children:[Object(a.jsx)("div",{style:{width:"200px",height:"125px",overflow:"hidden",borderRadius:"8px"},children:Object(a.jsx)("img",{src:"".concat(e.url,"200x125"),alt:"theme thumbnail"})}),Object(a.jsx)("p",{style:{marginTop:"5px",fontWeight:e.active?"bold":"normal"},children:e.label})]})},Kt=Object(m.a)((function(e){return{root:{},h2:{color:"#000"},drawer:{},paperDrawer:{position:"relative",padding:"10px 20px",width:"40vw"}}})),Yt=function(e){var t=Object(d.useLittera)(Gt),n=Object(s.a)(t,1)[0],i=Kt();return Object(a.jsx)("div",{className:Dt()(i.root,e.className),style:e.style,children:Object(a.jsx)(Tt.a,{open:e.open,anchor:"right",onClose:e.onClose,className:i.drawer,keepMounted:!0,children:Object(a.jsxs)("div",{className:i.paperDrawer,children:[Object(a.jsxs)(w,{alignItems:"center",justifyContent:"space-between",style:{marginBottom:"10px"},children:[Object(a.jsx)(he.a,{variant:"h4",children:n.title}),Object(a.jsx)(Mt.a,{onClick:e.onClose,children:Object(a.jsx)(Ht.a,{})})]}),Object(a.jsx)(Vt,{}),Object(a.jsx)(qt,{})]})})})},Zt=Object(m.a)((function(e){return Object(zt.a)({root:{marginTop:"10px"},h4:{color:e.palette.primary.main},avatar:{cursor:"pointer",marginLeft:"15px",position:"relative"},avatarBig:{cursor:"pointer",width:"82px",height:"82px",position:"relative",marginBottom:e.spacing(4)},popoverPaper:{width:"288px",borderRadius:"10px"},header:{padding:"".concat(e.spacing(5),"px ").concat(e.spacing(4),"px")}})})),Qt=function(e){var t,n,o,c,l=Object(d.useLittera)(Bt),u=Object(s.a)(l,1)[0],p=Zt(),j=Object(i.useState)(!1),b=Object(s.a)(j,2),h=b[0],x=b[1],m=function(){return x(!0)},g=Object(i.useState)(!1),O=Object(s.a)(g,2),w=O[0],y=O[1],k=_((function(e){return e.currentAccount})),S=r.a.useState(null),N=Object(s.a)(S,2),I=N[0],P=N[1],R=function(){P(null)},W=Boolean(I),A=W?"profile-popover":void 0,L=lt(null===k||void 0===k||null===(t=k.details)||void 0===t?void 0:t.first_name,null===k||void 0===k||null===(n=k.details)||void 0===n?void 0:n.last_name,null!==(o=null===k||void 0===k?void 0:k.label)&&void 0!==o?o:"Unknown"),T=E(),U=C(),D=function(){var e=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me();case 2:T("accountIdToken"),U($(null)),window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(et.a,{"aria-describedby":A,className:p.avatar,alt:"user",src:null===k||void 0===k?void 0:k.avatar_url,onClick:function(e){P(e.currentTarget)}}),Object(a.jsx)(Rt.a,{id:A,open:W,anchorEl:I,onClose:R,classes:{root:Dt()(p.root,e.className),paper:p.popoverPaper},style:e.style,anchorReference:"anchorEl",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(a.jsxs)($e.a,{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",children:[Object(a.jsxs)($e.a,{className:p.header,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",children:[Object(a.jsx)(et.a,{className:p.avatarBig,alt:L,src:null===k||void 0===k?void 0:k.avatar_url}),Object(a.jsx)(he.a,{variant:"h5",children:L}),Object(a.jsx)(he.a,{style:{opacity:.6},children:null===k||void 0===k||null===(c=k.contact)||void 0===c?void 0:c.email})]}),Object(a.jsxs)(Et.a,{"aria-label":"profile settings signout",style:{width:"88%"},children:[Object(a.jsxs)(Wt.a,{button:!0,onClick:function(){y(!0),R()},children:[Object(a.jsx)(At.a,{children:Object(a.jsx)(xe.a,{children:"person"})}),Object(a.jsx)(Lt.a,{primary:u.manageAccount})]}),Object(a.jsxs)(Wt.a,{button:!0,onClick:function(){m(),R()},children:[Object(a.jsx)(At.a,{children:Object(a.jsx)(xe.a,{children:"settings"})}),Object(a.jsx)(Lt.a,{primary:u.settings})]}),Object(a.jsxs)(Wt.a,{button:!0,onClick:function(){D(),R()},children:[Object(a.jsx)(At.a,{children:Object(a.jsx)(xe.a,{children:"lock"})}),Object(a.jsx)(Lt.a,{primary:u.signOut})]})]})]})}),Object(a.jsx)(Tt.a,{anchor:"right",open:w,onClose:function(){return y(!1)},children:Object(a.jsx)($e.a,{style:{width:"55vw",height:"100vh",backgroundColor:"#FFF"},children:Object(a.jsx)(cn,{})})}),Object(a.jsx)(Yt,{open:h,onClose:function(){return x(!1)},onOpen:m})]})},Xt=Object(m.a)((function(e){return{root:{textAlign:"left",margin:"0 0",textShadow:"1px 3px 4px rgba(0, 0, 0, .3)",fontFamily:"'Montserrat', sans-serif",fontWeight:600}}})),$t=function(e){var t=Xt(),n=Object(O.a)(Object(O.a)({},e.style),{},{cursor:e.onClick?"pointer":"initial"});return Object(a.jsx)(he.a,Object(O.a)(Object(O.a)({onClick:e.onClick,variant:"h2",className:t.root,style:n},e.typographyProps),{},{children:"Circles"}))},en=Object(m.a)((function(e){return Object(zt.a)({root:{position:"relative",display:"flex",height:"72px",width:"100%",margin:"0 auto",justifyContent:"space-between",alignItems:"center",color:"white"},menuBar:{marginRight:"3vw"}})})),tn=function(e){var t,n=en(),i=Object(b.f)();return Object(a.jsxs)("section",{className:n.root,style:e.style,children:[Object(a.jsx)($t,{style:{fontSize:"56px",margin:"16px 0"},onClick:(t="/home/highlights",function(){return i.push(t)})}),Object(a.jsx)(w,{justifyContent:"flex-end",alignItems:"center",className:n.menuBar,children:Object(a.jsx)(Qt,{})})]})};var nn=function(){var e=gt(),t=Object(b.f)(),n=_((function(e){var t;return(null===e||void 0===e||null===(t=e.preferences)||void 0===t?void 0:t.backgroundTheme)||de[0]})),r=Object(i.useState)(!0),o=Object(s.a)(r,1)[0];return Object(i.useEffect)((function(){t.push("/home/highlights")}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{className:e.root,children:[Object(a.jsx)("div",{className:e.sidebar,children:Object(a.jsx)(Pt,{})}),Object(a.jsxs)("div",{className:e.container,children:[Object(a.jsx)(tn,{}),Object(a.jsxs)("main",{className:e.mainSection,children:[o?Object(a.jsx)(mt,{}):Object(a.jsx)(kt,{}),Object(a.jsx)(b.a,{path:"/home/highlights",component:An}),Object(a.jsx)(b.a,{path:"/home/room/:id",component:gn})]})]})]}),Object(a.jsx)("div",{className:e.backgroundImageBacklit}),Object(a.jsx)("div",{className:e.backgroundImage,style:{backgroundImage:"url(".concat(null===n||void 0===n?void 0:n.url).concat(window.innerWidth,"x").concat(window.innerHeight,")")}})]})},an=Object(m.a)((function(e){return{root:{height:"100vh",width:"45vw",backgroundColor:"white",zIndex:4}}})),rn=function(e){return{title:{en_US:"Profile",pl_PL:"Profil",de_DE:"Profil"},signOut:{en_US:"Sign Out",pl_PL:"Wyloguj si\u0119",de_DE:"Ausloggen"}}},on=function(e){var t=oe(e.account_id,!1,{flags:!0,rooms:!0,contacts:!0});return t?Object(a.jsxs)("div",{style:{border:"1px solid #121212"},children:[Object(a.jsx)("img",{alt:"profile",src:t.avatar_url,style:{width:"220px",height:"auto"}}),Object(a.jsx)(he.a,{gutterBottom:!0,variant:"h4",children:t.label}),Object(a.jsxs)(he.a,{children:[t.details.first_name," ",t.details.last_name]}),Object(a.jsxs)(he.a,{children:["Is favorite? ",e.favorite?"true":"false"]})]}):Object(a.jsx)("div",{children:"..."})},cn=function(){var e,t=Object(d.useLittera)(rn),n=Object(s.a)(t,1)[0],i=an(),r=E(),o=C(),c=oe(void 0,!0);if(!c)return Object(a.jsx)(Ee.a,{});var l=function(){var e=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me();case 2:r("accountIdToken"),o($(null)),window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:i.root,children:[n.title,Object(a.jsx)("img",{alt:"profile",src:c.avatar_url,style:{width:"220px",height:"auto"}}),Object(a.jsx)(he.a,{paragraph:!0,children:c.label}),Object(a.jsx)(he.a,{paragraph:!0,children:c.details.first_name}),Object(a.jsx)(he.a,{paragraph:!0,children:c.details.last_name}),Object(a.jsx)(he.a,{paragraph:!0,children:null===(e=c.contact)||void 0===e?void 0:e.email}),Object(a.jsx)("section",{children:c&&Object(a.jsx)(ve.a,{variant:"contained",onClick:l,children:n.signOut})}),(null===c||void 0===c?void 0:c.friends)&&c.friends.map((function(e){return Object(a.jsx)(on,Object(O.a)({},e),e.account_id)}))]})},sn=Object(m.a)((function(e){var t;return{root:(t={position:"relative",flexBasis:"70%",width:"70%",minWidth:"70%",maxWidth:"max-content",display:"flex",flexDirection:"column",height:"calc(100vh - 72px)",justifyContent:"space-between",backdropFilter:"blur(10px)",borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},Object(Ce.a)(t,e.breakpoints.down("sm"),{flexBasis:"100%",minWidth:"100%",width:"100%"}),Object(Ce.a)(t,e.breakpoints.down("md"),{flexBasis:"50%",minWidth:"50%",width:"50%"}),t),inputContainer:{backgroundColor:e.palette.background.default,borderRadius:e.shape.borderRadius,position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-start"},roomTitle:{marginLeft:"12px",marginTop:"12px"},messagesRoot:Object(Ce.a)({minWidth:"70vw",width:"100%",position:"relative",maxHeight:"calc(100vh - 36px)",height:"90%",flexGrow:1,overflow:"auto",display:"flex"},e.breakpoints.down("sm"),{minWidth:"70vw"}),messageRoot:{borderRadius:"15px"},ownedMessage:{margin:"3px ",alignSelf:"flex-end",color:"#000",backgroundColor:"#eee",borderRadius:"15px","& > *":{margin:0,maxWidth:"240px",whiteSpace:"normal",wordBreak:"break-word"},"& > * > *":{maxWidth:"240px"}},notOwnedMessage:{alignSelf:"flex-start",margin:"15px 0",color:"#FFF",background:e.palette.primary.main,"& > *":{margin:0,maxWidth:"240px",whiteSpace:"normal",wordBreak:"break-word"},"& > * > *":{maxWidth:"240px"}},messageWithManyLines:{margin:"8px 0"},message:{maxWidth:"450px",position:"relative",padding:"16px 18px",borderRadius:"25px",textAlign:"left"},nextMessageOwned:{borderBottomRightRadius:"4px"},nextMessageNotOwned:{borderBottomLeftRadius:"4px",marginBottom:"3px"},prevMessageOwned:{borderTopRightRadius:"4px"},prevMessageNotOwned:{borderTopLeftRadius:"4px",marginTop:"3px"},equalToLine:{paddingLeft:"34px"},sendMessageArea:{position:"fixed"},avatar:{borderRadius:"28px",width:"28px",height:"28px",backgroundColor:"white",color:"#242424",right:"-19px",bottom:"0px",position:"relative",padding:"3px",zIndex:5}}})),ln=n(140),un=n.n(ln),dn=function(e){var t,n,r,o,c,l,u,d,p=e.message,j=e.author,b=e.isOwned,h=e.displayAvatar,v=e.isOwnedNextMessage,f=e.isOwnedPrevMessage,x=sn(),m=Object(i.useState)(0),g=Object(s.a)(m,2),O=g[0],y=g[1],k=Object(i.useRef)(null),_=p.value;try{_=atob(p.value)}catch(P){console.log(P)}var C=Dt()(x.message,(t={},Object(Ce.a)(t,x.ownedMessage,b),Object(Ce.a)(t,x.notOwnedMessage,!b),Object(Ce.a)(t,x.messageWithManyLines,O>150),Object(Ce.a)(t,x.nextMessageNotOwned,v&&!b),Object(Ce.a)(t,x.prevMessageNotOwned,f&&!b),Object(Ce.a)(t,x.nextMessageOwned,v&&b),Object(Ce.a)(t,x.prevMessageOwned,f&&b),t)),S=Dt()((n={},Object(Ce.a)(n,x.ownedMessage,b),Object(Ce.a)(n,x.messageRoot,!b),Object(Ce.a)(n,x.equalToLine,!h&&!b),n));Object(i.useEffect)((function(){y(k.current.offsetHeight)}),[]);var N=lt(null===j||void 0===j||null===(r=j.details)||void 0===r?void 0:r.first_name,null===j||void 0===j||null===(o=j.details)||void 0===o?void 0:o.last_name,null!==(c=null===j||void 0===j?void 0:j.label)&&void 0!==c?c:"Unknown"),I=st(null===j||void 0===j||null===(l=j.details)||void 0===l?void 0:l.first_name,null===j||void 0===j||null===(u=j.details)||void 0===u?void 0:u.last_name,null!==(d=null===j||void 0===j?void 0:j.label)&&void 0!==d?d:"Unknown");return Object(a.jsxs)(w,{alignItems:"flex-end",className:S,style:{alignSelf:b?"flex-end":"flex-start"},children:[h&&!b&&j&&Object(a.jsx)(et.a,{alt:N,className:x.avatar,src:j.avatar_url,children:I}),Object(a.jsx)("div",{className:C,ref:k,children:Object(a.jsx)(un.a,{source:_})})]})},pn=function(e){var t=e.roomId,n=e.accounts,r=vt(t)||{},o=Object(i.useCallback)((function(e){var t;return null!==(t=n.find((function(t){return t.id===e})))&&void 0!==t?t:null}),[n]),c=_((function(e){var t;return null!==(t=e.currentAccount)&&void 0!==t?t:null})),s=0!==Object.keys(r).length;return Object(a.jsx)(w,{flexDirection:"column-reverse",style:{marginBottom:"15px",overflowY:"scroll",height:"calc(90vh - 122px)"},children:r&&!s?Object(a.jsx)(he.a,{variant:"h2",children:"Say Hi!"}):Object.keys(r).reverse().map((function(e,t){var n,i,s,l=r[e];return Object(a.jsx)(dn,{message:l,author:o(l.author),displayAvatar:l.author!==(null===(n=r[Object.keys(r).reverse()[t-1]])||void 0===n?void 0:n.author),isOwnedNextMessage:l.author===(null===(i=r[Object.keys(r).reverse()[t-1]])||void 0===i?void 0:i.author),isOwnedPrevMessage:l.author===(null===(s=r[Object.keys(r).reverse()[t+1]])||void 0===s?void 0:s.author),isOwned:(null===c||void 0===c?void 0:c.id)===l.author},e)}))})},jn=Object(m.a)((function(e){return{root:{}}})),bn=function(e){var t=jn();return Object(a.jsx)(Ie.a,{onKeyPress:function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),e.onSubmit&&e.onSubmit())},ref:e.inputRef,fullWidth:!0,value:e.value,onChange:e.onChange,placeholder:"Write your message...",className:t.root,variant:"outlined"})},hn=function(){var e=Object(f.a)(v.a.mark((function e(t,n,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t,n,a);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),vn=function(e){var t=Object(i.useState)(""),n=Object(s.a)(t,2),r=n[0],o=n[1],c=sn(),l=Object(i.useRef)(),u=function(){var e;l.current&&(null===(e=l.current)||void 0===e||e.focus())},d=function(){var t=Object(f.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&n.preventDefault(),!(r.length>0)){t.next=14;break}return t.prev=2,e.onSubmit(btoa(r)),o(""),u(),t.next=8,hn(["dcSXVLtXIAUTyhxv_vpAOC:APA91bE-13ugAh4qEcf8PT3n1r84pbIGZ2Hm5xv4S054SO_wRs3mGM0xCw-0nphyB7wYVthrL6lGZR8qy6qx1--wzUIuqACVNGfow29Lf1EdA-Bh6bb1-VPgiGtx-EF_Z1KPxRu6nZE4"],"New message",r);case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0),alert("Message contains invalid characters.");case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("form",{id:"message-form",className:c.inputContainer,onSubmit:d,children:[Object(a.jsx)(bn,{inputRef:l,value:r,onChange:function(e){var t,n;o(null!==(t=null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:"")},onSubmit:d}),Object(a.jsx)(Mt.a,{onClick:function(){return d()},children:Object(a.jsx)(xe.a,{color:"primary",children:"send"})})]})},fn=n(304),xn=function(){return Object(a.jsxs)("div",{style:{width:"fit-content",marginLeft:"10px"},children:[Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:150,height:40,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:240,height:120,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:240,height:80,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:120,height:40,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:100,height:40,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:240,height:160,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:210,height:40,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:210,height:40,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:210,height:50,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:210,height:50,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}}),Object(a.jsx)(fn.a,{animation:"wave",variant:"rect",width:210,height:50,style:{margin:"20px 34px 10px 0px",borderRadius:"10px"}})]})},mn=function(){var e,t,n,r,o,c,s,l,u,d,p=Object(b.h)(),j=sn(),h=_((function(e){return e.currentAccount})),v=ce(p.id),f=(u=p.id,d=null!==(e=null===h||void 0===h?void 0:h.id)&&void 0!==e?e:"",Object(i.useCallback)((function(e){var t={author:d,value:e,timestamp:(new Date).toString()},n=se.database().ref().child("rooms").child(u).child("messages").push().key,a={};return a["/rooms/".concat(u,"/messages/").concat(n)]=t,se.database().ref().update(a)}),[d,u])),x=ct(null===v||void 0===v?void 0:v.accounts).filter((function(e){return e.id!==(null===h||void 0===h?void 0:h.id)})),m=x.length>1?null===v||void 0===v?void 0:v.label:lt(null===x||void 0===x||null===(t=x[0])||void 0===t||null===(n=t.details)||void 0===n?void 0:n.first_name,null===x||void 0===x||null===(r=x[0])||void 0===r||null===(o=r.details)||void 0===o?void 0:o.last_name,null!==(c=null===x||void 0===x||null===(s=x[0])||void 0===s?void 0:s.label)&&void 0!==c?c:"Unknown");return Object(a.jsx)("div",{className:j.root,children:v&&v.id?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(he.a,{variant:"h4",className:j.roomTitle,children:m}),Object(a.jsxs)("div",{children:[Object(a.jsx)(pn,{accounts:null!==(l=null===v||void 0===v?void 0:v.accounts)&&void 0!==l?l:[],roomId:v.id}),Object(a.jsx)(vn,{onSubmit:f})]})]}):Object(a.jsx)(xn,{})})},gn=function(){return Object(a.jsx)(mn,{})},On=Object(m.a)((function(e){return{root:{marginRight:"10%"},welcome:{display:"flex",flexDirection:"column"},avatarContainer:{position:"relative"},welcomeWraper:{position:"relative",display:"flex"},greetings:{width:"100%",color:"white",margin:0,textShadow:"1px 3px 3px rgba(0, 0, 0, .25)",fontFamily:"'Roboto Condensed', sans-serif",fontWeight:400},suggestionsInfo:{width:"100%",margin:0,color:"white",fontSize:"26px",textShadow:"1px 3px 3px rgba(0, 0, 0, .25)"}}})),wn=function(e){return{greeting:{en_US:"Hi",pl_PL:"Witaj",de_DE:"Hallo"}}},yn=n(305),kn=n(306),_n=function(e){return{firstMessage:{en_US:"Write to this member 1st time",pl_PL:"Napisz do tej osoby poraz pierwszy",de_DE:"Hallo!"}}},Cn=Object(m.a)((function(e){return{root:{marginTop:"20px",overflowY:"auto"},card:{borderRadius:"8px",margin:"10px auto",width:"100%"},suggestionAvatar:{marginRight:e.spacing(4),width:"48px",height:"48px"}}})),Sn=n(98),Nn=n(96);Sn.a.registerPlugin(Nn.a);var In=function(e){var t,n,r,o,c,l=e.suggestion,u=e.index,p=Cn(),j=Object(d.useLittera)(_n),b=Object(s.a)(j,1)[0],h=l.payload,v=l.type,f=Object(i.useRef)(null),x=ie(G,null===h||void 0===h?void 0:h.account_id),m=N((function(e){return z(e)?e.data:null}),x),g=Object(s.a)(m,1)[0];if(Object(i.useEffect)((function(){}),[l]),!g||(null===(t=g.flags)||void 0===t?void 0:t.includes("needs_init")))return null;var O=lt(null===(n=g.details)||void 0===n?void 0:n.first_name,null===(r=g.details)||void 0===r?void 0:r.last_name,g.label),w=st(null===(o=g.details)||void 0===o?void 0:o.first_name,null===(c=g.details)||void 0===c?void 0:c.last_name,g.label);return Object(a.jsx)(yn.a,{className:p.card,id:u,ref:f,style:{zIndex:parseInt(u)},children:Object(a.jsx)(kn.a,{children:Object(a.jsxs)($e.a,{display:"flex",alignItems:"center",justifyContent:"flex-start",children:[Object(a.jsx)(et.a,{className:p.suggestionAvatar,src:g.avatar_url,alt:O,children:w}),Object(a.jsxs)($e.a,{children:[Object(a.jsx)(he.a,{variant:"h5",children:O}),Object(a.jsx)(he.a,{children:"never-messaged"===v?b.firstMessage:v})]})]})})})};Sn.a.registerPlugin(Nn.a);var Pn=function(){var e=Cn(),t=_((function(e){var t;return null!==(t=e.currentAccount)&&void 0!==t?t:null})),n=Object(i.useRef)(null),r=ie(Z,null===t||void 0===t?void 0:t.id),o=N((function(e){return z(e)?e.data:null}),r),c=Object(s.a)(o,1)[0];return Object(a.jsx)("section",{className:e.root,ref:n,children:0!==(null===c||void 0===c?void 0:c.length)?null===c||void 0===c?void 0:c.map((function(e){return Object(a.jsx)(In,{suggestion:e,index:c.indexOf(e)},c.indexOf(e))})):null})},Rn=Object(m.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"10px 0"},image:{width:"50px",height:"50px",borderRadius:"50px",marginRight:"10px",boxShadow:"0px 3px 9px rgba(0, 0, 0, .25)"}}})),En=function(e){var t,n,i,r,o,c=Rn(),l=ie(G,e.account_id),u=N((function(e){return z(e)?e.data:null}),l),d=Object(s.a)(u,1)[0];if(!d||(null===(t=d.flags)||void 0===t?void 0:t.includes("needs_init")))return null;var p=lt(null===(n=d.details)||void 0===n?void 0:n.first_name,null===(i=d.details)||void 0===i?void 0:i.last_name,d.label),j=st(null===(r=d.details)||void 0===r?void 0:r.first_name,null===(o=d.details)||void 0===o?void 0:o.last_name,d.label);return Object(a.jsx)(et.a,{className:c.image,src:d.avatar_url,alt:p,children:j})},Wn=function(e){var t=Rn(),n=_((function(e){var t;return null!==(t=e.currentAccount)&&void 0!==t?t:null}));return Object(a.jsx)("div",{className:t.root,children:ct(null===n||void 0===n?void 0:n.friends).filter((function(e){return!!e.favorite})).map((function(e){return Object(a.jsx)(En,Object(O.a)({},e))}))})},An=function(){var e,t=Object(d.useLittera)(wn),n=Object(s.a)(t,1)[0],i=On(),r=_((function(e){return e.currentAccount}));return Object(a.jsxs)("div",{className:i.root,children:[Object(a.jsx)("section",{className:i.welcomeWraper,children:Object(a.jsxs)("section",{className:i.welcome,children:[Object(a.jsxs)(he.a,{className:i.greetings,variant:"h2",children:[n.greeting,", ",null===r||void 0===r||null===(e=r.details)||void 0===e?void 0:e.first_name,"!"]}),Object(a.jsx)(he.a,{className:i.suggestionsInfo,variant:"h5",children:"Here are some suggestions for you"})]})}),Object(a.jsx)(Wn,{}),Object(a.jsx)(Pn,{})]})},Ln=n(307),Tn=n(308),Un=n(141),Dn=n.n(Un),Bn=n(142),zn=n.n(Bn),Mn=n(143),Fn=n.n(Mn),Hn=Object(m.a)({root:{bottom:"0",position:"fixed",width:"100%",boxShadow:"0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)"}}),Gn=["highlights","rooms","people"],qn=function(e){var t=e.visible,n=Object(b.f)(),i=Object(b.g)(),o=Hn(),c=r.a.useState(Gn.indexOf(i.pathname.split("/")[2])||0),l=Object(s.a)(c,2),u=l[0],d=l[1];return t?null:t?Object(a.jsx)("div",{children:Object(a.jsxs)(Ln.a,{value:u,onChange:function(e,t){d(t)},showLabels:!0,className:o.root,children:[Object(a.jsx)(Tn.a,{onClick:function(){return n.push("/home/highlights")},label:"Highlights",icon:Object(a.jsx)(Dn.a,{})}),Object(a.jsx)(Tn.a,{onClick:function(){return n.push("/home/rooms")},label:"Rooms",icon:Object(a.jsx)(zn.a,{})}),Object(a.jsx)(Tn.a,{onClick:function(){return n.push("/home/people")},label:"People",icon:Object(a.jsx)(Fn.a,{})})]})}):null},Vn=["highlights","rooms","people"];var Jn=function(){var e=Object(b.f)(),t=Object(b.g)(),n=new RegExp(Vn.join("|")).test(t.pathname);return Object(i.useEffect)((function(){"/"!==t.pathname&&e.push({pathname:"/",state:{initialPath:t.pathname}})}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{exact:!0,path:"/",component:pe}),Object(a.jsx)(b.a,{exact:!0,path:"/intro",component:_e}),Object(a.jsx)(b.a,{exact:!0,path:"/signup",component:Ke}),Object(a.jsx)(b.a,{exact:!0,path:"/welcome",component:Xe}),Object(a.jsx)(b.a,{exact:!0,path:"/login",component:Ge}),Object(a.jsx)(b.a,{path:"/home",component:nn}),Object(a.jsx)(b.a,{exact:!0,component:function(){return Object(a.jsxs)("div",{children:["Error page ",Object(a.jsx)("br",{})," ",Object(a.jsx)(ve.a,{variant:"contained",onClick:function(){return e.push("/")},children:"Reload"})]})}})]}),Object(a.jsx)(qn,{visible:n})]})},Kn=n(144),Yn=Object(Kn.a)({palette:{primary:{main:"#449ee2"},secondary:{main:"#99d8ff"},background:{default:"#FAFAFA"}},spacing:4,overrides:{MuiCssBaseline:{"@global":{html:{WebkitFontSmoothing:"auto"}}}}}),Zn=Object.freeze(["en_US","pl_PL","de_DE"]),Qn=Object.freeze({yes:{en_US:"Yes",pl_PL:"Tak",de_DE:"Ja"},no:{en_US:"No",pl_PL:"Nie",de_DE:"Nein"}}),Xn=function(e){var t=e.children,n=e.initialState,r=Object(i.useState)(null!==n&&void 0!==n?n:y),o=Object(s.a)(r,2),c=o[0],l=o[1];return Object(a.jsx)(k.Provider,{value:[c,l],children:t})};var $n=function(){var e=function(){var e=Object(i.useState)(Zn[0]),t=Object(s.a)(e,2);return[t[0],t[1],Qn]}(),t=Object(s.a)(e,3),n=t[0],r=t[1],o=t[2];return Object(a.jsx)(Xn,{children:Object(a.jsxs)(l.a,{theme:Yn,children:[Object(a.jsx)(u.a,{}),Object(a.jsx)(p.a,{language:n,setLanguage:r,preset:o,children:Object(a.jsx)(ue.a,{maxSnack:3,children:Object(a.jsx)(j.a,{basename:("/","/"),children:Object(a.jsx)(Jn,{})})})})]})})},ea=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ta(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)($n,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ea?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ta(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ta(t,e)}))}}(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)}))}},[[249,1,2]]]);
//# sourceMappingURL=main.d22da4d1.chunk.js.map